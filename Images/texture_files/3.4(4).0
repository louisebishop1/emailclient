/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("attribute-base",function(c){c.State=function(){this.data={};};c.State.prototype={add:function(B,C,E){var D=this.data;D[C]=D[C]||{};D[C][B]=E;},addAll:function(B,D){var C;for(C in D){if(D.hasOwnProperty(C)){this.add(B,C,D[C]);}}},remove:function(B,C){var D=this.data;if(D[C]&&(B in D[C])){delete D[C][B];}},removeAll:function(B,D){var C=this.data;c.each(D||C,function(F,E){if(c.Lang.isString(E)){this.remove(B,E);}else{this.remove(B,F);}},this);},get:function(B,C){var D=this.data;return(D[C]&&B in D[C])?D[C][B]:undefined;},getAll:function(B){var D=this.data,C;c.each(D,function(F,E){if(B in D[E]){C=C||{};C[E]=F[B];}},this);return C;}};var k=c.Object,f=c.Lang,l=c.EventTarget,w=".",t="Change",n="getter",m="setter",o="readOnly",x="writeOnce",u="initOnly",A="validator",h="value",p="valueFn",e="broadcast",r="lazyAdd",j="_bypassProxy",z="added",b="initializing",i="initValue",v="published",s="defaultValue",a="lazy",q="isLazyAdd",g,y={};y[o]=1;y[x]=1;y[n]=1;y[e]=1;function d(C,B,D){var E=this;E._ATTR_E_FACADE={};l.call(E,{emitFacade:true});E._conf=E._state=new c.State();E._stateProxy=E._stateProxy||null;E._requireAddAttr=E._requireAddAttr||false;this._initAttrs(C,B,D);}d.INVALID_VALUE={};g=d.INVALID_VALUE;d._ATTR_CFG=[m,n,A,h,p,x,o,r,e,j];d.prototype={addAttr:function(C,B,E){var F=this,H=F._state,G,D;E=(r in B)?B[r]:E;if(E&&!F.attrAdded(C)){H.add(C,a,B||{});H.add(C,z,true);}else{if(!F.attrAdded(C)||H.get(C,q)){B=B||{};D=(h in B);if(D){G=B.value;delete B.value;}B.added=true;B.initializing=true;H.addAll(C,B);if(D){F.set(C,G);}H.remove(C,b);}}return F;},attrAdded:function(B){return !!this._state.get(B,z);},modifyAttr:function(C,B){var D=this,F,E;if(D.attrAdded(C)){if(D._isLazyAttr(C)){D._addLazyAttr(C);}E=D._state;for(F in B){if(y[F]&&B.hasOwnProperty(F)){E.add(C,F,B[F]);if(F===e){E.remove(C,v);}}}}},removeAttr:function(B){this._state.removeAll(B);},get:function(B){return this._getAttr(B);},_isLazyAttr:function(B){return this._state.get(B,a);},_addLazyAttr:function(C){var D=this._state,B=D.get(C,a);D.add(C,q,true);D.remove(C,a);this.addAttr(C,B);},set:function(B,D,C){return this._setAttr(B,D,C);},reset:function(B){var D=this,C;if(B){if(D._isLazyAttr(B)){D._addLazyAttr(B);}D.set(B,D._state.get(B,i));}else{C=D._state.data.added;c.each(C,function(E,F){D.reset(F);},D);}return D;},_set:function(B,D,C){return this._setAttr(B,D,C,true);},_getAttr:function(D){var E=this,I=D,F=E._state,G,B,H,C;if(D.indexOf(w)!==-1){G=D.split(w);D=G.shift();}if(E._tCfgs&&E._tCfgs[D]){C={};C[D]=E._tCfgs[D];delete E._tCfgs[D];E._addAttrs(C,E._tVals);}if(E._isLazyAttr(D)){E._addLazyAttr(D);}H=E._getStateVal(D);B=F.get(D,n);if(B&&!B.call){B=this[B];}H=(B)?B.call(E,H,I):H;H=(G)?k.getValue(H,G):H;return H;},_setAttr:function(D,G,B,E){var K=true,C=this._state,H=this._stateProxy,M=C.data,J,N,O,F,I,L;if(D.indexOf(w)!==-1){N=D;O=D.split(w);D=O.shift();}if(this._isLazyAttr(D)){this._addLazyAttr(D);}J=(!M.value||!(D in M.value));if(H&&D in H&&!this._state.get(D,j)){J=false;}if(this._requireAddAttr&&!this.attrAdded(D)){}else{I=C.get(D,x);L=C.get(D,b);if(!J&&!E){if(I){K=false;}if(C.get(D,o)){K=false;}}if(!L&&!E&&I===u){K=false;}if(K){if(!J){F=this.get(D);}if(O){G=k.setValue(c.clone(F),O,G);if(G===undefined){K=false;}}if(K){if(L){this._setAttrVal(D,N,F,G);}else{this._fireAttrChange(D,N,F,G,B);}}}}return this;},_fireAttrChange:function(H,G,E,D,B){var J=this,F=H+t,C=J._state,I;if(!C.get(H,v)){J.publish(F,{queuable:false,defaultTargetOnly:true,defaultFn:J._defAttrChangeFn,silent:true,broadcast:C.get(H,e)});C.add(H,v,true);}I=(B)?c.merge(B):J._ATTR_E_FACADE;I.attrName=H;I.subAttrName=G;I.prevVal=E;I.newVal=D;J.fire(F,I);},_defAttrChangeFn:function(B){if(!this._setAttrVal(B.attrName,B.subAttrName,B.prevVal,B.newVal)){B.stopImmediatePropagation();}else{B.newVal=this.get(B.attrName);}},_getStateVal:function(B){var C=this._stateProxy;return C&&(B in C)&&!this._state.get(B,j)?C[B]:this._state.get(B,h);},_setStateVal:function(B,D){var C=this._stateProxy;if(C&&(B in C)&&!this._state.get(B,j)){C[B]=D;}else{this._state.add(B,h,D);}},_setAttrVal:function(M,L,I,G){var O=this,J=true,D=O._state,E=D.get(M,A),H=D.get(M,m),K=D.get(M,b),N=this._getStateVal(M),C=L||M,F,B;if(E){if(!E.call){E=this[E];}if(E){B=E.call(O,G,C);if(!B&&K){G=D.get(M,s);B=true;}}}if(!E||B){if(H){if(!H.call){H=this[H];}if(H){F=H.call(O,G,C);if(F===g){J=false;}else{if(F!==undefined){G=F;}}}}if(J){if(!L&&(G===N)&&!f.isObject(G)){J=false;}else{if(D.get(M,i)===undefined){D.add(M,i,G);}O._setStateVal(M,G);}}}else{J=false;}return J;},setAttrs:function(B,C){return this._setAttrs(B,C);},_setAttrs:function(C,D){for(var B in C){if(C.hasOwnProperty(B)){this.set(B,C[B]);}}return this;},getAttrs:function(B){return this._getAttrs(B);},_getAttrs:function(E){var G=this,I={},F,C,B,H,D=(E===true);E=(E&&!D)?E:k.keys(G._state.data.added);for(F=0,C=E.length;F<C;F++){B=E[F];H=G.get(B);if(!D||G._getStateVal(B)!=G._state.get(B,i)){I[B]=G.get(B);}}return I;},addAttrs:function(B,C,D){var E=this;if(B){E._tCfgs=B;E._tVals=E._normAttrVals(C);E._addAttrs(B,E._tVals,D);E._tCfgs=E._tVals=null;}return E;},_addAttrs:function(C,D,E){var G=this,B,F,H;for(B in C){if(C.hasOwnProperty(B)){F=C[B];F.defaultValue=F.value;H=G._getAttrInitVal(B,F,G._tVals);if(H!==undefined){F.value=H;}if(G._tCfgs[B]){delete G._tCfgs[B];}G.addAttr(B,F,E);}}},_protectAttrs:function(C){if(C){C=c.merge(C);for(var B in C){if(C.hasOwnProperty(B)){C[B]=c.merge(C[B]);}}}return C;},_normAttrVals:function(B){return(B)?c.merge(B):null;},_getAttrInitVal:function(B,C,E){var F,D;if(!C[o]&&E&&E.hasOwnProperty(B)){F=E[B];}else{F=C[h];D=C[p];if(D){if(!D.call){D=this[D];}if(D){F=D.call(this);}}}return F;},_getAttrCfg:function(B){var D,C=this._state.data;if(C){D={};c.each(C,function(E,F){if(B){if(B in E){D[F]=E[B];}}else{c.each(E,function(H,G){D[G]=D[G]||{};D[G][F]=H;});}});}return D;},_initAttrs:function(C,B,E){C=C||this.constructor.ATTRS;var D=c.Base;if(C&&!(D&&c.instanceOf(this,D))){this.addAttrs(this._protectAttrs(C),B,E);}}};c.mix(d,l,false,null,1);c.Attribute=d;
},"3.4.0",{requires:["event-custom"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("attribute-complex",function(b){var a=b.Object,c=".";b.Attribute.Complex=function(){};b.Attribute.Complex.prototype={_normAttrVals:function(g){var i={},h={},j,d,f,e;if(g){for(e in g){if(g.hasOwnProperty(e)){if(e.indexOf(c)!==-1){j=e.split(c);d=j.shift();f=h[d]=h[d]||[];f[f.length]={path:j,value:g[e]};}else{i[e]=g[e];}}}return{simple:i,complex:h};}else{return null;}},_getAttrInitVal:function(m,j,p){var e=j.value,o=j.valueFn,d,f,h,g,q,n,k;if(o){if(!o.call){o=this[o];}if(o){e=o.call(this);}}if(!j.readOnly&&p){d=p.simple;if(d&&d.hasOwnProperty(m)){e=d[m];}f=p.complex;if(f&&f.hasOwnProperty(m)){k=f[m];for(h=0,g=k.length;h<g;++h){q=k[h].path;n=k[h].value;a.setValue(e,q,n);}}}return e;}};b.mix(b.Attribute,b.Attribute.Complex,true,null,1);},"3.4.0",{requires:["attribute-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("base-base",function(d){var g=d.Object,h=d.Lang,o=".",q="destroy",b="init",r="initialized",m="destroyed",n="initializer",j="bubbleTargets",e="_bubbleTargets",a=Object.prototype.constructor,c="deep",p="shallow",k="destructor",f=d.Attribute,l=function(v,u,t){var w;for(w in u){if(t[w]){v[w]=u[w];}}return v;};function i(){d.stamp(this);f.call(this);var s=d.Plugin&&d.Plugin.Host;if(this._initPlugins&&s){s.call(this);}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true;}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments);}i._ATTR_CFG=f._ATTR_CFG.concat("cloneDefaultValue");i._ATTR_CFG_HASH=d.Array.hash(i._ATTR_CFG);i.NAME="base";i.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};i.prototype={init:function(s){this._yuievt.config.prefix=this._eventPrefix;this.publish(b,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(s);this.fire(b,{cfg:s});return this;},_preInitEventCfg:function(t){if(t){if(t.on){this.on(t.on);}if(t.after){this.after(t.after);}}var u,s,w,v=(t&&j in t);if(v||e in this){w=v?(t&&t.bubbleTargets):this._bubbleTargets;if(h.isArray(w)){for(u=0,s=w.length;u<s;u++){this.addTarget(w[u]);}}else{if(w){this.addTarget(w);}}}},destroy:function(){this.publish(q,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(q);this.detachAll();return this;},_defInitFn:function(s){this._initHierarchy(s.cfg);if(this._initPlugins){this._initPlugins(s.cfg);}this._set(r,true);},_defDestroyFn:function(s){if(this._destroyPlugins){this._destroyPlugins();}this._destroyHierarchy();this._set(m,true);},_getClasses:function(){if(!this._classes){this._initHierarchyData();}return this._classes;},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData();}return this._attrs;},_filterAttrCfgs:function(w,t){var u=null,s,v=w.ATTRS;if(v){for(s in v){if(t[s]){u=u||{};u[s]=t[s];t[s]=null;}}}return u;},_initHierarchyData:function(){var u=this.constructor,t=[],s=[];while(u){t[t.length]=u;if(u.ATTRS){s[s.length]=u.ATTRS;}u=u.superclass?u.superclass.constructor:null;}this._classes=t;this._attrs=this._aggregateAttrs(s);},_aggregateAttrs:function(z){var v,A,u,s,B,t,y,x=i._ATTR_CFG_HASH,w={};if(z){for(t=z.length-1;t>=0;--t){A=z[t];for(v in A){if(A.hasOwnProperty(v)){u=l({},A[v],x);s=u.value;y=u.cloneDefaultValue;if(s){if((y===undefined&&(a===s.constructor||h.isArray(s)))||y===c||y===true){u.value=d.clone(s);}else{if(y===p){u.value=d.merge(s);}}}B=null;if(v.indexOf(o)!==-1){B=v.split(o);v=B.shift();}if(B&&w[v]&&w[v].value){g.setValue(w[v].value,B,s);}else{if(!B){if(!w[v]){w[v]=u;}else{l(w[v],u,x);}}}}}}}return w;},_initHierarchy:function(y){var u=this._lazyAddAttrs,z,A,C,w,t,B,x,v=this._getClasses(),s=this._getAttrCfgs();for(C=v.length-1;C>=0;C--){z=v[C];A=z.prototype;x=z._yuibuild&&z._yuibuild.exts;if(x){for(w=0,t=x.length;w<t;w++){x[w].apply(this,arguments);}}this.addAttrs(this._filterAttrCfgs(z,s),y,u);if(A.hasOwnProperty(n)){A.initializer.apply(this,arguments);}if(x){for(w=0;w<t;w++){B=x[w].prototype;if(B.hasOwnProperty(n)){B.initializer.apply(this,arguments);}}}}},_destroyHierarchy:function(){var w,x,A,y,u,s,v,z,t=this._getClasses();for(A=0,y=t.length;A<y;A++){w=t[A];x=w.prototype;v=w._yuibuild&&w._yuibuild.exts;if(v){for(u=0,s=v.length;u<s;u++){z=v[u].prototype;if(z.hasOwnProperty(k)){z.destructor.apply(this,arguments);}}}if(x.hasOwnProperty(k)){x.destructor.apply(this,arguments);}}},toString:function(){return this.name+"["+d.stamp(this,true)+"]";}};d.mix(i,f,false,null,1);i.prototype.constructor=i;d.Base=i;},"3.4.0",{requires:["attribute-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-base",function(b){var c="running",n="startTime",l="elapsedTime",j="start",i="tween",m="end",d="node",k="paused",o="reverse",h="iterationCount",a=Number;var f={},e;b.Anim=function(){b.Anim.superclass.constructor.apply(this,arguments);b.Anim._instances[b.stamp(this)]=this;};b.Anim.NAME="anim";b.Anim._instances={};b.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;b.Anim.DEFAULT_UNIT="px";b.Anim.DEFAULT_EASING=function(q,p,s,r){return s*q/r+p;};b.Anim._intervalTime=20;b.Anim.behaviors={left:{get:function(q,p){return q._getOffset(p);}}};b.Anim.behaviors.top=b.Anim.behaviors.left;b.Anim.DEFAULT_SETTER=function(s,t,v,w,y,r,u,x){var q=s._node,p=u(y,a(v),a(w)-a(v),r);if(t in q._node.style||t in b.DOM.CUSTOM_STYLES){x=x||"";q.setStyle(t,p+x);}else{if(q._node.attributes[t]){q.setAttribute(t,p);}else{q.set(t,p);}}};b.Anim.DEFAULT_GETTER=function(r,p){var q=r._node,s="";if(p in q._node.style||p in b.DOM.CUSTOM_STYLES){s=q.getComputedStyle(p);}else{if(q._node.attributes[p]){s=q.getAttribute(p);}else{s=q.get(p);}}return s;};b.Anim.ATTRS={node:{setter:function(p){if(p){if(typeof p=="string"||p.nodeType){p=b.one(p);}}this._node=p;if(!p){}return p;}},duration:{value:1},easing:{value:b.Anim.DEFAULT_EASING,setter:function(p){if(typeof p==="string"&&b.Easing){return b.Easing[p];}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!f[b.stamp(this)];},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};b.Anim.run=function(){var q=b.Anim._instances;for(var p in q){if(q[p].run){q[p].run();}}};b.Anim.pause=function(){for(var p in f){if(f[p].pause){f[p].pause();}}b.Anim._stopTimer();};b.Anim.stop=function(){for(var p in f){if(f[p].stop){f[p].stop();}}b.Anim._stopTimer();};b.Anim._startTimer=function(){if(!e){e=setInterval(b.Anim._runFrame,b.Anim._intervalTime);}};b.Anim._stopTimer=function(){clearInterval(e);e=0;};b.Anim._runFrame=function(){var p=true;for(var q in f){if(f[q]._runFrame){p=false;f[q]._runFrame();}}if(p){b.Anim._stopTimer();}};b.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var g={run:function(){if(this.get(k)){this._resume();}else{if(!this.get(c)){this._start();}}return this;},pause:function(){if(this.get(c)){this._pause();}return this;},stop:function(p){if(this.get(c)||this.get(k)){this._end(p);}return this;},_added:false,_start:function(){this._set(n,new Date()-this.get(l));this._actualFrames=0;if(!this.get(k)){this._initAnimAttr();}f[b.stamp(this)]=this;b.Anim._startTimer();this.fire(j);},_pause:function(){this._set(n,null);this._set(k,true);delete f[b.stamp(this)];this.fire("pause");},_resume:function(){this._set(k,false);f[b.stamp(this)]=this;this._set(n,new Date()-this.get(l));b.Anim._startTimer();this.fire("resume");},_end:function(p){var q=this.get("duration")*1000;if(p){this._runAttrs(q,q,this.get(o));}this._set(n,null);this._set(l,0);this._set(k,false);delete f[b.stamp(this)];this.fire(m,{elapsed:this.get(l)});},_runFrame:function(){var u=this._runtimeAttr.duration,r=new Date()-this.get(n),q=this.get(o),p=(r>=u),s,v;this._runAttrs(r,u,q);this._actualFrames+=1;this._set(l,r);this.fire(i);if(p){this._lastFrame();}},_runAttrs:function(A,z,w){var x=this._runtimeAttr,r=b.Anim.behaviors,y=x.easing,p=z,u=false,q,s,v;if(A>=z){u=true;}if(w){A=z-A;p=0;}for(v in x){if(x[v].to){q=x[v];s=(v in r&&"set" in r[v])?r[v].set:b.Anim.DEFAULT_SETTER;if(!u){s(this,v,q.from,q.to,A,z,y,q.unit);}else{s(this,v,q.from,q.to,p,z,y,q.unit);}}}},_lastFrame:function(){var p=this.get("iterations"),q=this.get(h);q+=1;if(p==="infinite"||q<p){if(this.get("direction")==="alternate"){this.set(o,!this.get(o));}this.fire("iteration");}else{q=0;this._end();}this._set(n,new Date());this._set(h,q);},_initAnimAttr:function(){var w=this.get("from")||{},v=this.get("to")||{},p={duration:this.get("duration")*1000,easing:this.get("easing")},r=b.Anim.behaviors,u=this.get(d),t,s,q;b.each(v,function(A,y){if(typeof A==="function"){A=A.call(this,u);}s=w[y];if(s===undefined){s=(y in r&&"get" in r[y])?r[y].get(this,y):b.Anim.DEFAULT_GETTER(this,y);}else{if(typeof s==="function"){s=s.call(this,u);}}var x=b.Anim.RE_UNITS.exec(s);var z=b.Anim.RE_UNITS.exec(A);s=x?x[1]:s;q=z?z[1]:A;t=z?z[2]:x?x[2]:"";if(!t&&b.Anim.RE_DEFAULT_UNIT.test(y)){t=b.Anim.DEFAULT_UNIT;}if(!s||!q){b.error('invalid "from" or "to" for "'+y+'"',"Anim");return;}p[y]={from:s,to:q,unit:t};},this);this._runtimeAttr=p;},_getOffset:function(q){var s=this._node,t=s.getComputedStyle(q),r=(q==="left")?"getX":"getY",u=(q==="left")?"setX":"setY";if(t==="auto"){var p=s.getStyle("position");if(p==="absolute"||p==="fixed"){t=s[r]();s[u](t);}else{t=0;}}return t;},destructor:function(){delete b.Anim._instances[b.stamp(this)];}};b.extend(b.Anim,b.Base,g);},"3.4.0",{requires:["base-base","node-style"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-color",function(b){var a=Number;b.Anim.behaviors.color={set:function(f,d,i,h,c,g,e){i=b.Color.re_RGB.exec(b.Color.toRGB(i));h=b.Color.re_RGB.exec(b.Color.toRGB(h));if(!i||i.length<3||!h||h.length<3){b.error("invalid from or to passed to color behavior");}f._node.setStyle(d,"rgb("+[Math.floor(e(c,a(i[1]),a(h[1])-a(i[1]),g)),Math.floor(e(c,a(i[2]),a(h[2])-a(i[2]),g)),Math.floor(e(c,a(i[3]),a(h[3])-a(i[3]),g))].join(", ")+")");},get:function(d,c){var e=d._node.getComputedStyle(c);e=(e==="transparent")?"rgb(255, 255, 255)":e;return e;}};b.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(c,d){b.Anim.behaviors[c]=b.Anim.behaviors.color;});},"3.4.0",{requires:["anim-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-xy",function(b){var a=Number;b.Anim.behaviors.xy={set:function(f,d,i,h,c,g,e){f._node.setXY([e(c,a(i[0]),a(h[0])-a(i[0]),g),e(c,a(i[1]),a(h[1])-a(i[1]),g)]);},get:function(c){return c._node.getXY();}};},"3.4.0",{requires:["anim-base","node-screen"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-curve",function(a){a.Anim.behaviors.curve={set:function(f,c,i,h,b,g,e){i=i.slice.call(i);h=h.slice.call(h);var d=e(b,0,100,g)/100;h.unshift(i);f._node.setXY(a.Anim.getBezier(h,d));},get:function(c,b){return c._node.getXY();}};a.Anim.getBezier=function(f,e){var g=f.length;var d=[];for(var c=0;c<g;++c){d[c]=[f[c][0],f[c][1]];}for(var b=1;b<g;++b){for(c=0;c<g-b;++c){d[c][0]=(1-e)*d[c][0]+e*d[parseInt(c+1,10)][0];d[c][1]=(1-e)*d[c][1]+e*d[parseInt(c+1,10)][1];}}return[d[0][0],d[0][1]];};},"3.4.0",{requires:["anim-xy"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-easing",function(b){var a={easeNone:function(f,e,h,g){return h*f/g+e;},easeIn:function(f,e,h,g){return h*(f/=g)*f+e;},easeOut:function(f,e,h,g){return -h*(f/=g)*(f-2)+e;},easeBoth:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f+e;}return -h/2*((--f)*(f-2)-1)+e;},easeInStrong:function(f,e,h,g){return h*(f/=g)*f*f*f+e;},easeOutStrong:function(f,e,h,g){return -h*((f=f/g-1)*f*f*f-1)+e;},easeBothStrong:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+e;}return -h/2*((f-=2)*f*f*f-2)+e;},elasticIn:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return -(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;},elasticOut:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return f*Math.pow(2,-10*g)*Math.sin((g*j-h)*(2*Math.PI)/i)+k+e;},elasticBoth:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j/2)===2){return e+k;}if(!i){i=j*(0.3*1.5);}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}if(g<1){return -0.5*(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;}return f*Math.pow(2,-10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i)*0.5+k+e;},backIn:function(f,e,i,h,g){if(g===undefined){g=1.70158;}if(f===h){f-=0.001;}return i*(f/=h)*f*((g+1)*f-g)+e;},backOut:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+e;},backBoth:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+e;}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+e;},bounceIn:function(f,e,h,g){return h-b.Easing.bounceOut(g-f,0,h,g)+e;},bounceOut:function(f,e,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+e;}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+e;}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+e;}}}return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+e;},bounceBoth:function(f,e,h,g){if(f<g/2){return b.Easing.bounceIn(f*2,0,h,g)*0.5+e;}return b.Easing.bounceOut(f*2-g,0,h,g)*0.5+h*0.5+e;}};b.Easing=a;},"3.4.0",{requires:["anim-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-node-plugin",function(b){var a=function(c){c=(c)?b.merge(c):{};c.node=c.host;a.superclass.constructor.apply(this,arguments);};a.NAME="nodefx";a.NS="fx";b.extend(a,b.Anim);b.namespace("Plugin");b.Plugin.NodeFX=a;},"3.4.0",{requires:["node-pluginhost","anim-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-scroll",function(b){var a=Number;b.Anim.behaviors.scroll={set:function(f,g,i,j,k,e,h){var d=f._node,c=([h(k,a(i[0]),a(j[0])-a(i[0]),e),h(k,a(i[1]),a(j[1])-a(i[1]),e)]);if(c[0]){d.set("scrollLeft",c[0]);}if(c[1]){d.set("scrollTop",c[1]);}},get:function(d){var c=d._node;return[c.get("scrollLeft"),c.get("scrollTop")];}};},"3.4.0",{requires:["anim-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("array-extras",function(d){var b=d.Lang,c=Array.prototype,a=d.Array;a.lastIndexOf=c.lastIndexOf?function(e,g,f){return f||f===0?e.lastIndexOf(g,f):e.lastIndexOf(g);}:function(f,j,h){var e=f.length,g=e-1;if(h||h===0){g=Math.min(h<0?e+h:h,e);}if(g>-1&&e>0){for(;g>-1;--g){if(f[g]===j){return g;}}}return -1;};a.unique=function(f,l){var k=0,e=f.length,h=[],m,g;for(;k<e;++k){m=f[k];for(g=h.length;g>-1;--g){if(m===h[g]){break;}}if(g===-1){h.push(m);}}if(l){if(b.isNumber(h[0])){h.sort(a.numericSort);}else{h.sort();}}return h;};a.filter=c.filter?function(e,g,h){return e.filter(g,h);}:function(g,l,m){var j=0,e=g.length,h=[],k;for(;j<e;++j){if(j in g){k=g[j];if(l.call(m,k,j,g)){h.push(k);}}}return h;};a.reject=function(e,g,h){return a.filter(e,function(k,j,f){return !g.call(h,k,j,f);});};a.every=c.every?function(e,g,h){return e.every(g,h);}:function(g,j,k){for(var h=0,e=g.length;h<e;++h){if(h in g&&!j.call(k,g[h],h,g)){return false;}}return true;};a.map=c.map?function(e,g,h){return e.map(g,h);}:function(g,k,l){var j=0,e=g.length,h=g.concat();for(;j<e;++j){if(j in g){h[j]=k.call(l,g[j],j,g);}}return h;};a.reduce=c.reduce?function(e,i,g,h){return e.reduce(function(l,k,j,f){return g.call(h,l,k,j,f);},i);}:function(h,m,k,l){var j=0,g=h.length,e=m;for(;j<g;++j){if(j in h){e=k.call(l,e,h[j],j,h);}}return e;};a.find=function(g,j,k){for(var h=0,e=g.length;h<e;h++){if(h in g&&j.call(k,g[h],h,g)){return g[h];}}return null;};a.grep=function(e,f){return a.filter(e,function(h,g){return f.test(h);});};a.partition=function(e,h,i){var g={matches:[],rejects:[]};a.each(e,function(j,f){var k=h.call(i,j,f,e)?g.matches:g.rejects;k.push(j);});return g;};a.zip=function(f,e){var g=[];a.each(f,function(i,h){g.push([i,e[h]]);});return g;};},"3.4.0");/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("base-build",function(f){var c=f.Base,a=f.Lang,b="initializer",d="destructor",e;c._build=function(B,p,z,s,t,o){var u=c._build,x=u._ctor(p,o),q=u._cfg(p,o),h=u._mixCust,m=q.aggregates,g=q.custom,k=x._yuibuild.dynamic,w,v,A,j,n,y,r;if(k&&m){for(w=0,v=m.length;w<v;++w){A=m[w];if(p.hasOwnProperty(A)){x[A]=a.isArray(p[A])?[]:{};}}}for(w=0,v=z.length;w<v;w++){j=z[w];n=j.prototype;y=n[b];r=n[d];delete n[b];delete n[d];f.mix(x,j,true,null,1);h(x,j,m,g);if(y){n[b]=y;}if(r){n[d]=r;}x._yuibuild.exts.push(j);}if(s){f.mix(x.prototype,s,true);}if(t){f.mix(x,u._clean(t,m,g),true);h(x,t,m,g);}x.prototype.hasImpl=u._impl;if(k){x.NAME=B;x.prototype.constructor=x;}return x;};e=c._build;f.mix(e,{_mixCust:function(i,h,l,k){if(l){f.aggregate(i,h,true,l);}if(k){for(var g in k){if(k.hasOwnProperty(g)){k[g](g,i,h);}}}},_tmpl:function(g){function h(){h.superclass.constructor.apply(this,arguments);}f.extend(h,g);return h;},_impl:function(m){var p=this._getClasses(),o,h,g,n,q,k;for(o=0,h=p.length;o<h;o++){g=p[o];if(g._yuibuild){n=g._yuibuild.exts;q=n.length;for(k=0;k<q;k++){if(n[k]===m){return true;}}}}return false;},_ctor:function(g,h){var j=(h&&false===h.dynamic)?false:true,k=(j)?e._tmpl(g):g,i=k._yuibuild;if(!i){i=k._yuibuild={};}i.id=i.id||null;i.exts=i.exts||[];i.dynamic=j;return k;},_cfg:function(g,h){var i=[],l={},k,j=(h&&h.aggregates),n=(h&&h.custom),m=g;while(m&&m.prototype){k=m._buildCfg;if(k){if(k.aggregates){i=i.concat(k.aggregates);}if(k.custom){f.mix(l,k.custom,true);}}m=m.superclass?m.superclass.constructor:null;}if(j){i=i.concat(j);}if(n){f.mix(l,h.cfgBuild,true);}return{aggregates:i,custom:l};},_clean:function(o,n,j){var m,h,g,k=f.merge(o);for(m in j){if(k.hasOwnProperty(m)){delete k[m];}}for(h=0,g=n.length;h<g;h++){m=n[h];if(k.hasOwnProperty(m)){delete k[m];}}return k;}});c.build=function(i,g,j,h){return e(i,g,j,null,null,h);};c.create=function(g,j,i,h,k){return e(g,j,i,h,k);};c.mix=function(g,h){return e(null,g,h,null,null,{dynamic:false});};c._buildCfg={custom:{ATTRS:function(l,j,h){j.ATTRS=j.ATTRS||{};if(h.ATTRS){var i=h.ATTRS,k=j.ATTRS,g;for(g in i){if(i.hasOwnProperty(g)){k[g]=k[g]||{};f.mix(k[g],i[g],true);}}}}},aggregates:["_PLUG","_UNPLUG"]};},"3.4.0",{requires:["base-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("escape",function(c){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},b={html:function(d){return(d+"").replace(/[&<>"'\/`]/g,b._htmlReplacer);},regex:function(d){return(d+"").replace(/[\-#$\^*()+\[\]{}|\\,.?\s]/g,"\\$&");},_htmlReplacer:function(d){return a[d];}};b.regexp=b.regex;c.Escape=b;},"3.4.0");/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-valuechange",function(d){var b=d.Array,c="value",a={POLL_INTERVAL:50,TIMEOUT:10000,_history:{},_intervals:{},_notifiers:{},_timeouts:{},_poll:function(j,g,k){var i=j._node,f=i&&i.value,l=a._history[g],h;if(!i){a._stopPolling(j,g);return;}if(f!==l){a._history[g]=f;h={_event:k,newVal:f,prevVal:l};b.each(a._notifiers[g],function(e){e.fire(h);});a._refreshTimeout(j,g);}},_refreshTimeout:function(f,e){a._stopTimeout(f,e);a._timeouts[e]=setTimeout(function(){a._stopPolling(f,e);},a.TIMEOUT);},_startPolling:function(g,f,i,h){if(!f){f=d.stamp(g);}if(!h&&a._intervals[f]){return;}a._stopPolling(g,f);a._intervals[f]=setInterval(function(){a._poll(g,f,i);},a.POLL_INTERVAL);a._refreshTimeout(g,f,i);},_stopPolling:function(f,e){if(!e){e=d.stamp(f);}a._intervals[e]=clearInterval(a._intervals[e]);a._stopTimeout(f,e);},_stopTimeout:function(f,e){if(!e){e=d.stamp(f);}a._timeouts[e]=clearTimeout(a._timeouts[e]);},_onBlur:function(f){a._stopPolling(f.currentTarget);},_onFocus:function(g){var f=g.currentTarget;a._history[d.stamp(f)]=f.get(c);a._startPolling(f,null,g);},_onKeyDown:function(f){a._startPolling(f.currentTarget,null,f);},_onKeyUp:function(f){if(f.charCode===229||f.charCode===197){a._startPolling(f.currentTarget,null,f,true);}},_onMouseDown:function(f){a._startPolling(f.currentTarget,null,f);},_onSubscribe:function(i,h,g){var f=d.stamp(i),e=a._notifiers[f];a._history[f]=i.get(c);g._handles=i.on({blur:a._onBlur,focus:a._onFocus,keydown:a._onKeyDown,keyup:a._onKeyUp,mousedown:a._onMouseDown});if(!e){e=a._notifiers[f]=[];}e.push(g);},_onUnsubscribe:function(j,i,h){var g=d.stamp(j),e=a._notifiers[g],f=b.indexOf(e,h);h._handles.detach();if(f!==-1){e.splice(f,1);if(!e.length){a._stopPolling(j,g);delete a._notifiers[g];delete a._history[g];}}}};d.Event.define("valueChange",{detach:a._onUnsubscribe,on:a._onSubscribe,publishConfig:{emitFacade:true}});d.ValueChange=a;},"3.4.0",{requires:["event-focus","event-synthetic"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("autocomplete-base",function(f){var g=f.Escape,j=f.Lang,q=f.Array,i=f.Object,d=j.isFunction,r=j.isString,u=j.trim,l=f.Attribute.INVALID_VALUE,o="_functionValidator",x="_sourceSuccess",c="allowBrowserAutocomplete",h="inputNode",w="query",e="queryDelimiter",b="requestTemplate",m="results",n="resultListLocator",k="value",s="valueChange",a="clear",t=w,p=m;function v(){f.before(this._bindUIACBase,this,"bindUI");f.before(this._destructorACBase,this,"destructor");f.before(this._syncUIACBase,this,"syncUI");this.publish(a,{defaultFn:this._defClearFn});this.publish(t,{defaultFn:this._defQueryFn});this.publish(p,{defaultFn:this._defResultsFn});}v.ATTRS={allowBrowserAutocomplete:{value:false},allowTrailingDelimiter:{value:false},inputNode:{setter:f.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:true,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter:{validator:o},resultHighlighter:{setter:"_setResultHighlighter"},resultListLocator:{setter:"_setLocator"},results:{readOnly:true,value:[]},resultTextLocator:{setter:"_setLocator"},source:{setter:"_setSource"},sourceType:{value:null},tokenInput:{readOnly:true},value:{value:""}};v.CSS_PREFIX="ac";v.UI_SRC=(f.Widget&&f.Widget.UI_SRC)||"ui";v.SOURCE_TYPES={array:"_createArraySource","function":"_createFunctionSource",object:"_createObjectSource"};v.prototype={sendRequest:function(A,B){var y,z=this.get("source");if(A||A===""){this._set(w,A);}else{A=this.get(w)||"";}if(z){if(!B){B=this.get(b);}y=B?B.call(this,A):A;z.sendRequest({query:A,request:y,callback:{success:f.bind(this._onResponse,this,A)}});}return this;},_bindUIACBase:function(){var z=this.get(h),y=z&&z.tokenInput;if(y){z=y.get(h);this._set("tokenInput",y);}if(!z){f.error("No inputNode specified.");return;}this._inputNode=z;this._acBaseEvents=new f.EventHandle([z.on(s,this._onInputValueChange,this),z.on("blur",this._onInputBlur,this),this.after(c+"Change",this._syncBrowserAutocomplete),this.after("sourceTypeChange",this._afterSourceTypeChange),this.after(s,this._afterValueChange)]);},_destructorACBase:function(){this._acBaseEvents.detach();},_syncUIACBase:function(){this._syncBrowserAutocomplete();this.set(k,this.get(h).get(k));},_createArraySource:function(z){var y=this;return{type:"array",sendRequest:function(A){y[x](z.concat(),A);}};},_createFunctionSource:function(z){var y=this;return{type:"function",sendRequest:function(A){var B;function C(D){y[x](D||[],A);}if((B=z(A.query,C))){C(B);}}};},_createObjectSource:function(z){var y=this;return{type:"object",sendRequest:function(A){var B=A.query;y[x](i.owns(z,B)?z[B]:[],A);}};},_functionValidator:function(y){return y===null||d(y);},_getObjectValue:function(B,A){if(!B){return;}for(var z=0,y=A.length;B&&z<y;z++){B=B[A[z]];}return B;},_parseResponse:function(A,y,P){var G={data:P,query:A,results:[]},I=this.get(n),H=[],F=y&&y.results,C,z,J,B,O,K,L,M,D,E,N;if(F&&I){F=I.call(this,F);}if(F&&F.length){C=this.get("resultFilters");N=this.get("resultTextLocator");for(K=0,L=F.length;K<L;++K){D=F[K];E=N?N.call(this,D):D.toString();H.push({display:g.html(E),raw:D,text:E});}for(K=0,L=C.length;K<L;++K){H=C[K].call(this,A,H.concat());if(!H){return;}if(!H.length){break;}}if(H.length){J=this.get("resultFormatter");O=this.get("resultHighlighter");M=this.get("maxResults");if(M&&M>0&&H.length>M){H.length=M;}if(O){B=O.call(this,A,H.concat());if(!B){return;}for(K=0,L=B.length;K<L;++K){D=H[K];D.highlighted=B[K];D.display=D.highlighted;}}if(J){z=J.call(this,A,H.concat());if(!z){return;}for(K=0,L=z.length;K<L;++K){H[K].display=z[K];}}}}G.results=H;this.fire(p,G);},_parseValue:function(y){var z=this.get(e);if(z){y=y.split(z);y=y[y.length-1];}return j.trimLeft(y);},_setLocator:function(y){if(this[o](y)){return y;}var z=this;y=y.toString().split(".");return function(A){return A&&z._getObjectValue(A,y);};},_setRequestTemplate:function(y){if(this[o](y)){return y;}y=y.toString();return function(z){return j.sub(y,{query:encodeURIComponent(z)});};},_setResultFilters:function(A){var y,z;if(A===null){return[];}y=f.AutoCompleteFilters;z=function(B){if(d(B)){return B;}if(r(B)&&y&&d(y[B])){return y[B];}return false;};if(j.isArray(A)){A=q.map(A,z);return q.every(A,function(B){return !!B;})?A:l;}else{A=z(A);return A?[A]:l;}},_setResultHighlighter:function(y){var z;if(this._functionValidator(y)){return y;}z=f.AutoCompleteHighlighters;if(r(y)&&z&&d(z[y])){return z[y];}return l;},_setSource:function(A){var y=this.get("sourceType")||j.type(A),z;if((A&&d(A.sendRequest))||A===null||y==="datasource"){this._rawSource=A;return A;}if((z=v.SOURCE_TYPES[y])){this._rawSource=A;return j.isString(z)?this[z](A):z(A);}f.error("Unsupported source type '"+y+"'. Maybe autocomplete-sources isn't loaded?");return l;},_sourceSuccess:function(z,y){y.callback.success({data:z,response:{results:z}});},_syncBrowserAutocomplete:function(){var y=this.get(h);if(y.get("nodeName").toLowerCase()==="input"){y.setAttribute("autocomplete",this.get(c)?"on":"off");}},_updateValue:function(z){var B=this.get(e),A,y,C;z=j.trimLeft(z);if(B){A=u(B);C=q.map(u(this.get(k)).split(B),u);y=C.length;if(y>1){C[y-1]=z;z=C.join(A+" ");}z=z+A+" ";}this.set(k,z);},_afterSourceTypeChange:function(y){if(this._rawSource){this.set("source",this._rawSource);}},_afterValueChange:function(E){var A,B,y,z=E.newVal,D,C;if(E.src!==v.UI_SRC){this._inputNode.set(k,z);return;}y=this.get("minQueryLength");D=this._parseValue(z)||"";if(y>=0&&D.length>=y){A=this.get("queryDelay");C=this;B=function(){C.fire(t,{inputValue:z,query:D});};if(A){clearTimeout(this._delay);this._delay=setTimeout(B,A);}else{B();}}else{clearTimeout(this._delay);this.fire(a,{prevVal:E.prevVal?this._parseValue(E.prevVal):null});}},_onInputBlur:function(B){var C=this.get(e),y,z,A;if(C&&!this.get("allowTrailingDelimiter")){C=j.trimRight(C);A=z=this._inputNode.get(k);if(C){while((z=j.trimRight(z))&&(y=z.length-C.length)&&z.lastIndexOf(C)===y){z=z.substring(0,y);
}}else{z=j.trimRight(z);}if(z!==A){this.set(k,z);}}},_onInputValueChange:function(z){var y=z.newVal;if(y===this.get(k)){return;}this.set(k,y,{src:v.UI_SRC});},_onResponse:function(y,z){if(y===(this.get(w)||"")){this._parseResponse(y||"",z.response,z.data);}},_defClearFn:function(){this._set(w,null);this._set(m,[]);},_defQueryFn:function(z){var y=z.query;this.sendRequest(y);},_defResultsFn:function(y){this._set(m,y[m]);}};f.AutoCompleteBase=v;},"3.4.0",{requires:["array-extras","base-build","escape","event-valuechange","node-base"],optional:["autocomplete-sources"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("autocomplete-sources",function(g){var a=g.AutoCompleteBase,f=g.Lang,b="_sourceSuccess",d="maxResults",e="requestTemplate",c="resultListLocator";g.mix(a.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(h){if(h instanceof g.Node&&h.get("nodeName").toLowerCase()==="select"){return this._createSelectSource(h);}if(g.JSONPRequest&&h instanceof g.JSONPRequest){return this._createJSONPSource(h);}return this._createObjectSource(h);},_createIOSource:function(m){var j={},k={type:"io"},l=this,o,i,n;function h(p){var r=p.request,q=p.query;if(j[r]){l[b](j[r],p);return;}if(o&&o.isInProgress()){o.abort();}o=g.io(l._getXHRUrl(m,p),{on:{success:function(v,s){var u;try{u=g.JSON.parse(s.responseText);}catch(t){g.error("JSON parse error",t);}if(u){j[r]=u;l[b](u,p);}}}});}k.sendRequest=function(p){i=p;if(n){return;}n=true;g.use("io-base","json-parse",function(){k.sendRequest=h;h(i);});};return k;},_createJSONPSource:function(m){var j={},k={type:"jsonp"},l=this,i,n;function h(o){var q=o.request,p=o.query;if(j[q]){l[b](j[q],o);return;}m._config.on.success=function(r){j[q]=r;l[b](r,o);};m.send(p);}k.sendRequest=function(o){i=o;if(n){return;}n=true;g.use("jsonp",function(){if(!(m instanceof g.JSONPRequest)){m=new g.JSONPRequest(m,{format:g.bind(l._jsonpFormatter,l)});}k.sendRequest=h;h(i);});};return k;},_createSelectSource:function(i){var h=this;return{type:"select",sendRequest:function(k){var j=[];i.get("options").each(function(l){j.push({html:l.get("innerHTML"),index:l.get("index"),node:l,selected:l.get("selected"),text:l.get("text"),value:l.get("value")});});h[b](j,k);}};},_createStringSource:function(h){if(this._YQL_SOURCE_REGEX.test(h)){return this._createYQLSource(h);}else{if(h.indexOf("{callback}")!==-1){return this._createJSONPSource(h);}else{return this._createIOSource(h);}}},_createYQLSource:function(m){var j={},n={type:"yql"},l=this,i,o,k;if(!this.get(c)){this.set(c,this._defaultYQLLocator);}function h(t){var v=t.request,u=t.query,w,r,p,s,q;if(j[v]){l[b](j[v],t);return;}w=function(x){j[v]=x;l[b](x,t);};r=l.get("yqlEnv");p=l.get(d);s={proto:l.get("yqlProtocol")};q=f.sub(m,{maxResults:p>0?p:1000,query:u});if(k){k._callback=w;k._opts=s;k._params.q=q;if(r){k._params.env=r;}}else{k=new g.YQLRequest(q,{on:{success:w},allowCache:false},r?{env:r}:null,s);}k.send();}n.sendRequest=function(p){i=p;if(!o){o=true;g.use("yql",function(){n.sendRequest=h;h(i);});}};return n;},_defaultYQLLocator:function(i){var j=i&&i.query&&i.query.results,h;if(j&&f.isObject(j)){h=g.Object.values(j)||[];j=h.length===1?h[0]:h;if(!f.isArray(j)){j=[j];}}else{j=[];}return j;},_getXHRUrl:function(i,j){var h=this.get(d);if(j.query!==j.request){i+=j.request;}return f.sub(i,{maxResults:h>0?h:1000,query:encodeURIComponent(j.query)});},_jsonpFormatter:function(i,j,k){var h=this.get(d),l=this.get(e);if(l){i+=l(k);}return f.sub(i,{callback:j,maxResults:h>0?h:1000,query:encodeURIComponent(k)});}});g.mix(a.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}});g.mix(a.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",string:"_createStringSource",yql:"_createYQLSource"},true);},"3.4.0",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("lang/autocomplete-list_en",function(a){a.Intl.add("autocomplete-list","en",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use the up and down arrow keys to select suggestions."});},"3.4.0");/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("selector-css2",function(g){var h="parentNode",d="tagName",e="attributes",a="combinator",f="pseudos",c=g.Selector,b={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:true,_children:function(n,j){var k=n.children,m,l=[],o,p;if(n.children&&j&&n.children.tags){l=n.children.tags(j);}else{if((!k&&n[d])||(k&&j)){o=k||n.childNodes;k=[];for(m=0;(p=o[m++]);){if(p.tagName){if(!j||j===p.tagName){k.push(p);}}}}}return k||[];},_re:{attr:/(\[[^\]]*\])/g,esc:/\\[:\[\]\(\)#\.\'\>+~"]/gi,pseudos:/(\([^\)]*\))/g},shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(j,i){return g.DOM.getAttribute(j,i)!=="";},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(i){return g.Selector._children(i[h])[0]===i;}},_bruteQuery:function(n,r,t){var o=[],i=[],q=c._tokenize(n),m=q[q.length-1],s=g.DOM._getDoc(r),k,j,p,l;if(m){j=m.id;p=m.className;l=m.tagName||"*";if(r.getElementsByTagName){if(j&&(r.all||(r.nodeType===9||g.DOM.inDoc(r)))){i=g.DOM.allById(j,r);}else{if(p){i=r.getElementsByClassName(p);}else{i=r.getElementsByTagName(l);}}}else{k=r.firstChild;while(k){if(k.tagName){i.push(k);}k=k.nextSilbing||k.firstChild;}}if(i.length){o=c._filterNodes(i,q,t);}}return o;},_filterNodes:function(u,q,s){var z=0,y,A=q.length,t=A-1,p=[],w=u[0],D=w,B=g.Selector.getters,o,x,m,r,k,v,l,C;for(z=0;(D=w=u[z++]);){t=A-1;r=null;testLoop:while(D&&D.tagName){m=q[t];l=m.tests;y=l.length;if(y&&!k){while((C=l[--y])){o=C[1];if(B[C[0]]){v=B[C[0]](D,C[0]);}else{v=D[C[0]];if(v===undefined&&D.getAttribute){v=D.getAttribute(C[0]);}}if((o==="="&&v!==C[2])||(typeof o!=="string"&&o.test&&!o.test(v))||(!o.test&&typeof o==="function"&&!o(D,C[0],C[2]))){if((D=D[r])){while(D&&(!D.tagName||(m.tagName&&m.tagName!==D.tagName))){D=D[r];}}continue testLoop;}}}t--;if(!k&&(x=m.combinator)){r=x.axis;D=D[r];while(D&&!D.tagName){D=D[r];}if(x.direct){r=null;}}else{p.push(w);if(s){return p;}break;}}}w=D=null;return p;},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:true},"+":{axis:"previousSibling",direct:true}},_parsers:[{name:e,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(l,m){var k=l[2]||"",i=c.operators,j=(l[3])?l[3].replace(/\\/g,""):"",n;if((l[1]==="id"&&k==="=")||(l[1]==="className"&&g.config.doc.documentElement.getElementsByClassName&&(k==="~="||k==="="))){m.prefilter=l[1];l[3]=j;m[l[1]]=(l[1]==="id")?l[3]:j;}if(k in i){n=i[k];if(typeof n==="string"){l[3]=j.replace(c._reRegExpTokens,"\\$1");n=new RegExp(n.replace("{val}",l[3]));}l[2]=n;}if(!m.last||m.prefilter!==l[1]){return l.slice(1);}}},{name:d,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(j,k){var i=j[1].toUpperCase();k.tagName=i;if(i!=="*"&&(!k.last||k.prefilter)){return[d,"=",i];}if(!k.prefilter){k.prefilter="tagName";}}},{name:a,re:/^\s*([>+~]|\s)\s*/,fn:function(i,j){}},{name:f,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(i,j){var k=c[f][i[1]];if(k){if(i[2]){i[2]=i[2].replace(/\\/g,"");}return[i[2],k];}else{return false;}}}],_getToken:function(i){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]};},_tokenize:function(l){l=l||"";l=c._replaceShorthand(g.Lang.trim(l));var k=c._getToken(),q=l,p=[],r=false,n,o,m,j;outer:do{r=false;for(m=0;(j=c._parsers[m++]);){if((n=j.re.exec(l))){if(j.name!==a){k.selector=l;}l=l.replace(n[0],"");if(!l.length){k.last=true;}if(c._attrFilters[n[1]]){n[1]=c._attrFilters[n[1]];}o=j.fn(n,k);if(o===false){r=false;break outer;}else{if(o){k.tests.push(o);}}if(!l.length||j.name===a){p.push(k);k=c._getToken(k);if(j.name===a){k.combinator=g.Selector.combinators[n[1]];}}r=true;}}}while(r&&l.length);if(!r||l.length){p=[];}return p;},_replaceShorthand:function(k){var m=c.shorthand,l=k.match(c._re.esc),n,q,p,o,j;if(l){k=k.replace(c._re.esc,"\uE000");}n=k.match(c._re.attr);q=k.match(c._re.pseudos);if(n){k=k.replace(c._re.attr,"\uE001");}if(q){k=k.replace(c._re.pseudos,"\uE002");}for(p in m){if(m.hasOwnProperty(p)){k=k.replace(new RegExp(p,"gi"),m[p]);}}if(n){for(o=0,j=n.length;o<j;++o){k=k.replace(/\uE001/,n[o]);}}if(q){for(o=0,j=q.length;o<j;++o){k=k.replace(/\uE002/,q[o]);}}k=k.replace(/\[/g,"\uE003");k=k.replace(/\]/g,"\uE004");k=k.replace(/\(/g,"\uE005");k=k.replace(/\)/g,"\uE006");if(l){for(o=0,j=l.length;o<j;++o){k=k.replace("\uE000",l[o]);}}return k;},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(j,i){return g.DOM.getAttribute(j,i);}}};g.mix(g.Selector,b,true);g.Selector.getters.src=g.Selector.getters.rel=g.Selector.getters.href;if(g.Selector.useNative&&g.config.doc.querySelector){g.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]";}},"3.4.0",{requires:["selector-native"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("selector-css3",function(a){a.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/;a.Selector._getNth=function(d,o,q,h){a.Selector._reNth.test(o);var m=parseInt(RegExp.$1,10),c=RegExp.$2,j=RegExp.$3,k=parseInt(RegExp.$4,10)||0,p=[],l=a.Selector._children(d.parentNode,q),f;if(j){m=2;f="+";c="n";k=(j==="odd")?1:0;}else{if(isNaN(m)){m=(c)?1:0;}}if(m===0){if(h){k=l.length-k+1;}if(l[k-1]===d){return true;}else{return false;}}else{if(m<0){h=!!h;m=Math.abs(m);}}if(!h){for(var e=k-1,g=l.length;e<g;e+=m){if(e>=0&&l[e]===d){return true;}}}else{for(var e=l.length-k,g=l.length;e>=0;e-=m){if(e<g&&l[e]===d){return true;}}}return false;};a.mix(a.Selector.pseudos,{"root":function(b){return b===b.ownerDocument.documentElement;},"nth-child":function(b,c){return a.Selector._getNth(b,c);},"nth-last-child":function(b,c){return a.Selector._getNth(b,c,null,true);},"nth-of-type":function(b,c){return a.Selector._getNth(b,c,b.tagName);},"nth-last-of-type":function(b,c){return a.Selector._getNth(b,c,b.tagName,true);},"last-child":function(c){var b=a.Selector._children(c.parentNode);return b[b.length-1]===c;},"first-of-type":function(b){return a.Selector._children(b.parentNode,b.tagName)[0]===b;},"last-of-type":function(c){var b=a.Selector._children(c.parentNode,c.tagName);return b[b.length-1]===c;},"only-child":function(c){var b=a.Selector._children(c.parentNode);return b.length===1&&b[0]===c;},"only-of-type":function(c){var b=a.Selector._children(c.parentNode,c.tagName);return b.length===1&&b[0]===c;},"empty":function(b){return b.childNodes.length===0;},"not":function(b,c){return !a.Selector.test(b,c);},"contains":function(b,c){var d=b.innerText||b.textContent||"";return d.indexOf(c)>-1;},"checked":function(b){return(b.checked===true||b.selected===true);},enabled:function(b){return(b.disabled!==undefined&&!b.disabled);},disabled:function(b){return(b.disabled);}});a.mix(a.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"});a.Selector.combinators["~"]={axis:"previousSibling"};},"3.4.0",{requires:["selector-native","selector-css2"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("shim-plugin",function(b){function a(c){this.init(c);}a.CLASS_NAME="yui-node-shim";a.TEMPLATE='<iframe class="'+a.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>';a.prototype={init:function(c){this._host=c.host;this.initEvents();this.insert();this.sync();},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this);},getShim:function(){return this._shim||(this._shim=b.Node.create(a.TEMPLATE,this._host.get("ownerDocument")));},insert:function(){var c=this._host;this._shim=c.insertBefore(this.getShim(),c.get("firstChild"));},sync:function(){var d=this._shim,c=this._host;if(d){d.setAttrs({width:c.getStyle("width"),height:c.getStyle("height")});}},destroy:function(){var c=this._shim;if(c){c.remove(true);}this._resizeHandle.detach();}};a.NAME="Shim";a.NS="shim";b.namespace("Plugin");b.Plugin.Shim=a;},"3.4.0",{requires:["node-style","node-pluginhost"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("base-pluginhost",function(c){var a=c.Base,b=c.Plugin.Host;c.mix(a,b,false,null,1);a.plug=b.plug;a.unplug=b.unplug;},"3.4.0",{requires:["base-base","pluginhost"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("classnamemanager",function(c){var b="classNamePrefix",d="classNameDelimiter",a=c.config;a[b]=a[b]||"yui3";a[d]=a[d]||"-";c.ClassNameManager=function(){var e=a[b],f=a[d];return{getClassName:c.cached(function(){var g=c.Array(arguments);if(g[g.length-1]!==true){g.unshift(e);}else{g.pop();}return g.join(f);})};}();},"3.4.0",{requires:["yui-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-base",function(b){var g=b.Lang,r=b.Node,e=b.ClassNameManager,w=e.getClassName,M,s=b.cached(function(L){return L.substring(0,1).toUpperCase()+L.substring(1);}),F="content",P="visible",K="hidden",y="disabled",B="focused",d="width",A="height",N="boundingBox",v="contentBox",k="parentNode",m="ownerDocument",x="auto",j="srcNode",I="body",H="tabIndex",q="id",i="render",J="rendered",n="destroyed",a="strings",o="<div></div>",z="Change",p="loading",E="_uiSet",D="",G=function(){},u=true,O=false,t,l={},f=[P,y,A,d,B],C=b.UA.webkit,h={};function c(Q){var T=this,L,S,R=T.constructor;T._strs={};T._cssPrefix=R.CSS_PREFIX||w(R.NAME.toLowerCase());c.superclass.constructor.apply(T,arguments);S=T.get(i);if(S){if(S!==u){L=S;}T.render(L);}}c.NAME="widget";t=c.UI_SRC="ui";c.ATTRS=l;l[q]={valueFn:"_guid",writeOnce:u};l[J]={value:O,readOnly:u};l[N]={value:null,setter:"_setBB",writeOnce:u};l[v]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:u};l[H]={value:null,validator:"_validTabIndex"};l[B]={value:O,readOnly:u};l[y]={value:O};l[P]={value:u};l[A]={value:D};l[d]={value:D};l[a]={value:{},setter:"_strSetter",getter:"_strGetter"};l[i]={value:O,writeOnce:u};c.CSS_PREFIX=w(c.NAME.toLowerCase());c.getClassName=function(){return w.apply(e,[c.CSS_PREFIX].concat(b.Array(arguments),true));};M=c.getClassName;c.getByNode=function(L){var R,Q=M();L=r.one(L);if(L){L=L.ancestor("."+Q,true);if(L){R=h[b.stamp(L,u)];}}return R||null;};b.extend(c,b.Base,{getClassName:function(){return w.apply(e,[this._cssPrefix].concat(b.Array(arguments),true));},initializer:function(L){h[b.stamp(this.get(N))]=this;if(this._applyParser){this._applyParser(L);}},destructor:function(){var L=this.get(N),Q=b.stamp(L,u);if(Q in h){delete h[Q];}this._destroyBox();},destroy:function(L){this._destroyAllNodes=L;return c.superclass.destroy.apply(this);},_destroyBox:function(){var R=this.get(N),Q=this.get(v),L=this._destroyAllNodes,S=R&&R.compareTo(Q);if(this.UI_EVENTS){this._destroyUIEvents();}this._unbindUI(R);if(L){R.empty();R.remove(u);}else{if(Q){Q.remove(u);}if(!S){R.remove(u);}}},render:function(L){if(!this.get(n)&&!this.get(J)){this.publish(i,{queuable:O,fireOnce:u,defaultTargetOnly:u,defaultFn:this._defRenderFn});this.fire(i,{parentNode:(L)?r.one(L):null});}return this;},_defRenderFn:function(L){this._parentNode=L.parentNode;this.renderer();this._set(J,u);this._removeLoadingClassNames();},renderer:function(){var L=this;L._renderUI();L.renderUI();L._bindUI();L.bindUI();L._syncUI();L.syncUI();},bindUI:G,renderUI:G,syncUI:G,hide:function(){return this.set(P,O);},show:function(){return this.set(P,u);},focus:function(){return this._set(B,u);},blur:function(){return this._set(B,O);},enable:function(){return this.set(y,O);},disable:function(){return this.set(y,u);},_uiSizeCB:function(L){this.get(v).toggleClass(M(F,"expanded"),L);},_renderBox:function(L){var T=this,Q=T.get(v),R=T.get(N),V=T.get(j),S=T.DEF_PARENT_NODE,U=(V&&V.get(m))||R.get(m)||Q.get(m);if(V&&!V.compareTo(Q)&&!Q.inDoc(U)){V.replace(Q);}if(!R.compareTo(Q.get(k))&&!R.compareTo(Q)){if(Q.inDoc(U)){Q.replace(R);}R.appendChild(Q);}L=L||(S&&r.one(S));if(L){L.appendChild(R);}else{if(!R.inDoc(U)){r.one(I).insert(R,0);}}},_setBB:function(L){return this._setBox(this.get(q),L,this.BOUNDING_TEMPLATE);},_setCB:function(L){return(this.CONTENT_TEMPLATE===null)?this.get(N):this._setBox(null,L,this.CONTENT_TEMPLATE);},_defaultCB:function(L){return this.get(j)||null;},_setBox:function(R,Q,L){Q=r.one(Q)||r.create(L);if(!Q.get(q)){Q.set(q,R||b.guid());}return Q;},_renderUI:function(){this._renderBoxClassNames();this._renderBox(this._parentNode);},_renderBoxClassNames:function(){var S=this._getClasses(),L,Q=this.get(N),R;Q.addClass(M());for(R=S.length-3;R>=0;R--){L=S[R];Q.addClass(L.CSS_PREFIX||w(L.NAME.toLowerCase()));}this.get(v).addClass(this.getClassName(F));},_removeLoadingClassNames:function(){var R=this.get(N),L=this.get(v),Q=this.getClassName(p),S=M(p);R.removeClass(S).removeClass(Q);L.removeClass(S).removeClass(Q);},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND);this._bindDOM();},_unbindUI:function(L){this._unbindDOM(L);},_bindDOM:function(){var L=this.get(N).get(m);this._hDocFocus=L.on("focus",this._onDocFocus,this);if(C){this._hDocMouseDown=L.on("mousedown",this._onDocMouseDown,this);}},_unbindDOM:function(L){if(this._hDocFocus){this._hDocFocus.detach();}if(C&&this._hDocMouseDown){this._hDocMouseDown.detach();}},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC);},_uiSetHeight:function(L){this._uiSetDim(A,L);this._uiSizeCB((L!==D&&L!==x));},_uiSetWidth:function(L){this._uiSetDim(d,L);},_uiSetDim:function(L,Q){this.get(N).setStyle(L,g.isNumber(Q)?Q+this.DEF_UNIT:Q);},_uiSetVisible:function(L){this.get(N).toggleClass(this.getClassName(K),!L);},_uiSetDisabled:function(L){this.get(N).toggleClass(this.getClassName(y),L);},_uiSetFocused:function(R,Q){var L=this.get(N);L.toggleClass(this.getClassName(B),R);if(Q!==t){if(R){L.focus();}else{L.blur();}}},_uiSetTabIndex:function(Q){var L=this.get(N);if(g.isNumber(Q)){L.set(H,Q);}else{L.removeAttribute(H);}},_onDocMouseDown:function(L){if(this._domFocus){this._onDocFocus(L);}},_onDocFocus:function(L){this._domFocus=this.get(N).contains(L.target);this._set(B,this._domFocus,{src:t});},toString:function(){return this.name+"["+this.get(q)+"]";},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:o,BOUNDING_TEMPLATE:o,_guid:function(){return b.guid();},_validTabIndex:function(L){return(g.isNumber(L)||g.isNull(L));},_bindAttrUI:function(Q){var R,L=Q.length;for(R=0;R<L;R++){this.after(Q[R]+z,this._setAttrUI);}},_syncAttrUI:function(R){var S,Q=R.length,L;for(S=0;S<Q;S++){L=R[S];this[E+s(L)](this.get(L));}},_setAttrUI:function(L){this[E+s(L.attrName)](L.newVal,L.src);},_strSetter:function(L){return b.merge(this.get(a),L);},getString:function(L){return this.get(a)[L];},getStrings:function(){return this.get(a);},_UI_ATTRS:{BIND:f,SYNC:f.concat(H)}});b.Widget=c;},"3.4.0",{requires:["attribute","event-focus","base-base","base-pluginhost","node-base","node-style","classnamemanager"],skinnable:true});
/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-htmlparser",function(f){var e=f.Widget,c=f.Node,d=f.Lang,a="srcNode",b="contentBox";e.HTML_PARSER={};e._buildCfg={aggregates:["HTML_PARSER"]};e.ATTRS[a]={value:null,setter:c.one,getter:"_getSrcNode",writeOnce:true};f.mix(e.prototype,{_getSrcNode:function(g){return g||this.get(b);},_applyParsedConfig:function(i,g,h){return(h)?f.mix(g,h,false):g;},_applyParser:function(g){var i=this,j=i.get(a),h=i._getHtmlParser(),l,k;if(h&&j){f.Object.each(h,function(n,m,p){k=null;if(d.isFunction(n)){k=n.call(i,j);}else{if(d.isArray(n)){k=j.all(n[0]);if(k.isEmpty()){k=null;}}else{k=j.one(n);}}if(k!==null&&k!==undefined){l=l||{};l[m]=k;}});}g=i._applyParsedConfig(j,g,l);},_getHtmlParser:function(){var h=this._getClasses(),k={},g,j;for(g=h.length-1;g>=0;g--){j=h[g].HTML_PARSER;if(j){f.mix(k,j,true);}}return k;}});},"3.4.0",{requires:["widget-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-uievents",function(g){var f="boundingBox",e=g.Widget,d="render",a=g.Lang,c=":",b=g.Widget._uievts=g.Widget._uievts||{};g.mix(e.prototype,{_destroyUIEvents:function(){var h=g.stamp(this,true);g.each(b,function(j,i){if(j.instances[h]){delete j.instances[h];if(g.Object.isEmpty(j.instances)){j.handle.detach();if(b[i]){delete b[i];}}}});},UI_EVENTS:g.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(f);},_createUIEvent:function(i){var l=this._getUIEventNode(),h=(g.stamp(l)+i),k=b[h],j;if(!k){j=l.delegate(i,function(m){var n=e.getByNode(this);if(n){if(n._filterUIEvent(m)){n.fire(m.type,{domEvent:m});}}},"."+g.Widget.getClassName());b[h]=k={instances:{},handle:j};}k.instances[g.stamp(this)]=1;},_filterUIEvent:function(h){return(h.currentTarget.compareTo(h.container)||h.container.compareTo(this._getUIEventNode()));},_getUIEvent:function(j){if(a.isString(j)){var k=this.parseType(j)[1],h,i;if(k){h=k.indexOf(c);if(h>-1){k=k.substring(h+c.length);}if(this.UI_EVENTS[k]){i=k;}}return i;}},_initUIEvent:function(i){var j=this._getUIEvent(i),h=this._uiEvtsInitQueue||{};if(j&&!h[j]){this._uiEvtsInitQueue=h[j]=1;this.after(d,function(){this._createUIEvent(j);delete this._uiEvtsInitQueue[j];});}},on:function(h){this._initUIEvent(h);return e.superclass.on.apply(this,arguments);},publish:function(i,h){var j=this._getUIEvent(i);if(j&&h&&h.defaultFn){this._initUIEvent(j);}return e.superclass.publish.apply(this,arguments);}},true);},"3.4.0",{requires:["widget-base","node-event-delegate"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-skin",function(e){var d="boundingBox",b="contentBox",a="skin",c=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(){var f=this.get(b)||this.get(d),h=new RegExp("\\b"+c(a)+"-(\\S+)"),g;if(f){f.ancestor(function(i){g=i.get("className").match(h);return g;});}return(g)?g[1]:null;};},"3.4.0",{requires:["widget-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position",function(a){var i=a.Lang,l=a.Widget,n="xy",j="position",g="positioned",k="boundingBox",h="relative",m="renderUI",f="bindUI",d="syncUI",c=l.UI_SRC,e="xyChange";function b(o){this._posNode=this.get(k);a.after(this._renderUIPosition,this,m);a.after(this._syncUIPosition,this,d);a.after(this._bindUIPosition,this,f);}b.ATTRS={x:{setter:function(o){this._setX(o);},getter:function(){return this._getX();},lazyAdd:false},y:{setter:function(o){this._setY(o);},getter:function(){return this._getY();},lazyAdd:false},xy:{value:[0,0],validator:function(o){return this._validateXY(o);}}};b.POSITIONED_CLASS_NAME=l.getClassName(g);b.prototype={_renderUIPosition:function(){this._posNode.addClass(b.POSITIONED_CLASS_NAME);},_syncUIPosition:function(){var o=this._posNode;if(o.getStyle(j)===h){this.syncXY();}this._uiSetXY(this.get(n));},_bindUIPosition:function(){this.after(e,this._afterXYChange);},move:function(){var o=arguments,p=(i.isArray(o[0]))?o[0]:[o[0],o[1]];this.set(n,p);},syncXY:function(){this.set(n,this._posNode.getXY(),{src:c});},_validateXY:function(o){return(i.isArray(o)&&i.isNumber(o[0])&&i.isNumber(o[1]));},_setX:function(o){this.set(n,[o,this.get(n)[1]]);},_setY:function(o){this.set(n,[this.get(n)[0],o]);},_getX:function(){return this.get(n)[0];},_getY:function(){return this.get(n)[1];},_afterXYChange:function(o){if(o.src!=c){this._uiSetXY(o.newVal);}},_uiSetXY:function(o){this._posNode.setXY(o);}};a.WidgetPosition=b;},"3.4.0",{requires:["base-build","node-screen","widget"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position-align",function(b){var m=b.Lang,e="align",g="bindUI",c="syncUI",f="offsetWidth",o="offsetHeight",q="viewportRegion",l="region",h="window",a="resize",n="scroll",i="visible",k="boundingBox",p="alignChange",j="visibleChange";function d(r){if(!this._posNode){b.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added");}b.after(this._syncUIPosAlign,this,c);b.after(this._bindUIPosAlign,this,g);}d.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:false,value:false},alignOn:{valueFn:function(){return[];},validator:b.Lang.isArray}};d.TL="tl";d.TR="tr";d.BL="bl";d.BR="br";d.TC="tc";d.RC="rc";d.BC="bc";d.LC="lc";d.CC="cc";d.prototype={_syncUIPosAlign:function(){var r=this.get(e);this._uiSetHostVisible(this.get(i));if(r){this._uiSetAlign(r.node,r.points);}},_bindUIPosAlign:function(){this.after(p,this._afterAlignChange);this.after(j,this._afterVisibleChange);this.after("alignOnChange",this._afterAlignOnChange);},_attachUIHandles:function(){if(this._uiHandles){return;}var t=b.bind(this._syncAlign,this),u=this.get("alignOn"),w=this.get(k),r=[],s=0,v={node:undefined,ev:undefined};for(;s<u.length;s++){v.node=u[s].node;v.ev=u[s].eventName;if(!v.node&&v.ev){r.push(w.on(v.ev,t));}else{if(v.node&&v.ev){r.push(v.node.on(v.ev,t));}else{}}}this.after("destroy",this._detachUIHandles);this._uiHandles=r;},_detachUIHandles:function(){if(this._uiHandles){new b.EventHandle(this._uiHandles).detach();this._uiHandles=null;}},_syncAlign:function(){this._syncUIPosAlign();},_setAlignCenter:function(r){if(r){this.set(e,{node:r===true?null:r,points:[d.CC,d.CC]});}return r;},_afterAlignChange:function(r){if(r.newVal){this._uiSetAlign(r.newVal.node,r.newVal.points);}},_uiSetHostVisible:function(r){if(r){this._attachUIHandles();}else{this._detachUIHandles();}},_afterVisibleChange:function(r){this._uiSetHostVisible(r.newVal);},_uiSetAlign:function(u,t){if(!m.isArray(t)||t.length!=2){b.error("align: Invalid Points Arguments");return;}var s=this._getRegion(u),r,v,w;if(s){r=t[0];v=t[1];switch(v){case d.TL:w=[s.left,s.top];break;case d.TR:w=[s.right,s.top];break;case d.BL:w=[s.left,s.bottom];break;case d.BR:w=[s.right,s.bottom];break;case d.TC:w=[s.left+Math.floor(s.width/2),s.top];break;case d.BC:w=[s.left+Math.floor(s.width/2),s.bottom];break;case d.LC:w=[s.left,s.top+Math.floor(s.height/2)];break;case d.RC:w=[s.right,s.top+Math.floor(s.height/2),r];break;case d.CC:w=[s.left+Math.floor(s.width/2),s.top+Math.floor(s.height/2),r];break;default:break;}if(w){this._doAlign(r,w[0],w[1]);}}},_doAlign:function(s,r,v){var u=this._posNode,t;switch(s){case d.TL:t=[r,v];break;case d.TR:t=[r-u.get(f),v];break;case d.BL:t=[r,v-u.get(o)];break;case d.BR:t=[r-u.get(f),v-u.get(o)];break;case d.TC:t=[r-(u.get(f)/2),v];break;case d.BC:t=[r-(u.get(f)/2),v-u.get(o)];break;case d.LC:t=[r,v-(u.get(o)/2)];break;case d.RC:t=[(r-u.get(f)),v-(u.get(o)/2)];break;case d.CC:t=[r-(u.get(f)/2),v-(u.get(o)/2)];break;default:break;}if(t){this.move(t);}},_getRegion:function(s){var r;if(!s){r=this._posNode.get(q);}else{s=b.Node.one(s);if(s){r=s.get(l);}}return r;},_afterAlignOnChange:function(r){this._detachUIHandles();if(this.get(i)){this._attachUIHandles();}},align:function(s,r){this.set(e,{node:s,points:r});},centered:function(r){this.align(r,[d.CC,d.CC]);}};b.WidgetPositionAlign=d;},"3.4.0",{requires:["widget-position"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("autocomplete-list",function(b){var i=b.Lang,v=b.Node,l=b.Array,h=b.UA.ie&&b.UA.ie<7,p=9,s="_CLASS_ITEM",t="_CLASS_ITEM_ACTIVE",d="_CLASS_ITEM_HOVER",u="_SELECTOR_ITEM",f="activeItem",k="alwaysShowList",o="circular",r="hoveredItem",m="id",e="item",c="list",w="result",j="results",q="visible",g="width",n="select",a=b.Base.create("autocompleteList",b.Widget,[b.AutoCompleteBase,b.WidgetPosition,b.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",initializer:function(){var x=this.get("inputNode");if(!x){b.error("No inputNode specified.");return;}this._inputNode=x;this._listEvents=[];this.DEF_PARENT_NODE=x.get("parentNode");this[s]=this.getClassName(e);this[t]=this.getClassName(e,"active");this[d]=this.getClassName(e,"hover");this[u]="."+this[s];this.publish(n,{defaultFn:this._defSelectFn});},destructor:function(){while(this._listEvents.length){this._listEvents.pop().detach();}if(this._ariaNode){this._ariaNode.remove().destroy(true);}},bindUI:function(){this._bindInput();this._bindList();},renderUI:function(){var C=this._createAriaNode(),z=this.get("boundingBox"),y=this.get("contentBox"),B=this._inputNode,A=this._createListNode(),x=B.get("parentNode");B.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":c,"aria-expanded":false,"aria-owns":A.get("id"),role:"combobox"});x.append(C);if(h){z.plug(b.Plugin.Shim);}z.setStyle("position","absolute");this._ariaNode=C;this._boundingBox=z;this._contentBox=y;this._listNode=A;this._parentNode=x;},syncUI:function(){this._syncResults();this._syncVisibility();},hide:function(){return this.get(k)?this:this.set(q,false);},selectItem:function(y,x){if(y){if(!y.hasClass(this[s])){return this;}}else{y=this.get(f);if(!y){return this;}}this.fire(n,{itemNode:y,originEvent:x||null,result:y.getData(w)});return this;},_activateNextItem:function(){var y=this.get(f),x;if(y){x=y.next(this[u])||(this.get(o)?null:y);}else{x=this._getFirstItemNode();}this.set(f,x);return this;},_activatePrevItem:function(){var y=this.get(f),x=y?y.previous(this[u]):this.get(o)&&this._getLastItemNode();this.set(f,x||null);return this;},_add:function(x){var y=[];l.each(i.isArray(x)?x:[x],function(z){y.push(this._createItemNode(z).setData(w,z));},this);y=b.all(y);this._listNode.append(y.toFrag());return y;},_ariaSay:function(z,x){var y=this.get("strings."+z);this._ariaNode.setContent(x?i.sub(y,x):y);},_bindInput:function(){var A=this._inputNode,y,z,x;if(this.get("align")===null){x=this.get("tokenInput");y=(x&&x.get("boundingBox"))||A;this.set("align",{node:y,points:["tl","bl"]});if(!this.get(g)&&(z=y.get("offsetWidth"))){this.set(g,z);}}this._listEvents.push(A.on("blur",this._onListInputBlur,this));},_bindList:function(){this._listEvents.concat([b.on("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this[u],this)]);},_clear:function(){this.set(f,null);this._set(r,null);this._listNode.get("children").remove(true);},_createAriaNode:function(){var x=v.create(this.ARIA_TEMPLATE);return x.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"});},_createItemNode:function(x){var y=v.create(this.ITEM_TEMPLATE);return y.addClass(this[s]).setAttrs({id:b.stamp(y),role:"option"}).setAttribute("data-text",x.text).append(x.display);},_createListNode:function(){var x=this.get("listNode")||v.create(this.LIST_TEMPLATE);x.addClass(this.getClassName(c)).setAttrs({id:b.stamp(x),role:"listbox"});this._set("listNode",x);this.get("contentBox").append(x);return x;},_getFirstItemNode:function(){return this._listNode.one(this[u]);},_getLastItemNode:function(){return this._listNode.one(this[u]+":last-child");},_syncPosition:function(){this._syncUIPosAlign();this._syncShim();},_syncResults:function(x){if(!x){x=this.get(j);}this._clear();if(x.length){this._add(x);this._ariaSay("items_available");}this._syncPosition();if(this.get("activateFirstItem")&&!this.get(f)){this.set(f,this._getFirstItemNode());}},_syncShim:h?function(){this._boundingBox.shim.sync();}:function(){},_syncVisibility:function(x){if(this.get(k)){x=true;this.set(q,x);}if(typeof x==="undefined"){x=this.get(q);}this._inputNode.set("aria-expanded",x);this._boundingBox.set("aria-hidden",!x);if(x){this._syncPosition();}else{this.set(f,null);this._set(r,null);this._boundingBox.get("offsetWidth");}},_afterActiveItemChange:function(A){var z=this._inputNode,x=A.newVal,B=A.prevVal,y;if(B&&B._node){B.removeClass(this[t]);}if(x){x.addClass(this[t]);z.set("aria-activedescendant",x.get(m));}else{z.removeAttribute("aria-activedescendant");}if(this.get("scrollIntoView")){y=x||z;if(!y.inRegion(b.DOM.viewportRegion(),true)||!y.inRegion(this._contentBox,true)){y.scrollIntoView();}}},_afterAlwaysShowListChange:function(x){this.set(q,x.newVal||this.get(j).length>0);},_afterHoveredItemChange:function(y){var x=y.newVal,z=y.prevVal;if(z){z.removeClass(this[d]);}if(x){x.addClass(this[d]);}},_afterMouseOver:function(x){var y=x.domEvent.target.ancestor(this[u],true);this._mouseOverList=true;if(y){this._set(r,y);}},_afterMouseOut:function(){this._mouseOverList=false;this._set(r,null);},_afterResultsChange:function(x){this._syncResults(x.newVal);if(!this.get(k)){this.set(q,!!x.newVal.length);}},_afterVisibleChange:function(x){this._syncVisibility(!!x.newVal);},_onListInputBlur:function(x){if(!this._mouseOverList||this._lastInputKey===p){this.hide();}},_onItemClick:function(x){var y=x.currentTarget;this.set(f,y);this.selectItem(y,x);},_defSelectFn:function(x){var y=x.result.text;this._inputNode.focus();this._updateValue(y);this._ariaSay("item_selected",{item:y});this.hide();}},{ATTRS:{activateFirstItem:{value:false},activeItem:{setter:b.one,value:null},alwaysShowList:{value:false},circular:{value:true},hoveredItem:{readOnly:true,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:false},strings:{valueFn:function(){return b.Intl.get("autocomplete-list");
}},tabSelect:{value:true},visible:{value:false}},CSS_PREFIX:b.ClassNameManager.getClassName("aclist")});b.AutoCompleteList=a;b.AutoComplete=a;},"3.4.0",{lang:["en"],after:["autocomplete-sources"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:true});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("autocomplete-list-keys",function(g){var c=40,a=13,d=27,f=9,b=38;function e(){g.before(this._unbindKeys,this,"destructor");g.before(this._bindKeys,this,"bindUI");this._initKeys();}e.prototype={_initKeys:function(){var h={},i={};this._keyEvents=[];h[c]=this._keyDown;i[a]=this._keyEnter;i[d]=this._keyEsc;i[f]=this._keyTab;i[b]=this._keyUp;this._keys=h;this._keysVisible=i;},_bindKeys:function(){this._keyEvents.push(this._inputNode.on("keydown",this._onInputKey,this));},_unbindKeys:function(){while(this._keyEvents.length){this._keyEvents.pop().detach();}},_keyDown:function(){if(this.get("visible")){this._activateNextItem();}else{this.show();}},_keyEnter:function(i){var h=this.get("activeItem");if(h){this.selectItem(h,i);}else{return false;}},_keyEsc:function(){this.hide();},_keyTab:function(i){var h;if(this.get("tabSelect")){h=this.get("activeItem");if(h){this.selectItem(h,i);return true;}}return false;},_keyUp:function(){this._activatePrevItem();},_onInputKey:function(j){var h,i=j.keyCode;this._lastInputKey=i;if(this.get("results").length){h=this._keys[i];if(!h&&this.get("visible")){h=this._keysVisible[i];}if(h){if(h.call(this,j)!==false){j.preventDefault();}}}}};g.Base.mix(g.AutoCompleteList,[e]);},"3.4.0",{requires:["autocomplete-list","base-build"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("autocomplete-plugin",function(b){var a=b.Plugin;function c(d){d.inputNode=d.host;if(!d.render&&d.render!==false){d.render=true;}c.superclass.constructor.apply(this,arguments);}b.extend(c,b.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:b.ClassNameManager.getClassName("aclist")});a.AutoComplete=c;a.AutoCompleteList=c;},"3.4.0",{requires:["autocomplete-list","node-pluginhost"]});YUI.add("sprintf",function(b){function a(e,d){for(var f=[];d>0;f[--d]=e){}return f.join("")}function c(){var h=0,l,j=arguments[h++],e=[],g,d,k,n,q="";while(j){if(g=/^[^\x25]+/.exec(j)){e.push(g[0])}else{if(g=/^\x25{2}/.exec(j)){e.push("%")}else{if(g=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(j)){if(((l=arguments[g[1]||h++])==null)||(l==undefined)){throw ("Too few arguments.")}if(/[^s]/.test(g[7])&&(typeof(l)!="number")){throw ("Expecting number but found "+typeof(l))}switch(g[7]){case"b":l=l.toString(2);break;case"c":l=String.fromCharCode(l);break;case"d":l=parseInt(l);break;case"e":l=g[6]?l.toExponential(g[6]):l.toExponential();break;case"f":l=g[6]?parseFloat(l).toFixed(g[6]):parseFloat(l);break;case"o":l=l.toString(8);break;case"s":l=((l=String(l))&&g[6]?l.substring(0,g[6]):l);break;case"u":l=Math.abs(l);break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase();break}l=(/[def]/.test(g[7])&&g[2]&&l>=0?"+"+l:l);k=g[3]?g[3]=="0"?"0":g[3].charAt(1):" ";n=g[5]-String(l).length-q.length;d=g[5]?a(k,n):"";e.push(q+(g[4]?l+d:d+l))}else{throw ("sprintf failure")}}}j=j.substring(g[0].length)}return e.join("")}b.sprintf=c},"0.0.1");YUI.add("transjax-base",function(d){var a={};function c(f,e){if(!d.Lang.isObject(a[f])){a[f]={}}if(d.Lang.isObject(e)){d.mix(a[f],e)}}function b(){var g,l,k,f,e,j;g=Array.prototype.slice.call(arguments);l=g.shift();k=g.shift();e=a[l];if(arguments.length>1){if(d.Lang.isObject(e)){f=e[k]}if(d.Lang.isUndefined(f)){return k}g.unshift(f);return d.sprintf.apply(window,g)}else{j={};for(var h in e){if(e.hasOwnProperty(h)){j[h]=e[h]}}return j}}d.transjax={add:c,get:b}},"0.0.1",{requires:["sprintf"]});YUI.add("bo-selecta-transjax",function(a){a.transjax.add("bo-selecta",{me:'me',loading:'Loading...',uber_contact_list_view_profile:'View Profile',uber_contact_list_friend_and_family:'Friend &amp; Family',uber_contact_list_friend:'Friend',uber_contact_list_family:'Family',uber_contact_list_contact:'Contact',uber_contact_list_removed:'Removed',uber_contact_list_edit:'Edit',uber_contact_list_default_text:'screen name, real name, or email',uber_contact_list_max_results:'Showing [results_shown] of [total_results] results. <a href="[url]">See all...</a>',uber_contact_list_no_realname:'No real name given',bo_selecta_no_contacts_found:'No contacts found.',bo_selecta_no_members_found:'No members found.',bo_selecta_global_search_msg:'Search through all Flickr members?',bo_selecta_global_search_msg_2:'Search all Flickr members?',too_many_results:'We found too many results to display here. Please type a few more characters.'})},"0.0.1",{requires:["transjax-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datasource-local",function(c){var b=c.Lang,a=function(){a.superclass.constructor.apply(this,arguments);};c.mix(a,{NAME:"dataSourceLocal",ATTRS:{source:{value:null}},_tId:0,transactions:{},issueCallback:function(h,d){var f=h.on||h.callback,i=f&&f.success,g=h.details[0];g.error=(h.error||h.response.error);if(g.error){d.fire("error",g);i=f&&f.failure;}if(i){i(g);}}});c.extend(a,c.Base,{initializer:function(d){this._initEvents();},_initEvents:function(){this.publish("request",{defaultFn:c.bind("_defRequestFn",this),queuable:true});this.publish("data",{defaultFn:c.bind("_defDataFn",this),queuable:true});this.publish("response",{defaultFn:c.bind("_defResponseFn",this),queuable:true});},_defRequestFn:function(g){var d=this.get("source"),f=g.details[0];if(b.isUndefined(d)){f.error=new Error("Local source undefined");}f.data=d;this.fire("data",f);},_defDataFn:function(i){var f=i.data,h=i.meta,d={results:(b.isArray(f))?f:[f],meta:(h)?h:{}},g=i.details[0];g.response=d;this.fire("response",g);},_defResponseFn:function(d){a.issueCallback(d,this);},sendRequest:function(e){var f=a._tId++,d;e=e||{};d=e.on||e.callback;this.fire("request",{tId:f,request:e.request,on:d,callback:d,cfg:e.cfg||{}});return f;}});c.namespace("DataSource").Local=a;},"3.4.0",{requires:["base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("dump",function(g){var b=g.Lang,c="{...}",f="f(){...}",a=", ",d=" => ",e=function(p,n){var j,h,l=[],k=b.type(p);if(!b.isObject(p)){return p+"";}else{if(k=="date"){return p;}else{if(p.nodeType&&p.tagName){return p.tagName+"#"+p.id;}else{if(p.document&&p.navigator){return"window";}else{if(p.location&&p.body){return"document";}else{if(k=="function"){return f;}}}}}}n=(b.isNumber(n))?n:3;if(k=="array"){l.push("[");for(j=0,h=p.length;j<h;j=j+1){if(b.isObject(p[j])){l.push((n>0)?b.dump(p[j],n-1):c);}else{l.push(p[j]);}l.push(a);}if(l.length>1){l.pop();}l.push("]");}else{if(k=="regexp"){l.push(p.toString());}else{l.push("{");for(j in p){if(p.hasOwnProperty(j)){try{l.push(j+d);if(b.isObject(p[j])){l.push((n>0)?b.dump(p[j],n-1):c);}else{l.push(p[j]);}l.push(a);}catch(m){l.push("Error: "+m.message);}}}if(l.length>1){l.pop();}l.push("}");}}return l.join("");};g.dump=e;b.dump=e;},"3.4.0");/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("querystring-stringify-simple",function(c){var b=c.namespace("QueryString"),a=encodeURIComponent;b.stringify=function(j,k){var d=[],h=k&&k.arrayKey?true:false,g,f,e;for(g in j){if(j.hasOwnProperty(g)){if(c.Lang.isArray(j[g])){for(f=0,e=j[g].length;f<e;f++){d.push(a(h?g+"[]":g)+"="+a(j[g][f]));}}else{d.push(a(g)+"="+a(j[g]));}}}return d.join("&");};},"3.4.0",{requires:["yui-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-base",function(a){var h=a.Lang,k=["start","complete","end","success","failure"],g=["status","statusText","responseText","responseXML"],b="getAllResponseHeaders",d="getResponseHeader",i=a.config.win,j=i.XMLHttpRequest,e=i.XDomainRequest,f=0;function c(m){var l=this;l._uid="io:"+f++;l._init(m);a.io._map[l._uid]=l;}c.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(n){var m=this,l;m.cfg=n||{};a.augment(m,a.EventTarget);for(l=0;l<5;l++){m.publish("io:"+k[l],a.merge({broadcast:1},n));m.publish("io-trn:"+k[l],n);}},_create:function(v,p){var s=this,r={id:h.isNumber(p)?p:s._id++,uid:s._uid},l=v.xdr,m=l?l.use:v.form&&v.form.upload?"iframe":"xhr",q=(l&&l.use==="native"&&e),n=s._transport;switch(m){case"native":case"xhr":r.c=q?new e():j?new j():new ActiveXObject("Microsoft.XMLHTTP");r.t=q?true:false;break;default:r.c=n?n[m]:{};r.t=true;}return r;},_destroy:function(l){if(i){if(j&&l.t===true){l.c.onreadystatechange=null;}else{if(a.UA.ie){l.c.abort();}}}l.c=null;l=null;},_evt:function(q,n,u){var t=this,l,x,v=u["arguments"],w=t.cfg.emitFacade,m="io:"+q,r="io-trn:"+q;if(n.e){n.c={status:0,statusText:n.e};}l=w?[{id:n.id,data:n.c,cfg:u,"arguments":v}]:[n.id];if(!w){if(q===k[0]||q===k[2]){if(v){l.push(v);}}else{x=v?l.push(n.c,v):l.push(n.c);}}l.unshift(m);t.fire.apply(t,l);if(u.on){l[0]=r;t.once(r,u.on[q],u.context||a);t.fire.apply(t,l);}},start:function(l,m){this._evt(k[0],l,m);},complete:function(l,m){this._evt(k[1],l,m);},end:function(l,m){this._evt(k[2],l,m);this._destroy(l);},success:function(l,m){this._evt(k[3],l,m);this.end(l,m);},failure:function(l,m){this._evt(k[4],l,m);this.end(l,m);},_retry:function(m,l,n){this._destroy(m);n.xdr.use="flash";return this.send(l,n,m.id);},_concat:function(l,m){l+=(l.indexOf("?")===-1?"?":"&")+m;return l;},setHeader:function(m,n){if(n){this._headers[m]=n;}else{delete this._headers[m];}},_setHeaders:function(m,l){l=a.merge(this._headers,l);a.Object.each(l,function(n,o){if(n!=="disable"){m.setRequestHeader(o,l[o]);}});},_startTimeout:function(m,l){var n=this;n._timeout[m.id]=i.setTimeout(function(){n._abort(m,"timeout");},l);},_clearTimeout:function(l){i.clearTimeout(this._timeout[l]);delete this._timeout[l];},_result:function(n,p){var l;try{l=n.c.status;}catch(m){l=0;}if(l>=200&&l<300||l===1223){this.success(n,p);}else{this.failure(n,p);}},_rS:function(l,n){var m=this;if(l.c.readyState===4){if(n.timeout){m._clearTimeout(l.id);}i.setTimeout(function(){m.complete(l,n);m._result(l,n);},0);}},_abort:function(m,l){if(m&&m.c){m.e=l;m.c.abort();}},send:function(p,y,t){var n,q,l,A,x,w=this,z=p;y=y?a.Object(y):{};n=w._create(y,t);q=y.method?y.method.toUpperCase():"GET";A=y.sync;x=y.data;if(h.isObject(x)){x=a.QueryString.stringify(x);}if(y.form){if(y.form.upload){return w.upload(n,p,y);}else{x=w._serialize(y.form,x);}}if(x){switch(q){case"GET":case"HEAD":case"DELETE":z=w._concat(z,x);x="";break;case"POST":case"PUT":y.headers=a.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},y.headers);break;}}if(n.t){return w.xdr(z,n,y);}if(!A){n.c.onreadystatechange=function(){w._rS(n,y);};}try{n.c.open(q,z,A?false:true,y.username||null,y.password||null);w._setHeaders(n.c,y.headers||{});w.start(n,y);if(y.xdr&&y.xdr.credentials){if(!a.UA.ie){n.c.withCredentials=true;}}n.c.send(x);if(A){l=a.mix({id:n.id,"arguments":y["arguments"]},n.c,false,g);l[b]=function(){return n.c[b]();};l[d]=function(m){return n.c[d](m);};w.complete(n,y);w._result(n,y);return l;}}catch(v){if(n.t){return w._retry(n,p,y);}else{w.complete(n,y);w._result(n,y);}}if(y.timeout){w._startTimeout(n,y.timeout);}return{id:n.id,abort:function(){return n.c?w._abort(n,"abort"):false;},isInProgress:function(){return n.c?n.c.readyState!==4&&n.c.readyState!==0:false;},io:w};}};a.io=function(l,n){var m=a.io._map["io:0"]||new c();return m.send.apply(m,[l,n]);};a.io.header=function(m,n){var p=a.io._map["io:0"]||new c();p.setHeader(m,n);};a.IO=c;a.io._map={};},"3.4.0",{requires:["event-custom-base","querystring-stringify-simple"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datatype-xml-parse",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{parse:function(f){var d=null;if(a.isString(f)){try{if(!a.isUndefined(ActiveXObject)){d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(f);}}catch(c){try{if(!a.isUndefined(DOMParser)){d=new DOMParser().parseFromString(f,"text/xml");}}catch(g){}}}if((a.isNull(d))||(a.isNull(d.documentElement))||(d.documentElement.nodeName==="parsererror")){}return d;}});b.namespace("Parsers").xml=b.DataType.XML.parse;},"3.4.0");/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datatype-xml-format",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{format:function(c){try{if(!a.isUndefined(XMLSerializer)){return(new XMLSerializer()).serializeToString(c);}}catch(d){if(c&&c.xml){return c.xml;}else{return(a.isValue(c)&&c.toString)?c.toString():"";}}}});},"3.4.0");/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-xdr",function(a){var k=a.publish("io:xdrReady",{fireOnce:true}),e={},g={},j=a.config.doc,l=a.config.win,f=l&&l.XDomainRequest;function h(m,q,d){var n='<object id="io_swf" type="application/x-shockwave-flash" data="'+m+'" width="0" height="0">'+'<param name="movie" value="'+m+'">'+'<param name="FlashVars" value="yid='+q+"&uid="+d+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",p=j.createElement("div");j.body.appendChild(p);p.innerHTML=n;}function b(p,m,n){if(m==="flash"){p.c.responseText=decodeURI(p.c.responseText);}if(n==="xml"){p.c.responseXML=a.DataType.XML.parse(p.c.responseText);}return p;}function i(d,m){return d.c.abort(d.id,m);}function c(d){return f?g[d.id]!==4:d.c.isInProgress(d.id);}a.mix(a.IO.prototype,{_transport:{},_ieEvt:function(n,q){var p=this,m=n.id,d="timeout";n.c.onprogress=function(){g[m]=3;};n.c.onload=function(){g[m]=4;p.xdrResponse("success",n,q);};n.c.onerror=function(){g[m]=4;p.xdrResponse("failure",n,q);};if(q[d]){n.c.ontimeout=function(){g[m]=4;p.xdrResponse(d,n,q);};n.c[d]=q[d];}},xdr:function(d,m,p){var n=this;if(p.xdr.use==="flash"){e[m.id]=p;l.setTimeout(function(){try{m.c.send(d,{id:m.id,uid:m.uid,method:p.method,data:p.data,headers:p.headers});}catch(o){n.xdrResponse("transport error",m,p);delete e[m.id];}},a.io.xdr.delay);}else{if(f){n._ieEvt(m,p);m.c.open(p.method||"GET",d);m.c.send(p.data);}else{m.c.send(d,m,p);}}return{id:m.id,abort:function(){return m.c?i(m,p):false;},isInProgress:function(){return m.c?c(m.id):false;},io:n};},xdrResponse:function(q,s,v){v=e[s.id]?e[s.id]:v;var t=this,n=f?g:e,p=v.xdr.use,r=v.xdr.dataType;switch(q){case"start":t.start(s,v);break;case"success":t.success(b(s,p,r),v);delete n[s.id];break;case"timeout":case"abort":case"transport error":s.c={status:0,statusText:q};case"failure":t.failure(b(s,p,r),v);delete n[s.id];break;}},_xdrReady:function(m,d){a.fire(k,m,d);},transport:function(d){if(d.id==="flash"){h(a.UA.ie?d.src+"?d="+new Date().valueOf().toString():d.src,a.id,d.uid);}this._transport[d.id]=(d.id==="flash")?j.getElementById("io_swf"):d.src;}});a.io.xdrReady=function(n,d){var m=a.io._map[d];a.io.xdr.delay=0;m._xdrReady.apply(m,[n,d]);};a.io.xdrResponse=function(d,m,p){var n=a.io._map[m.uid];n.xdrResponse.apply(n,[d,m,p]);};a.io.transport=function(m){var d=a.io._map["io:0"]||new a.IO();m.uid=d._uid;d.transport.apply(d,[m]);};a.io.xdr={delay:100};},"3.4.0",{requires:["io-base","datatype-xml"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("json-parse",function(b){function k(e){return(b.config.win||this||{})[e];}var j=k("JSON"),l=(Object.prototype.toString.call(j)==="[object JSON]"&&j),f=!!l,o=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,p=/[^\],:{}\s]/,n=function(e){return"\\u"+("0000"+(+(e.charCodeAt(0))).toString(16)).slice(-4);},c=function(r,e){var q=function(x,u){var t,s,w=x[u];if(w&&typeof w==="object"){for(t in w){if(w.hasOwnProperty(t)){s=q(w,t);if(s===undefined){delete w[t];}else{w[t]=s;}}}}return e.call(x,u,w);};return typeof e==="function"?q({"":r},""):r;},h=function(q,e){q=q.replace(o,n);if(!p.test(q.replace(m,"@").replace(d,"]").replace(g,""))){return c(eval("("+q+")"),e);}throw new SyntaxError("JSON.parse");};b.namespace("JSON").parse=function(q,e){if(typeof q!=="string"){q+="";}return l&&b.JSON.useNativeParse?l.parse(q,e):h(q,e);};function a(q,e){return q==="ok"?true:e;}if(l){try{f=(l.parse('{"ok":false}',a)).ok;}catch(i){f=false;}}b.JSON.useNativeParse=f;},"3.4.0");YUI.add("gallery-flickr-api",function(a){YUI.namespace("flickrAPITransactions");var k="http://api.flickr.com/services/rest/",m={format:"json",clientType:"yui-3-flickrapi-module"},f="flapicb",g=YUI.flickrAPITransactions,c=function(){return true},j=function(){return true},h=function(){return true},b={last_response_id:0,id_map:{},response_map:{},setResponse:function(p,o){var n=b;n.response_map[p]=o;return n.response_map[p]},setId:function(q,p){var o=b,n=p;o.id_map[q]=n;o.last_response_id=n;return n}},e=function(q){var n="";for(var p in q){if(q.hasOwnProperty(p)){n+=p+"="+q[p]+"&"}}return n.substr(0,n.length-1)},i=function(u,r,n,p){var t=b,s,o;if(p){try{s=a.JSON.parse(r[1].responseText)}catch(q){a.log("invalid JSON","error","flickrAPI")}o=[{params:r[2].params,data:s}].concat(r)}else{s=(t.response_map[t.id_map[r[0].tId]])?t.response_map[t.id_map[r[0].tId]][0]:null;o=[{params:r[0].data,data:s}].concat(r)}if(s&&n){if(s.stat==="ok"){return u.apply(a,o)}else{if("fail"){a.log(s.message,"error","flickrAPI");return this.failure.apply(a,o)}}}else{if(n===0){this.failure.apply(a,o)}else{if(u){return u.apply(a,o)}}}},d=function(p,r,q){var o=b.last_response_id+1,n=a.Get.script(p+"?"+e(r)+"&jsoncallback=YUI.flickrAPITransactions."+f+o+"&cachebust="+(new Date()).getTime(),q);b.setId(n.tId,o);g[f+o]=function(s){var t=b.setResponse(o,arguments);if(t){a.later(1000,a,function(){delete g[f+o]})}};return n},l=function(n,p,o){a.use("io",function(q){q.io(n,{method:"POST",data:e(p),timeout:30000,on:o,"arguments":{params:p}})})};a.flickrAPI={callMethod:function(o,q,n,s){s=s||{};oYUIPOSTConf=s||{};q=q||{};var p=k;q=a.merge(a.config.flickrAPI,q);if(q.flickr_api_uri){p=q.flickr_api_uri;delete q.flickr_api_uri}a.Object.each(q,function(v,t,u){u[t]=encodeURIComponent(v)});q.method=o;if(a.Lang.isFunction(n)){n={success:n,failure:c,progress:j,timeout:h}}if(a.Lang.isObject(n)){s=a.merge(s,{onSuccess:function(){a.fire("flickrAPI:success");return i.apply(n,[n.success,arguments,1])},onFailure:function(){if(b.response_map[b.id_map[arguments[0].tId]]!==null){a.log("Your request (ID:"+arguments[0].tId+") has failed.","error","flickrAPI");a.fire("flickrAPI:failure");return i.apply(n,[n.failure,arguments,0])}},onProgress:function(){a.fire("flickrAPI:progress");return i.apply(n,[a.Lang.isFunction(n.progress)?n.progress:function(){},arguments,null])},onTimeout:function(){a.log("Your request (ID:"+arguments[0].tId+") has timed out","error","flickrAPI");g[f+b.id_map[arguments[0].tId]]=function(){a.log("A response callback was fired but suppressed because of a timeout enforced by configuration.","warn","flickrAPI")};b.response_map[b.id_map[arguments[0].tId]]=null;a.Get.abort(arguments[0].tId);a.fire("flickrAPI:timeout");return i.apply(n,[n.timeout,arguments,0])}});oYUIPOSTConf=a.merge(oYUIPOSTConf,{success:function(){a.fire("flickrAPI:success");return i.apply(n,[n.success,arguments,1,1])},failure:function(){a.log("Your request (ID:"+arguments[0].tId+") has failed.","error","flickrAPI");a.fire("flickrAPI:failure");return i.apply(n,[n.failure,arguments,0,1])},timeout:function(){a.log("Your request (ID:"+arguments[0].tId+") has timed out","error","flickrAPI");a.fire("flickrAPI:timeout");return i.apply(n,[n.timeout,arguments,0,1])}})}s.scope=a;var r=a.merge(s.data,m,q);s.data=r;if(/(?:add|create|delete|edit|mute|post|record|remove|set|submit|unmute|move|sort|hide|block|unblock|insert|promote)[a-zA-Z]*$/.test(r.method)){r.nojsoncallback=1;return l(p,r,oYUIPOSTConf)}else{return d(p,r,s)}}}},"gallery-a-002",{requires:["event"]});YUI.add("bo-selecta-global-search-datasource",function(a){a.BoSelectaGlobalSearchDataSource=function(b){a.BoSelectaGlobalSearchDataSource.superclass.constructor.apply(this,arguments);this.request=null;this.selector=b.selector};a.extend(a.BoSelectaGlobalSearchDataSource,a.DataSource.Local,{_defRequestFn:function(d){var c,b=this;if(this.request&&this.request.readyState<4){this.request.abort()}this.selector.loadingBox.setStyle("display","block");c=decodeURIComponent(d.request);this.request=a.flickrAPI.callMethod("flickr.people.search",{username:c},{success:function(j,p){var q=j.data,i=j.params;if(!b.selector.searchingGlobally){b.selector.loadingBox.setStyle("display","none");return}var l=[];var r=q.people.person;var k,h;for(var g=0,m=r.length;g<m;g++){h=r[g];k={n:h.nsid,e:h.email,u:h.username,r:h.realname,a:h.path_alias,d:h.friend,y:h.family,s:h.iconserver,f:h.iconfarm};k[0]=h.name;k.i=(k.f&&k.f!==0&&k.s&&k.s!==0)?"http://farm"+k.f+".static"+(a.config.flickr.dev?"-dev":"")+".flickr.com/"+k.s+"/buddyicons/"+k.n+".jpg":"http://www.flickr.com/images/buddyicon.jpg";l.push(k)}if(l.length===0){if(!b.selector.hideNoContactMessage){l.push({message:a.transjax.get("bo-selecta","bo_selecta_no_members_found"),disableActive:true})}if(b.selector.zeroResultsMessages.length>0){var f,o,e;for(var g=0,m=b.selector.zeroResultsMessages.length;g<m;g++){f=b.selector.zeroResultsMessages[g];if(f.validator(b.selector)){l.push(f)}}}}b.selector.loadingBox.setStyle("display","none");b.fire("data",a.mix({data:l},d))},failure:function(g,f){var e=g.data,i=g.params,h=[];h.push({message:a.transjax.get("bo-selecta","too_many_results"),totalResultsMessage:true});b.selector.loadingBox.setStyle("display","none");b.fire("data",a.mix({data:h},d))}});return d.tId}})},"0.0.1",{requires:["bo-selecta-transjax","datasource-local","gallery-flickr-api"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datasource-function",function(b){var a=b.Lang,c=function(){c.superclass.constructor.apply(this,arguments);};b.mix(c,{NAME:"dataSourceFunction",ATTRS:{source:{validator:a.isFunction}}});b.extend(c,b.DataSource.Local,{_defRequestFn:function(h){var f=this.get("source"),g=h.details[0];if(f){try{g.data=f(h.request,this,h);}catch(d){g.error=d;}}else{g.error=new Error("Function data failure");}this.fire("data",g);return h.tId;}});b.DataSource.Function=c;},"3.4.0",{requires:["datasource-local"]});YUI.add("image-fader",function(b){function a(c,d){d=b.Lang.isNumber(d)?d:1;if(b.Lang.isString(c)){c=b.all(c)}c.on("load",function(g){var f=new b.Anim({node:g.target,to:{opacity:d},duration:0.2});f.run()})}b.imageFader={attach:a}},"0.0.1",{requires:["node","anim"]});YUI.add("string-filters",function(e){function d(q){return q.replace(/\n/g,"<br>")}function i(q){q=e.Lang.trim(q);q="<p>"+q+"</p>";q=q.replace(/<blockquote>(.*?)<\/blockquote>/g,"</p><blockquote><p>$1</p></blockquote><p>");q=q.replace(/(?:\r?\n){2,}/g,"</p><p>");q=q.replace(/(?:\r?\n){1}/g,"<br>");q=q.replace(/<p><\/p>/g,"");q=q.replace(/<br><\/p>/g,"</p>");q=q.replace(/<p><br>/g,"<p>");return q}function h(s,r){var q={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",402:"fnof",710:"circ",732:"tilde",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8226:"bull",8230:"hellip",8240:"permil",8242:"prime",8243:"Prime",8249:"lsaquo",8254:"oline",8260:"frasl",8250:"rsaquo",8364:"euro",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams"};if(r){return s.replace(/[\u00A0-\u2666<>\&]/g,function(t){return"&"+(q[t.charCodeAt(0)]?q[t.charCodeAt(0)]:"#"+t.charCodeAt(0))+";"})}else{s=s.replace(/&/g,"&amp;");s=s.replace(/"/g,"&quot;");s=s.replace(/</g,"&lt;");s=s.replace(/>/g,"&gt;");return s}}function p(r,q){if(q){var s=document.createElement("div");s.innerHTML=r;if(s.childNodes.length===0){return""}else{return s.childNodes[0].nodeValue===null?p(r,false):s.childNodes[0].nodeValue}return s.childNodes.length===0?"":s.childNodes[0].nodeValue}else{r=r.replace(/&amp;/g,"&");r=r.replace(/&quot;/g,'"');r=r.replace(/&lt;/g,"<");r=r.replace(/&gt;/g,">");return r}}function j(v,B,q){if(!q){q=" "}if(!B){B=""}B=B.replace(/\s/g,q);if(v.indexOf("http://")>-1){var x=v.split("\n");for(var w=0;w<x.length;w++){var s=x[w].split(" ");for(var A=0;A<s.length;A++){var C="";if(s[A].substr(0,1)==="("){s[A]=s[A].replace(/\(/g,"");C="("}if(s[A].substr(0,7)==="http://"){var r=s[A];var z="";if(r.substr(r.length-1,1)===")"){r=r.substr(0,r.length-1);z=")"}var u="";if(r.substr(r.length-1,1)==="."){r=r.substr(0,r.length-1);u="."}s[A]=('<a href="'+r+'" rel="nofollow" onclick="'+B+'">'+r+"</a>"+z+u).replace(/\s/g,q)}s[A]=C+s[A]}x[w]=s.join(" ")}v=x.join("\n")}return v}function l(q){if(e.config.flickr.lang&&e.config.flickr.lang!=="en-us"){return q}if(q.substr(q.length-1,1).toLowerCase()==="s"){return q+"'"}else{return q+"'s"}}function g(u,q,t,s){t=t||"\n";q=q||75;s=s||false;if(!u){return u}var r=".{1,"+q+"}(\\s|$)"+(s?"|.{"+q+"}|.+$":"|\\S+?(\\s|$)");return u.match(new RegExp(r,"g")).join(t)}function c(w,q,r,y){q=q||80;r=r||'<span class="breaking-non-space"> </span>';if(y!==false){y=true}var z=g(w,q,r,y);var x=z.split(r);if(x.length<=1){return w}var u="";for(var s=0,t=x.length,v=0;s<t-1;s++){v+=x[s].length;if(w[v]===" "){u+=x[s]+" ";v++}else{u+=x[s]+r}}u+=x[x.length-1];return u}function k(w){if(w===""||w===null||w===undefined){return""}w=w.toString();var r="";for(var u=0;u<w.length;u++){var x=w.charCodeAt(u);var t=[];if(x>65536){t[0]=240|((x&1835008)>>>18);t[1]=128|((x&258048)>>>12);t[2]=128|((x&4032)>>>6);t[3]=128|(x&63)}else{if(x>2048){t[0]=224|((x&61440)>>>12);t[1]=128|((x&4032)>>>6);t[2]=128|(x&63)}else{if(x>128){t[0]=192|((x&1984)>>>6);t[1]=128|(x&63)}else{t[0]=x}}}if(t.length>1){for(var s=0;s<t.length;s++){var q=t[s];var v=o((q&240)>>>4)+o(q&15);r+="%"+v}}else{if(encodeURIComponent&&typeof encodeURIComponent==="function"){r+=encodeURIComponent(String.fromCharCode(t[0]))}else{r+=(String.fromCharCode(t[0]))}}}return r}function a(u){if(u===""||u===null||u===undefined){return""}u=u.toString();var q="";for(var t=0;t<u.length;t++){var v=u.charCodeAt(t);var s=[];if(v>65536){s[0]=240|((v&1835008)>>>18);s[1]=128|((v&258048)>>>12);s[2]=128|((v&4032)>>>6);s[3]=128|(v&63)}else{if(v>2048){s[0]=224|((v&61440)>>>12);s[1]=128|((v&4032)>>>6);s[2]=128|(v&63)}else{if(v>128){s[0]=192|((v&1984)>>>6);s[1]=128|(v&63)}else{s[0]=v}}}if(s.length>1){for(var r=0;r<s.length;r++){q+=(String.fromCharCode(s[r]))}}else{q+=(String.fromCharCode(s[0]))}}return q}function o(q){var r="0123456789ABCDEF";return r.charAt(q)}function b(q){return q.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function m(s,q,r){q=q||30;r=e.Lang.isString(r)?r:"...";if(s.length>q){s=s.slice(0,q-r.length)+r}return s}function n(t){var q,s,r;q=["(?:ae|)","(?:oe|)","(?:ss|)","(?:th|)","[a]","[e3]","[i]","[o]","[u]","[y]","[c]","[d]","[f]","[g]","[h]","[j]","[k]","[l]","[n]","[r]","[s]","[t]","[z]"];s=q.length;for(r=0;r<s;r++){t=t.replace(new RegExp(q[r],"gi"),q[r])}return t}function f(r){var q=/^[a-z_0-9\.\-\+]+@[a-z_0-9\.\-\+]+\.[a-z]/i;return q.test(r)}e.StringFilters={nl2br:d,nl2p:i,escape_entities:h,unescape_entities:p,linkify:j,possess:l,wordwrap:g,zero_width_wordwrap:c,escape_utf8:k,escape_utf8_bytes:a,strip_tags:b,truncate:m,substitute_equivalent_chars:n,is_email_address:f}},"0.0.1",{requires:F.config.modules["string-filters"].requires||[],optional:F.config.modules["string-filters"].optional||[]});YUI.add("bo-selecta-3",function(b){b.BoSelecta3=function(d,c){c=c||{};this.showUsername=c.showUsername||true;this.showSubtitle=c.showSubtitle||false;this.showIcon=c.showIcon||false;this.showRelationship=c.showRelationship||false;this.usePersonMenu=c.usePersonMenu||false;this.linkUsernameToPhotostream=c.linkUsernameToPhotostream||false;this.linkSubtitle=c.linkSubtitle||false;this.showEditRelationshipLink=c.showEditRelationshipLink||false;this.searchOnUsername=c.searchOnUsername||true;this.searchOnRealname=c.searchOnRealname||false;this.searchOnEmail=c.searchOnEmail||false;this.searchOnPathAlias=c.searchOnPathAlias||false;this.includeUser=c.includeUser||false;this.includeAddressBook=c.includeAddressBook||false;this.maxResultsDisplayed=c.maxResultsDisplayed||5;this.globalMaxResultsDisplayed=c.globalMaxResultsDisplayed||10;this.showTotalResults=c.showTotalResults||false;this.disableMouseHover=c.disableMouseHover||false;this.selectFirstItem=c.selectFirstItem||false;this.hideNoContactMessage=c.hideNoContactMessage||false;this.zeroResultsMessages=c.zeroResultsMessages||[];this.preloadText=c.preloadText||"";this.defaultText=c.defaultText||"";this.loadingText=c.loadingText||b.transjax.get("bo-selecta","loading");this.focusOnFetch=c.focusOnFetch||false;this.fetchDataImmediately=c.fetchDataImmediately||false;this.allowNoContacts=c.allowNoContacts||false;this.allowFormSubmit=c.allowFormSubmit||false;this.respectCanTagFlag=c.respectCanTagFlag||false;this.apiURL=c.apiURL||b.config.flickr.people.api_url;this.enableGlobalSearch=c.enableGlobalSearch||false;this.defaultContainerWidth=c.defaultContainerWidth||250;this.minListWidth=c.minListWidth||228;this.loadTransparently=c.loadTransparently||false;if(this.includeUser){this.meString=b.transjax.get("bo-selecta","me").toLowerCase()}this.contacts=null;this.skipList={};this.shadowInit=false;this.fetchingData=false;this.haveTriedToFetchData=false;this.searchingGlobally=false;this._initHTML(d);this._initAutoComplete();if(this.fetchDataImmediately){this.fetchData()}};b.augment(b.BoSelecta3,b.EventTarget);b.BoSelecta3.prototype._initHTML=function(e){if(b.Lang.isString(e)){e=b.one(e)}if(!e instanceof b.Node){e=b.one("#BoSelecta_input")}this.inputField=e;this.container=this.inputField.get("parentNode");var c=this.container.all(".no-js-fallback");c.setStyle("display","none");this.container.addClass("bo-selecta-3");this.container.addClass("yui-skin-sam");this.containerId=b.stamp(this.container);this.inputField.addClass("input");var d=this.container.all(".loading");if(d.size()>0){this.loadingBox=d.item(0);this.loadingBox.setStyle("display",this.fetchDataImmediately&&!this.loadTransparently?"block":"none")}else{this.loadingBox=b.Node.create('<div class="loading">'+this.loadingText+"</div>");this.loadingBox.setStyle("display",this.fetchDataImmediately&&!this.loadTransparently?"block":"none");this.container.append(this.loadingBox)}this.inputField.set("disabled",false);this.inputField.set("value",this.preloadText);this.inputField.addClass("grey");this.inputField.on("focus",this.clearDefaultText,this,true);this.inputField.on("blur",function(f){if(this.inputField.get("value")===""){this.restoreDefaultText()}},this,true);if(!this.allowFormSubmit){this.form=this.container.ancestor("form");if(this.form){this.form.on("submit",function(f){f.halt()})}}this.maxInputWidth=parseInt(this.container.getStyle("width"),10)||this.defaultContainerWidth;this.defaultInputWidth=parseInt(this.inputField.getStyle("width"),10)||this.defaultContainerWidth};b.BoSelecta3.prototype._initAutoComplete=function(){var c=this;this.contactsCacheDataSource=new b.DataSource.Function({source:function(d){return c._searchContacts(d)}});this.globalSearchDataSource=new b.BoSelectaGlobalSearchDataSource({selector:this});this.autoComp=new b.AutoComplete({inputNode:this.inputField,source:this.contactsCacheDataSource,resultTextLocator:function(d){if(d&&d.u){return d.u}return""},resultFormatter:function(f,d,e){return c._formatResult(f,d,e)},activateFirstItem:this.selectFirstItem,queryDelay:0,render:true});this.autoComp.on("select",this._onItemSelectEvent,this,true);this.autoComp.on("query",this._handleQueryChange,this,true);this.autoComp.after("query",this._resizeListToFit,this,true);this.inputField.on("keydown",this._onInputFieldKeyDown,this,true);this.inputField.on("focus",function(f){var d=c.getQuery();if(d){c.autoComp.sendRequest(d)}});this.inputField.on("blur",function(d){var f=c.autoComp.get("visible");if(f&&!c.resultsHideHandler){c.resultsHideHandle=b.one("document").on("click",function(g){if(g.target.ancestor(".yui3-aclist-item")){return}b.fire("flickr-menus:hide");c.resultsHideHandle.detach()})}});b.on("flickr-menus:hide",this.hideResults,this,true)};b.BoSelecta3.prototype._fetchData=function(){if(this.fetchingData){return}this.fetchingData=true;this.haveTriedToFetchData=true;this.fire("BoSelecta:dataFetchStart");if(!this.loadTransparently){this.inputField.setStyle("display","none");this.loadingBox.setStyle("display","block")}var c=this.apiURL;var d=this;var e={success:function(f,g,l){if(g.responseText==="-1"||g.responseText===""){if(d.allowNoContacts){d.contacts=[];if(!d.loadTransparently){d.restoreDefaultText();d.loadingBox.setStyle("display","none");d.inputField.setStyle("display","inline");if(d.inputField.get("value")===""||d.focusOnFetch){d.clear(true)}}d.fire("BoSelecta:dataFetchComplete")}else{e.failure()}return}var k=g.responseText.split("\u0002")[1];var p="\u0003";var m="\u0001";d.contacts=k.split(p);var i;for(var h=0,j=d.contacts.length;h<j;h++){i=d.contacts[h].split(m);if(i.length===0){continue}d.contacts[h]={};d.contacts[h].n=i[0];d.contacts[h].e=i[1];d.contacts[h].u=i[2];d.contacts[h].r=i[3];d.contacts[h].s=i[4];d.contacts[h].f=i[5];d.contacts[h].a=i[6];d.contacts[h].d=i[7];d.contacts[h].y=i[8];d.contacts[h].c=i[9];d.contacts[h][0]=d.contacts[h].u}if(!d.loadTransparently){d.restoreDefaultText();d.loadingBox.setStyle("display","none");d.inputField.setStyle("display","inline");if(d.focusOnFetch){d.clear(true)}}d.fetchingData=false;d.fire("BoSelecta:dataFetchComplete")},failure:function(i,h,g){d.autoComp.destroy();if(d.form&&d.form.get("tagName").toLowerCase()==="form"){b.Event.purgeElement(d.form)}var f=d.inputField.get("parentNode");f.all(".no-js-fallback").setStyle("display","");d._destroy();d.fetchingData=false;d.fire("BoSelecta:dataError")}};if(!c){e.failure();return}b.io(c,{method:"GET",on:e})};b.BoSelecta3.prototype._destroy=function(d){var c=this.inputField.get("parentNode");b.Event.purgeElement(this.inputField);this.inputField.removeClass("grey");this.inputField.removeClass("yui-ac-input");this.inputField.set("value","");this.inputField.setStyle("display","");this.inputField.removeClass("input");if(d){this.inputField.remove()}this.loadingBox.remove();c.removeClass("yui-skin-sam");c.removeClass("bo-selecta-3")};b.BoSelecta3.prototype._searchContacts=function(q){var r,i=[],s,o=this;if(q===""||(q&&q===this.defaultText)){return i}if(q&&typeof q==="string"&&this.contacts){s=q;q=this._escapeForRegEx(q);q=b.StringFilters.substitute_equivalent_chars(q);var j=new RegExp(q,"i"),p,k;for(var f=0,l=this.contacts.length;f<l;f++){k=false;p=this.contacts[f];p.matched=null;if(p.n&&(!this.includeUser||s===this.meString)&&p.n===b.config.flickr.user.nsid){if(s===this.meString&&!this.skipList[p.n]){r=p}continue}if(this.skipList&&(this.skipList[p.n]||this.skipList[p.e])){continue}if(this.searchOnUsername&&p.u&&p.u.search(j)!==-1){k=true;p.matched="username";p.matchedPos=p.u.search(j)}if(!k&&this.searchOnRealname&&p.r&&p.r.search(j)!==-1){k=true;p.matched="realname";p.matchedPos=p.r.search(j)}if(!k&&this.searchOnEmail&&p.e&&q!=="@"&&p.e.search(j)!==-1){k=true;p.matched="email";p.matchedPos=p.e.search(j)}if(!k&&this.searchOnPathAlias&&p.a&&p.a.search(j)!==-1){k=true;p.matched="path_alias";p.matchedPos=p.a.search(j)}if(k){i.push(p)}}}if(i.length===0&&!(s===this.meString&&r)){if(!this.hideNoContactMessage){i.push({message:b.transjax.get("bo-selecta","bo_selecta_no_contacts_found"),notFoundLink:true,disableActive:true});if(this.enableGlobalSearch){i.push({globalSearchLink:true,query:s,message:b.transjax.get("bo-selecta","bo_selecta_global_search_msg")})}}if(this.zeroResultsMessages.length>0){var e,t,d;for(var f=0,l=this.zeroResultsMessages.length;f<l;f++){e=this.zeroResultsMessages[f];if(e.validator(this)){i.push(e)}}}}else{for(var f=0,l=i.length;f<l;f++){if(!i[f].n&&!i[f].u){for(var h=0,l=i.length;h<l;h++){if(f!==h&&i[f]&&i[h]&&i[f].e===i[h].e){delete i[f];break}}}}for(var f=0,l=i.length;f<l;){if(!i[f]){i.splice(f,1);l--}else{f++}}var g={username:0,realname:1,email:2,path_alias:3};i.sort(function(w,m){var v=(w.n&&w.u)?"contact":"addressBookEntry";var x=(m.n&&m.u)?"contact":"addressBookEntry";if(v!==x){return(v==="contact")?-1:1}if(w.matchedPos===m.matchedPos){if(g[w.matched]===g[m.matched]){var y=w.u.charCodeAt(0),n=m.u.charCodeAt(0);if(y===n){return 0}else{if(y<n){return -1}else{return 1}}}else{if(g[w.matched]<g[m.matched]){return -1}else{return 1}}}else{if(w.matchedPos<m.matchedPos){return -1}else{return 1}}});if(s===this.meString&&r){r.matched="username";i.unshift(r)}var u=i.length;i=i.splice(0,this.maxResultsDisplayed);if(this.showTotalResults){var c="/search/people/?q=%s&m=names&see=all";i.push({message:b.transjax.get("bo-selecta","uber_contact_list_max_results").replace(/\[results_shown\]/,Math.min(i.length,this.maxResultsDisplayed)).replace(/\[total_results\]/,u).replace(/\[url\]/,c),totalResultsMessage:true})}}if(this.showEditRelationshipLink&&!this.relationshipLinksInitialized){b.use("contact-changer",function(m){o.container.delegate("click",function(n){m.contact_changer.show(n.target.getAttribute("data-nsid"));n.preventDefault()},".edit-rel a");o.relationshipLinksInitialized=true})}return i};b.BoSelecta3.prototype._formatResult=function(h,q,i){var j=this,s,l=[],v,e,d,m,c=!h?null:new RegExp(b.StringFilters.substitute_equivalent_chars(j._escapeForRegEx(h)),"gi"),k,g,o,u,r,f;if(!h){h=""}for(var p=0,t=q.length;p<t;p++){s=q[p].raw;if(!s){continue}if(s.globalSearchLink){v='<p class="bs-global-search-link bs-message bs-onclick"><span>'+s.message+"</span></p>";l.push(v);continue}if(s.totalResultsMessage){v='<p class="bs-message bs-total-results bs-disable-active"><span>'+s.message+"</span></p>";l.push(v);continue}if(s.message){v='<p class="bs-message'+(s.notFoundLink?"":" bs-onclick")+(s.disableActive?" bs-disable-active":"")+(s.className?" "+s.className:"")+'">'+s.message+"</p>";l.push(v);continue}m=(j.respectCanTagFlag&&s.c==="0")?' class="disabled"':"";if(s.e&&!s.u&&!s.n){if(!s.i){s.i="/images/icon_unread.gif"}e=j.showIcon?'<img src="'+s.i+'" width="16" height="16" class="BuddyIconX bs-email-icon">':"";d='<p email="'+s.e+'"'+m+'><span class="name name-email">'+e+'<strong class="username">'+a(s.e,c)+'</strong></span><span class="relationship"></span></p>';l.push(d);continue}k=(s.a)?s.a:s.n;g=' / <a href="/people/'+k+'/">'+b.transjax.get("bo-selecta","uber_contact_list_view_profile")+"</a>";if(!s.i){s.i=(s.f&&s.f!==0&&s.s&&s.s!==0)?"http://farm"+s.f+".static"+(b.config.flickr.dev?"-dev":"")+".flickr.com/"+s.s+"/buddyicons/"+s.n+".jpg":"http://www.flickr.com/images/buddyicon.jpg"}o="";if(j.showRelationship){if(s.d==="1"&&s.y==="1"){o+=b.transjax.get("bo-selecta","uber_contact_list_friend_and_family")}else{if(s.d==="1"){o+=b.transjax.get("bo-selecta","uber_contact_list_friend")}else{if(s.y==="1"){o+=b.transjax.get("bo-selecta","uber_contact_list_family")}else{if(s.removed==="1"){o+='<em class="contact-removed">'+b.transjax.get("bo-selecta","uber_contact_list_removed")+"</em>"}else{if(j.searchingGlobally){o+=""}else{o+=b.transjax.get("bo-selecta","uber_contact_list_contact")}}}}}if(j.showEditRelationshipLink&&!j.searchingGlobally){o+=' <span class="edit-rel">(<a href="/people/'+k+'/relationship/" data-nsid="'+s.n+'">'+b.transjax.get("bo-selecta","uber_contact_list_edit")+"</a>)</span>"}}e=j.showIcon?'<img src="'+s.i+'" width="24" height="24" class="BuddyIconX fade-in" nsid="'+s.n+'">':"";e=j.linkUsernameToPhotostream?'<a href="/photos/'+k+'/">'+e+"</a>":e;u=j.showUsername?a(s.u,c):"";u=j.linkUsernameToPhotostream?'<strong class="username"><a href="/photos/'+k+'/">'+u+"</a></strong>":'<strong class="username">'+u+"</strong>";r="";if(j.showSubtitle){if(!s.matched||s.matched==="realname"){r=s.r?a(s.r,c):b.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(s.matched==="username"){r=s.r?j._sanitizeString(s.r):b.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(s.matched==="email"){r=a(s.e,c)}else{if(s.matched==="path_alias"&&s.a){r="flickr.com/people/"+a(s.a,c)+"/"}}}}r=j.linkSubtitle?'<a title="'+b.transjax.get("bo-selecta","uber_contact_list_view_profile")+'" href="/people/'+k+'/" class="realname">'+r+"</a>":'<span class="realname">'+r+"</span>"}f=b.Node.create('<p nsid="'+s.n+'"'+m+'><span class="name">'+e+u+r+'</span><span class="relationship">'+o+"</span></p>");b.imageFader.attach(f.all("img"));l.push(f)}return l};function a(g,e){if(!g){return g}var c,d,f;g=b.StringFilters.unescape_entities(g,true);d=e?g.search(e):-1;if(d===-1){return b.BoSelecta3.sanitizeString(g)}c=g.match(e);f=d+c[0].length;return b.StringFilters.escape_entities(b.BoSelecta3.sanitizeString(g.substring(0,d)),true)+'<span class="term-highlight">'+b.StringFilters.escape_entities(b.BoSelecta3.sanitizeString(g.substring(d,f)),true)+"</span>"+b.StringFilters.escape_entities(b.BoSelecta3.sanitizeString(g.substring(f,g.length)),true)}b.BoSelecta3.prototype._resizeListToFit=function(i){var g,f,d=this.minListWidth,h,j,c;if(i.type==="autocompleteList:query"||(i.type==="autocompleteList:visibleChange"&&i.newVal===true)){g=i.currentTarget;f=g.get("listNode");f.all("li p").each(function(e){h=e.one(".name");j=e.one(".relationship");if(h&&j){c=h.get("offsetWidth")+j.get("offsetWidth")+12;if(c>d){d=c}}});if(!this.baseListWidth){this.baseListWidth=g.get("width")}g.set("width",(d>this.baseListWidth)?d:this.baseListWidth)}};b.BoSelecta3.prototype._attachIconEvents=function(e){if(!personmenu_process_img||typeof personmenu_process_img!=="function"){return}var g=e.all("img"),d;for(var f=0,c=g.size();f<c;f++){d=b.Node.getDOMNode(g.item(f));if(g.item(f).hasClass("BuddyIconX")){d.nsid=g.item(f).getAttribute("nsid");personmenu_process_img(d)}}};b.BoSelecta3.prototype._useGlobalSearch=function(d){var c=this;this.searchingGlobally=true;if(d){this.inputField.set("value",decodeURIComponent(d))}this.autoComp.set("source",this.globalSearchDataSource);this.autoComp.set("minQueryLength",2);this.autoComp.set("maxResultsDisplayed",this.globalMaxResultsDisplayed);this.autoComp.set("queryDelay",600);this.loadingBox.addClass("loading-global").removeClass("loading");this.loadingBox.set("innerHTML","");this.globalSearchRemover=this.inputField.on("keyup",function(f){if(c.inputField.get("value")===""){c.globalSearchRemover.detach();c._useContactsCache()}});d=this.getQuery();this.autoComp.sendRequest(d)};b.BoSelecta3.prototype._useContactsCache=function(c){this.searchingGlobally=false;if(c){this.inputField.set("value",decodeURIComponent(c))}this.autoComp.set("source",this.contactsCacheDataSource);this.autoComp.set("minQueryLength",1);this.autoComp.set("maxResultsDisplayed",0);this.autoComp.set("queryDelay",0)};b.BoSelecta3.prototype._onItemSelectEvent=function(f,d){var c=f.result.raw;if(c.message){if(c.globalSearchLink){this._useGlobalSearch(c.query)}else{if(c.onclick&&typeof c.onclick==="function"){c.onclick(f,this)}else{this.clear()}}f.preventDefault();return}this.fire("BoSelecta:resultSelect",c,c.query);if(this.searchingGlobally){this._useContactsCache()}};b.BoSelecta3.prototype._handleQueryChange=function(c){this.fire("BoSelecta:queryChange",c.query)};b.BoSelecta3.prototype._onInputFieldKeyDown=function(d){if(d.keyCode===13&&this.autoComp){var f=false;if(this.autoComp._oCurItem){var c=b.one(this.autoComp._oCurItem).all("p");if(c.size()>0){f=(c.item(0).hasClass("bs-message")&&!c.item(0).hasClass("bs-onclick"))}}if(!this.autoComp._oCurItem||f){this.fire("BoSelecta:inputEnter")}}};b.BoSelecta3.prototype._sanitizeString=function(c){c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;");return c};b.BoSelecta3.prototype._unsanitizeString=function(c){c=c.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");return c};b.BoSelecta3.prototype._escapeForRegEx=function(c){c=decodeURIComponent(c);c=c.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/\?/g,"\\?");c=c.replace(/\|/g,"\\|").replace(/\+/g,"\\+").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]");return c};b.BoSelecta3.prototype.fetchData=function(){if(!this.contacts&&!this.haveTriedToFetchData){this._fetchData()}};b.BoSelecta3.prototype.refreshData=function(){this._fetchData()};b.BoSelecta3.prototype.hideResults=function(){if(this.autoComp&&this.autoComp.hide){this.autoComp.hide()}if(this.resultsHideHandle&&this.resultsHideHandle.detach){this.resultsHideHandle.detach()}};b.BoSelecta3.prototype.clear=function(c){this.inputField.removeClass("grey");this.inputField.set("value","");if(c){try{this.inputField.focus()}catch(d){}}this.hideResults()};b.BoSelecta3.prototype.clearDefaultText=function(c){if(this.inputField.hasClass("grey")){this.clear(c)}};b.BoSelecta3.prototype.restoreDefaultText=function(){this.clear();this.inputField.addClass("grey");this.inputField.set("value",this.defaultText);this.inputField.blur()};b.BoSelecta3.prototype.getQuery=function(){if(this.inputField.hasClass("grey")){return""}return this.inputField.get("value")};b.BoSelecta3.prototype.refreshResults=function(){if(this.autoComp&&this.getQuery()){this.autoComp.sendRequest(this.getQuery())}};b.BoSelecta3.prototype.skipContact=function(c){this.skipList[(c.n?c.n:c.e)]=true};b.BoSelecta3.prototype.unskipContact=function(c){this.skipList[(c.n?c.n:c.e)]=false};b.BoSelecta3.prototype.unskipAll=function(){this.skipList={}};b.BoSelecta3.prototype.showInFieldLoading=function(){this.loadingBox.addClass("loading-global");this.loadingBox.removeClass("loading");this.loadingBox.setStyle("display","block")};b.BoSelecta3.prototype.hideInFieldLoading=function(){this.loadingBox.setStyle("display","")};b.BoSelecta3.prototype.destroy=function(){this._destroy(true)};b.BoSelecta3.sanitizeString=b.BoSelecta3.prototype._sanitizeString;b.BoSelecta3.unsanitizeString=b.BoSelecta3.prototype._unsanitizeString},"0.0.1",{requires:F.config.modules["bo-selecta-3"].requires||[],optional:F.config.modules["bo-selecta-3"].optional||[]});YUI.add("focus-tracker",function(g){var a=false,e,b=/^text|search|tel|url|email|password|number$/i;if(F&&F.focus_tracker){el=F.focus_tracker.get();if(el){a=true;e=g.one(el)}F.focus_tracker.destroy()}g.one("document").on("focus",function(h){a=true;e=h.target});g.one("document").on("blur",function(h){a=false;e=null});function c(){if(a&&e&&e.get("ownerDocument")&&e.inDoc()){return e}else{return undefined}}function d(){if(c()!==undefined){var h=e.get("tagName"),i;if(h){h=h.toUpperCase();if(h==="INPUT"){return b.test(e.get("type"))}else{if(h==="TEXTAREA"||h==="SELECT"){return true}}}}return false}function f(){if(c()!==undefined){if(g.Lang.isFunction(e.blur)){try{e.blur()}catch(h){}}a=false;e=null}}g.focusTracker={get:c,isInput:d,blur:f}},"0.0.1",{requires:F.config.modules["focus-tracker"].requires||[],optional:F.config.modules["focus-tracker"].optional||[]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("cookie",function(c){var k=c.Lang,i=c.Object,g=null,d=k.isString,n=k.isObject,f=k.isUndefined,e=k.isFunction,h=encodeURIComponent,b=decodeURIComponent,m=c.config.doc;function j(o){throw new TypeError(o);}function l(o){if(!d(o)||o===""){j("Cookie name must be a non-empty string.");}}function a(o){if(!d(o)||o===""){j("Subcookie name must be a non-empty string.");}}c.Cookie={_createCookieString:function(q,t,r,p){p=p||{};var v=h(q)+"="+(r?h(t):t),o=p.expires,u=p.path,s=p.domain;if(n(p)){if(o instanceof Date){v+="; expires="+o.toUTCString();}if(d(u)&&u!==""){v+="; path="+u;}if(d(s)&&s!==""){v+="; domain="+s;}if(p.secure===true){v+="; secure";}}return v;},_createCookieHashString:function(o){if(!n(o)){j("Cookie._createCookieHashString(): Argument must be an object.");}var p=[];i.each(o,function(r,q){if(!e(r)&&!f(r)){p.push(h(q)+"="+h(String(r)));}});return p.join("&");},_parseCookieHash:function(s){var r=s.split("&"),t=g,q={};if(s.length){for(var p=0,o=r.length;p<o;p++){t=r[p].split("=");q[b(t[0])]=b(t[1]);}}return q;},_parseCookieString:function(w,y){var x={};if(d(w)&&w.length>0){var o=(y===false?function(z){return z;}:b),u=w.split(/;\s/g),v=g,p=g,r=g;for(var q=0,s=u.length;q<s;q++){r=u[q].match(/([^=]+)=/i);if(r instanceof Array){try{v=b(r[1]);p=o(u[q].substring(r[1].length+1));}catch(t){}}else{v=b(u[q]);p="";}x[v]=p;}}return x;},_setDoc:function(o){m=o;},exists:function(o){l(o);var p=this._parseCookieString(m.cookie,true);return p.hasOwnProperty(o);},get:function(p,o){l(p);var s,q,r;if(e(o)){r=o;o={};}else{if(n(o)){r=o.converter;}else{o={};}}s=this._parseCookieString(m.cookie,!o.raw);q=s[p];if(f(q)){return g;}if(!e(r)){return q;}else{return r(q);}},getSub:function(o,q,p){var r=this.getSubs(o);if(r!==g){a(q);if(f(r[q])){return g;}if(!e(p)){return r[q];}else{return p(r[q]);}}else{return g;}},getSubs:function(o){l(o);var p=this._parseCookieString(m.cookie,false);if(d(p[o])){return this._parseCookieHash(p[o]);}return g;},remove:function(p,o){l(p);o=c.merge(o||{},{expires:new Date(0)});return this.set(p,"",o);},removeSub:function(p,s,o){l(p);a(s);o=o||{};var r=this.getSubs(p);if(n(r)&&r.hasOwnProperty(s)){delete r[s];if(!o.removeIfEmpty){return this.setSubs(p,r,o);}else{for(var q in r){if(r.hasOwnProperty(q)&&!e(r[q])&&!f(r[q])){return this.setSubs(p,r,o);}}return this.remove(p,o);}}else{return"";}},set:function(p,q,o){l(p);if(f(q)){j("Cookie.set(): Value cannot be undefined.");}o=o||{};var r=this._createCookieString(p,q,!o.raw,o);m.cookie=r;return r;},setSub:function(p,r,q,o){l(p);a(r);if(f(q)){j("Cookie.setSub(): Subcookie value cannot be undefined.");}var s=this.getSubs(p);if(!n(s)){s={};}s[r]=q;return this.setSubs(p,s,o);},setSubs:function(p,q,o){l(p);if(!n(q)){j("Cookie.setSubs(): Cookie value must be an object.");}var r=this._createCookieString(p,this._createCookieHashString(q),false,o);m.cookie=r;return r;}};},"3.4.0",{requires:["yui-base"]});YUI.add("global-dialog-transjax",function(a){a.transjax.add("global-dialog",{button_confirm:'OKAY',button_cancel:'CANCEL'})},"0.0.1",{requires:["transjax-base"]});YUI.add("keyboard-shortcut-legend-transjax",function(a){a.transjax.add("keyboard-shortcut-legend",{header_no_context:'Keyboard shortcuts for this page',header_context:'Keyboard shortcuts for this view',instructions:'This dialog lists all of the keyboard shortcuts available on this particular page. Press any key on your keyboard to hear what it does.',enable_shortcuts:'Enable keyboard shortcuts',saving:'Saving...',saved:'Saved!',unable_to_save:'Unable to save',button_close:'CLOSE',shortcut_description:'Show all keyboard shortcuts',esc_description:'Close a dialog, like this one',esc_description_screenreader:'(press escape again to close this dialog)',general:'General',navigation:'Navigation',lightbox:'Light Box',map:'Map',actions:'Actions',you_can_reenable_shortcuts_in_prefs:'You can always <a href="/account/prefs/shortcuts/?from=extend">re-enable keyboard shortcuts</a> later in your account settings, under Sharing &amp; Extending.',change_layout:'change',qwerty_layout:'QWERTY layout',spanish_layout:'Spanish layout',qwertz_layout:'QWERTZ layout',azerty_layout:'AZERTY layout',dvorak_layout:'Dvorak layout',spanish:'Spanish',layout_selector_description:'Select a keyboard layout',up_arrow:'Up arrow',down_arrow:'Down arrow',left_arrow:'Left arrow',right_arrow:'Right arrow'})},"0.0.1",{requires:F.config.modules["keyboard-shortcut-legend-transjax"].requires||[]});YUI.add("keyboard-shortcut-legend-layouts",function(e){var d,c,f,b,a;d=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{keyCode:192,sub:"`",sup:"~"},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:"@"},{keyCode:51,sub:"3",sup:"#"},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"^"},{keyCode:55,sub:"7",sup:"&"},{keyCode:56,sub:"8",sup:"*"},{keyCode:57,sub:"9",sup:"("},{keyCode:48,sub:"0",sup:")"},{keyCode:189,sub:"-",sup:"_"},{keyCode:187,sub:"=",sup:"+"},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:81,sub:"Q",sup:""},{keyCode:87,sub:"W",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{keyCode:219,sub:"[",sup:"{"},{keyCode:221,sub:"]",sup:"}"},{keyCode:220,sub:"\\",sup:"|"}],[{keyCode:65,sub:"A",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{keyCode:186,sub:";",sup:":"},{keyCode:222,sub:"'",sup:'"'},{keyCode:13,sub:"return",sup:"",className:"return"}],[{keyCode:90,sub:"Z",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:188,sub:",",sup:"<"},{keyCode:190,sub:".",sup:">"},{keyCode:191,sub:"/",sup:"?"},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]];b=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{sub:"<",sup:">"},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:'"'},{keyCode:51,sub:"3",sup:"#"},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"&"},{keyCode:55,sub:"7",sup:"/"},{keyCode:56,sub:"8",sup:"("},{keyCode:57,sub:"9",sup:")"},{keyCode:48,sub:"0",sup:"="},{keyCode:222,sub:"'",sup:"?"},{sub:"",sup:""},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:81,sub:"Q",sup:""},{keyCode:87,sub:"W",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{sub:"`",sup:"^"},{keyCode:107,sub:"+",sup:"*"},{sub:"",sup:""}],[{keyCode:65,sub:"A",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{sub:"",sup:""},{sub:"",sup:""},{keyCode:13,sub:"return",sup:"",className:"return"}],[{keyCode:90,sub:"Z",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:188,sub:",",sup:";"},{keyCode:190,sub:".",sup:":"},{keyCode:109,sub:"-",sup:"_"},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]];c=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{sub:"^",sup:""},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:'"'},{keyCode:51,sub:"3",sup:""},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"&"},{keyCode:55,sub:"7",sup:"/"},{keyCode:56,sub:"8",sup:"("},{keyCode:57,sub:"9",sup:")"},{keyCode:48,sub:"0",sup:"="},{keyCode:191,sub:"",sup:"?"},{sub:"",sup:"`"},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:81,sub:"Q",sup:"@"},{keyCode:87,sub:"W",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:90,sub:"Z",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{sub:"",sup:""},{keyCode:107,sub:"+",sup:"*"},{keyCode:13,sub:"return",sup:"",className:"return-top"},{keyCode:13,sub:"",sup:"",className:"return-middle"}],[{keyCode:65,sub:"A",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{sub:"",sup:""},{sub:"",sup:""},{sub:"#",sup:"'"},{keyCode:13,sub:"",sup:"",className:"return"}],[{sub:"<",sup:">"},{keyCode:89,sub:"Y",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:188,sub:",",sup:";"},{keyCode:190,sub:".",sup:":"},{keyCode:109,sub:"_",sup:"-"},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]];f=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{sub:"2",sup:"",className:"small-text"},{keyCode:49,sub:"1",sup:"&"},{keyCode:50,sub:"2",sup:""},{keyCode:51,sub:"3",sup:'"'},{keyCode:52,sub:"4",sup:"'"},{keyCode:53,sub:"5",sup:"("},{keyCode:54,sub:"6",sup:"-"},{keyCode:55,sub:"7",sup:""},{keyCode:56,sub:"8",sup:"_"},{keyCode:57,sub:"9",sup:""},{keyCode:48,sub:"0",sup:""},{sub:"",sup:")"},{keyCode:109,sub:"+",sup:"="},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:65,sub:"A",sup:""},{keyCode:90,sub:"Z",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:80,sub:"P",sup:""},{sub:"",sup:"^"},{sub:"$",sup:""},{keyCode:13,sub:"return",sup:"",className:"return-top"},{keyCode:13,sub:"",sup:"",className:"return-middle"}],[{keyCode:81,sub:"Q",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:76,sub:"L",sup:""},{keyCode:77,sub:"M",sup:""},{sub:"",sup:"%"},{sub:"*",sup:""},{keyCode:13,sub:"",sup:"",className:"return"}],[{sub:"<",sup:">"},{keyCode:87,sub:"W",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:188,sub:",",sup:"?"},{keyCode:59,sub:";",sup:"."},{keyCode:191,sub:":",sup:"/"},{sub:"!",sup:""},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]];a=[[{keyCode:27,sub:"esc",sup:"",className:"esc"},{sub:"F1",sup:"",className:"func"},{sub:"F2",sup:"",className:"func"},{sub:"F3",sup:"",className:"func"},{sub:"F4",sup:"",className:"func"},{sub:"F5",sup:"",className:"func"},{sub:"F6",sup:"",className:"func"},{sub:"F7",sup:"",className:"func"},{sub:"F8",sup:"",className:"func"},{sub:"F9",sup:"",className:"func"},{sub:"F10",sup:"",className:"func"},{sub:"F11",sup:"",className:"func"},{sub:"F12",sup:"",className:"func"},{sub:"F13",sup:"",className:"func"}],[{keyCode:192,sub:"`",sup:"~"},{keyCode:49,sub:"1",sup:"!"},{keyCode:50,sub:"2",sup:"@"},{keyCode:51,sub:"3",sup:"#"},{keyCode:52,sub:"4",sup:"$"},{keyCode:53,sub:"5",sup:"%"},{keyCode:54,sub:"6",sup:"^"},{keyCode:55,sub:"7",sup:"&"},{keyCode:56,sub:"8",sup:"*"},{keyCode:57,sub:"9",sup:"("},{keyCode:48,sub:"0",sup:")"},{keyCode:219,sub:"[",sup:"{"},{keyCode:221,sub:"]",sup:"}"},{keyCode:8,sub:"delete",sup:"",className:"delete"}],[{keyCode:222,sub:"'",sup:'"'},{keyCode:188,sub:",",sup:"<"},{keyCode:190,sub:".",sup:">"},{keyCode:80,sub:"P",sup:""},{keyCode:89,sub:"Y",sup:""},{keyCode:70,sub:"F",sup:""},{keyCode:71,sub:"G",sup:""},{keyCode:67,sub:"C",sup:""},{keyCode:82,sub:"R",sup:""},{keyCode:76,sub:"L",sup:""},{keyCode:191,sub:"/",sup:"?"},{keyCode:187,sub:"=",sup:"+"},{keyCode:220,sub:"\\",sup:"|"}],[{keyCode:65,sub:"A",sup:""},{keyCode:79,sub:"O",sup:""},{keyCode:69,sub:"E",sup:""},{keyCode:85,sub:"U",sup:""},{keyCode:73,sub:"I",sup:""},{keyCode:68,sub:"D",sup:""},{keyCode:72,sub:"H",sup:""},{keyCode:84,sub:"T",sup:""},{keyCode:78,sub:"N",sup:""},{keyCode:83,sub:"S",sup:""},{keyCode:189,sub:"-",sup:"_"},{keyCode:13,sub:"return",sup:"",className:"return"}],[{keyCode:186,sub:";",sup:":"},{keyCode:81,sub:"Q",sup:""},{keyCode:74,sub:"J",sup:""},{keyCode:75,sub:"K",sup:""},{keyCode:88,sub:"X",sup:""},{keyCode:66,sub:"B",sup:""},{keyCode:77,sub:"M",sup:""},{keyCode:87,sub:"W",sup:""},{keyCode:86,sub:"V",sup:""},{keyCode:90,sub:"Z",sup:""},{keyCode:16,sub:"shift",sup:"",className:"shift"},{keyCode:38,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","up_arrow")+"</span>&uarr;",sup:""}],[{keyCode:32,sub:"",sup:"",className:"space"},{keyCode:37,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","left_arrow")+"</span>&larr;",sup:""},{keyCode:40,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","down_arrow")+"</span>&darr;",sup:""},{keyCode:39,sub:'<span class="obscured">'+e.transjax.get("keyboard-shortcut-legend","right_arrow")+"</span>&rarr;",sup:"",className:"right-arrow"}]];e.keyboardShortcutLegendLayouts={qwerty:d,spanish:b,qwertz:c,azerty:f,dvorak:a}},"0.0.1",{requires:F.config.modules["keyboard-shortcut-legend-layouts"].requires||[],optional:F.config.modules["keyboard-shortcut-legend-layouts"].optional||[]});YUI.add("keyboard-shortcut-manager",function(c){var i=[],d,h=false,a=c.UA,f=false,g;function j(m){if(!h){return}d=c.contextManager.get();if(c.focusTracker.isInput()||m.altKey||m.ctrlKey||m.metaKey){return}else{if(i[m.keyCode]){c.Object.each(i[m.keyCode],function(p,o,n){if(d===p.context||p.context==="*"){p.handler.call(p.scope,m)}},this)}}}function k(r,x,m,y){var q,v,p,t,n,u,s,w;if(typeof arguments[0]==="object"){q=arguments[0];v=q.legend;r=q.keystring;x=q.handler;m=q.context;y=q.scope}if(!f){l()}p=r.split(",");t=p.length;n=y||window;u=c.guid();for(s=0;s<t;s++){w=parseInt(p[s],10);if(!i[w]){i[w]={}}i[w][u]={handler:x,context:m,scope:n}}if(c.config.flickr.flags.enable_keyboard_shortcut_legend&&c.keyboardShortcutLegend&&c.keyboardShortcutLegend.register&&v){v.keyCodes=p;v.context=m;c.keyboardShortcutLegend.register(v)}return{detach:function(){for(s=0;s<t;s++){w=parseInt(p[s],10);if(i[w]&&i[w][u]){i[w][u]=undefined;delete i[w][u]}}}}}function b(){g=c.on("key",j,"html","down:")}function e(){if(c.keyboardShortcutLegend&&c.keyboardShortcutLegend.show){k({keystring:"191,109",handler:c.keyboardShortcutLegend.show,context:"*"})}}function l(){if(F&&F.keyListener){F.keyListener.detach_all();if(F.keyListener.enabled&&c.config.flickr.flags.enable_keyboard_shortcuts){h=true}else{h=false}}else{if((a.gecko||a.webkit>531||a.ie>7)&&c.config.flickr.flags.enable_keyboard_shortcuts){h=true}}if(h){b()}f=true;if(h&&c.config.flickr.flags.enable_keyboard_shortcut_legend){e()}}c.keyboardShortcutManager={register:k,isEnabled:function(){return h},disable:function(){h=false;c.config.flickr.flags.enable_keyboard_shortcuts=false},enable:function(){h=true;c.config.flickr.flags.enable_keyboard_shortcuts=true},destroy:function(){h=false;f=false;if(g){g.detach()}}}},"0.0.1",{requires:F.config.modules["keyboard-shortcut-manager"].requires});YUI.add("global-dialog",function(b){var a=function(){var c=this,e=(b.UA.ie&&(b.UA.ie<7||(typeof document.documentMode!=="undefined"?document.documentMode===5:false)||!document.compatMode.match(/css1compat/i)))||navigator.userAgent.match(/(ipod|ipad|iphone)/i),d="global_dialog",f=(b.UA.ie&&b.UA.ie<7);this.spinner=null;this.is_modal=false;this.events_on=false;this.o_shadows=null;this.is_showing=false;this.style=(typeof b.config!=="undefined"&&typeof b.config.flickr!=="undefined"&&!b.config.flickr.is_zeus?"style_2009":"default");this.last_style=null;this.on_escape_handler=null;this.esc_to_close=true;this.o=null;this.o_container=null;this.o_cover=null;this.timestamp=null;this.get_elements=function(){if(!c.o_cover){c.o_cover=b.one("#global-dialog-background")}if(!c.o||!c.o_container){c.o=b.one("#"+d);if(!c.o){return false}else{c.o_container=c.o.one("div.global_dialog_container");if(c.o){c.o_shadows={left:b.one("div.shadow_l"),right:b.one("div.shadow_r")};return true}}}else{return true}};this.reposition=function(){var h,g,i;if(e){if(window.innerWidth){g=window.pageXOffset;i=window.pageYOffset}else{g=document.body.scrollLeft;i=document.body.scrollTop}}if(!c.get_elements()){if(e){if(c.spinner){c.spinner.style.top=(i+parseInt((document.documentElement.clientHeight||document.body.clientHeight)/2,10)+"px")}c.position_cover()}return false}h=parseInt(c.o_container.get("offsetHeight"),10);if(h&&c.o_shadows&&c.o_shadows.left&&c.o_shadows.right){c.o_shadows.left.setStyle("height",(h+"px"));c.o_shadows.right.setStyle("height",(h+"px"))}c.o.setStyle("marginLeft",-(c.o.get("offsetWidth")/2)+"px");c.o.setStyle("marginTop",-(c.o.get("offsetHeight")/2)+"px");c.o.setStyle("left","50%");c.o.setStyle("top","50%");if(e){c.o.setStyle("top",(i+parseInt((document.documentElement.clientHeight||document.body.clientHeight)/2,10)+"px"))}};this.show=function(g){if(typeof g!=="undefined"&&typeof g.loading!=="undefined"){c.set_loading(g.loading?true:false)}if(!c.get_elements()){return false}if(g&&g.esc_to_close===false){this.esc_to_close=false}else{this.esc_to_close=true}if(typeof g!=="undefined"){if((typeof g.modal==="undefined")||(typeof g.modal!=="undefined"&&g.modal!==false)){c.set_modal(true)}else{c.set_modal(false)}if(typeof g.style!=="undefined"){c.set_style(g.style)}else{c.set_style(c.style)}if(typeof g.width!=="undefined"){c.set_width(g.width)}c.set_short_message_style((typeof g.short_message!=="undefined"&&g.short_message))}else{c.set_modal(true)}if(!c.is_showing){if(g&&typeof g.left!=="undefined"){c.o.setStyle("left",g.left);c.o.setStyle("top",g.top);c.o.setStyle("display","block");c.is_showing=true}else{c.o.setStyle("left","-9999px");c.o.setStyle("top","-9999px");c.o.setStyle("display","block");c.reposition();c.is_showing=true}}};this.hide=function(g){if(b.focusTracker&&b.focusTracker.isInput()){b.focusTracker.blur()}c.set_modal();if(e){c.detach_events()}c.detach_key_events();if(g&&g.loading){c.set_loading(true)}else{c.set_loading(false)}if(!c.get_elements()){return false}if(c.is_showing){c.o.setStyle("display","none");c.is_showing=false}c.on_escape_handler=null;if(c.modal_remove_handler&&c.modal_remove_handler.detach){c.modal_remove_handler.detach()}if(c.modal_remove_key_handler&&c.modal_remove_key_handler.detach){c.modal_remove_key_handler.detach()}};this.set_width=function(g){if(!c.get_elements()){return false}if(g){c.o.setStyle("width","auto");c.o_container.setStyle("width",g+(g==="auto"?"":"px"))}else{c.o.setStyle("width","auto");c.o_container.setStyle("width",(b.UA.ie&&b.UA.ie<7?"334px":"320px"))}c.reposition()};this.set_style=function(g){if(!c.get_elements()){return false}if(c.last_style){c.o.removeClass(c.last_style)}if(g){c.o.addClass(g)}c.last_style=g;c.reposition()};this.set_short_message_style=function(g){c.use_short_message_style=g;if(!c.get_elements()){return false}c.o.removeClass("style_2009");if(g){c.o.removeClass("global_dialog");c.o.addClass("global-dialog-short-msg");if(c.is_modal){c.modal_remove_handler=c.o_cover.once("click",function(){c.hide()});c.modal_remove_key_handler=b.once("key",function(){if(!b.keyboardShortcutManager.isEnabled()){return}if(!this.esc_to_close){return}if(b.contextManager){b.contextManager.unset(b.contextManager.get())}c.hide()},window,"down:13,27")}}else{c.o.removeClass("global-dialog-short-msg");c.o.addClass("global_dialog")}c.reposition()};this.set_spinner=function(g){if(g){if(!c.spinner){c.spinner=document.createElement("div");c.spinner.className="global_dialog_spinner";document.body.appendChild(c.spinner);if(e){c.position_cover()}}c.spinner.style.display="block"}else{if(c.spinner){c.spinner.style.display="none"}}};this.set_modal=function(g){c.is_modal=g;if(!c.o_cover){return false}if(g){if(e){c.o_cover.setStyle("position","absolute");c.position_cover();c.attach_events()}else{c.o_cover.setStyle("position","fixed")}c.attach_key_events();var h=35;c.o_cover.setStyle("backgroundColor","#000");c.o_cover.setStyle("opacity",h/100);c.o_cover.setStyle("MozOpacity",h/100);c.o_cover.setStyle("filter","alpha(opacity="+h+")");c.o_cover.setStyle("display","block")}else{c.o_cover.setStyle("position","absolute");c.o_cover.setStyle("display","none");c.detach_events();c.detach_key_events()}};this.set_loading=function(g){if(!c.o_cover){return false}if(g){c.set_spinner(g);c.o_cover.removeClass("loaded");c.o_cover.addClass("loading");if(!c.is_modal){c.set_modal(true)}}else{c.set_spinner(g);c.o_cover.removeClass("loading");c.o_cover.addClass("loaded");if(c.is_modal){c.set_modal(false)}}};this.set_aria=function(g){if(!g||typeof g!=="object"){return}if(g["aria-labelledby"]){c.o.setAttribute("aria-labelledby",g["aria-labelledby"])}if(g["aria-describedby"]){c.o.setAttribute("aria-describedby",g["aria-describedby"])}};this.remove_existing_dialog=function(){if(c.o){try{c.o._node.parentNode.removeChild(c.o._node);c.o=null;return true}catch(g){return false}}};this.create_dialog=function(j,h){if(c.o){c.remove_existing_dialog();c.o=null}c.timestamp=(new Date()).getTime();c.last_style=null;c.is_showing=false;var i=document.createElement("div");document.body.appendChild(i);c.o=b.one(i);c.o.set("id","global_dialog");c.o.set("className","global_dialog");c.o.setAttribute("role","dialog");var g="";if(b.config.flickr.flags.enable_global_dialog_maximizer){b.log("assign maximizer handler");c.o.on("click",function(k){if(k.target.test(".global-dialog-admin-maximizer a")){k.preventDefault();c.o.addClass("global-dialog-maximized")}});g='<div class="global-dialog-admin-maximizer">admins only: <a href="#">maximize global dialog</a></div>'}c.o.set("innerHTML",'<div id="global-dialog-container" class="global_dialog_container"><div class="wrapper">'+j+"</div>"+g+"</div>");c.o_container=null;c.get_elements();if(h&&h.style){c.set_style(h.style)}else{c.set_style(c.style)}if(h&&h.width){c.set_width(h.width)}else{c.set_width()}return c};this.create_confirmation_dialog=function(h,s,p){var n,q,o,i,j,g,m,t,l,r,k;if(b.Lang.isObject(h)){n=b.Lang.isString(h.hd)?h.hd:"";q=b.Lang.isString(h.bd)?h.bd:"";o=b.Lang.isString(h.ft)?h.ft:""}else{q=b.Lang.isString(h)?h:""}i={CONFIRM:b.transjax.get("global-dialog","button_confirm"),CANCEL:b.transjax.get("global-dialog","button_cancel"),width:330,loading:false,modal:true,confirm_butt_class:"Butt",cancel_butt_class:"CancelButt",checkboxes:[],photo:{},scope:window};if(!b.Lang.isObject(p)){p={}}i=b.mix(p,i);t=b.guid();l=b.guid();j="";if(i.photo&&i.photo.url){j='<div class="photo_container"><img src="'+i.photo.url+'"'+(i.photo.width?' width="'+i.photo.width+'"':"")+(i.photo.height?' height="'+i.photo.height+'"':"")+"></div>"}g="";if(i.checkboxes.length){b.Array.each(i.checkboxes,function(u){g+='<div><label><input type="checkbox">&nbsp; '+u+"</label></div>"})}k=' <input type="button" class="'+i.confirm_butt_class+'" value="'+i.CONFIRM+'" id="'+t+'">';if(i.confirm_butt_class==="BigAssButt"){k=' <a href="#" class="'+i.confirm_butt_class+'" id="'+t+'"><span></span>'+i.CONFIRM+"</a>"}m=(n?'<div class="hd">'+n+"</div>":"")+'<div class="bd">'+q+j+g+'</div><div class="bd button_container confirmation_button_container">'+k+' <input type="button" class="'+i.cancel_butt_class+'" value="'+i.CANCEL+'" id="'+l+'"></div>'+(o?'<div class="ft">'+o+"</div>":"");b.global_dialog.remove_existing_dialog();b.global_dialog.create_dialog(m,i).show(i);r=b.delegate("click",function(v){var w,u;w=(v.target.get("id")===t);u={};if(i.checkboxes.length){u.checkboxes=[];c.o_container.all('input[type="checkbox"]').each(function(x){u.checkboxes.push(x.get("checked"))})}b.global_dialog.hide();if(b.Lang.isFunction(s)){s.apply(i.scope,[w,u])}v.preventDefault();r.detach()},c.o_container,'.button_container input[type="button"], .button_container a.BigAssButt')};this.create_alert_dialog=function(l,m,k){var h,j,i,g;h={CONFIRM:b.transjax.get("global-dialog","button_confirm"),width:330,loading:false,modal:true};if(!b.Lang.isObject(k)){k={}}h=b.mix(k,h);i=b.guid();j='<div class="hd">'+l+'</div><div class="bd button_container"> <input type="button" class="Butt" value="'+h.CONFIRM+'" id="'+i+'"></div>';b.global_dialog.remove_existing_dialog();b.global_dialog.create_dialog(j,h).show(h);b.delegate("click",function(){b.global_dialog.hide();if(b.Lang.isFunction(m)){m.apply(window,[true])}},this.o_container,"#"+i)};this.position_cover=function(h){var g,i;if(!h){h=b.one(c.o_cover)}c.get_elements();if(h){if(window.innerWidth){g=window.pageXOffset;i=window.pageYOffset}else{g=document.body.scrollLeft;i=document.body.scrollTop}h.setStyle("width","100%");h.setStyle("height",(b.one("body").get("offsetHeight"))+"px");h.setStyle("top",i+"px");h.setStyle("left",g+"px")}};this.legacy_resize_handler=function(){c.reposition();c.position_cover()};this.legacy_scroll_handler=function(){c.reposition();c.position_cover()};this.key_handler=function(h){if(!b.keyboardShortcutManager.isEnabled()){return}var g=h.which||h.keyCode;if(g===27){if(!this.esc_to_close){return}if(b.contextManager){b.contextManager.unset(b.contextManager.get())}c.hide()}};this.attach_events=function(){if(c.events_on){return false}c.events_on=true;if(!b.UA.ios){c.resize_event_handle=b.on("resize",c.legacy_resize_handler,window,c,true);c.scroll_event_handle=b.on("scroll",c.legacy_scroll_handler,window,c,true)}};this.attach_key_events=function(){c.key_event_handle=b.on("key",c.key_handler,window,"up:27",c,true)};this.detach_events=function(){if(!c.events_on){return false}c.events_on=false;if(c.resize_event_handle){c.resize_event_handle.detach()}if(c.scroll_event_handle){c.scroll_event_handle.detach()}};this.detach_key_events=function(){if(c.key_event_handle){c.key_event_handle.detach()}};this.get_elements()};b.global_dialog=new a()},"0.0.1",{requires:F.config.modules["global-dialog"].requires||[],optional:F.config.modules["global-dialog"].optional||[]});YUI.add("keyboard-shortcut-legend",function(c){var m=false,N="keyboard-shortcut-legend",L,E={},o=false,C=false,f,w,d=2000,x="keylayout",B,y,t,i,G,s,H,P=0,U=true,q=false,v,r=890,b=584,A=[],k=[c.transjax.get("keyboard-shortcut-legend","navigation"),c.transjax.get("keyboard-shortcut-legend","actions"),c.transjax.get("keyboard-shortcut-legend","lightbox"),c.transjax.get("keyboard-shortcut-legend","map"),c.transjax.get("keyboard-shortcut-legend","general")];function R(){c.all(".keyboard-shortcut-legend-trigger").on("click",J);B=c.Cookie.get(x)||u();m=true}function u(){var V="qwerty";if(c.config.flickr.flags.enable_keyboard_shortcut_legend_keyboard_layouts){if(c.config.flickr.lang==="de-de"){V="qwertz"}else{if(c.config.flickr.lang==="fr-fr"){V="azerty"}else{if(c.config.flickr.lang==="es-us"){V="spanish"}}}}return V}function J(X){var W=c.contextManager.get(),V={};if(o){O(X);return}y=c.keyboardShortcutLegendLayouts[B];if(W!==""&&W!=="lightbox"&&W!=="flickrMap"){c.contextManager.unset(W);W=c.contextManager.get()}c.Array.each(A,function(Y,Z){if(Y.context===W||Y.context==="*"){c.Array.each(k,function(ab,aa){if(Y.group===ab){if(!V[ab]){V[ab]=[]}V[ab].push(Y)}})}});c.Array.each(k,function(Z,Y){if(V[Z]){V[Z].sort(K)}});if(E[W+B]){L=E[W+B]}else{L='<div class="hd keyboard-shortcut-legend-hd"><h2 id="keyboard-shortcut-legend-header">'+c.transjax.get("keyboard-shortcut-legend","header_"+(W===""?"no_context":"context"))+'</h2><label class="killswitch-container"><span class="spinner">'+c.transjax.get("keyboard-shortcut-legend","saving")+'</span><span class="success"><span class="msg-icon"></span>'+c.transjax.get("keyboard-shortcut-legend","saved")+'</span><span class="alert"><span class="msg-icon"></span>'+c.transjax.get("keyboard-shortcut-legend","unable_to_save")+'</span><input type="checkbox" class="killswitch" tabindex="1" checked>'+c.transjax.get("keyboard-shortcut-legend","enable_shortcuts")+'</label><a href="#" class="keyboard-shortcut-legend-close"></a></div><div class="bd keyboard-shortcut-legend-bd '+B+'-layout"><p id="keyboard-shortcut-legend-instructions" class="obscured">'+c.transjax.get("keyboard-shortcut-legend","instructions")+"</p>";c.Array.each(y,function(Z,Y){L+='<ul class="keyboard-row row-'+Y+'">';c.Array.each(Z,function(aa){L+="<li"+(aa.className?' class="'+aa.className+'"':"")+' id="key-'+aa.keyCode+'"><span class="key-container"><a href="#" class="key-height" role="button" tabindex="-1"><span class="key">'+(aa.sup?'<span class="sup">'+aa.sup+"</span>":"")+(aa.sub?'<span class="sub">'+aa.sub+"</span>":"")+"</span></a></span></li>"});L+="</ul>"});if(c.config.flickr.flags.enable_keyboard_shortcut_legend_keyboard_layouts){L+='<div class="layout-tools"><span class="layout-description show"><span class="selected-layout">'+c.transjax.get("keyboard-shortcut-legend",B+"_layout")+'</span> (<a href="#" class="layout-change" role="button" tabindex="1">'+c.transjax.get("keyboard-shortcut-legend","change_layout")+'</a>)</span><span id="layout-selector-desc" class="obscured">'+c.transjax.get("keyboard-shortcut-legend","layout_selector_description")+'</span><select class="layout-selector" aria-label="layout-selector-desc"><option value="qwerty"'+(B==="qwerty"?" selected":"")+'>QWERTY</option><option value="spanish"'+(B==="spanish"?" selected":"")+">"+c.transjax.get("keyboard-shortcut-legend","spanish")+'</option><option value="qwertz"'+(B==="qwertz"?" selected":"")+'>QWERTZ</option><option value="azerty"'+(B==="azerty"?" selected":"")+'>AZERTY</option><option value="dvorak"'+(B==="dvorak"?" selected":"")+">Dvorak</option></select></div>"}L+='<hr><div class="shortcuts" role="document">';c.Array.each(k,function(Z,Y){if(V[Z]){L+='<div class="group"><h4>'+Z+"</h4><ul>";c.Array.each(V[Z],function(aa,ab){L+='<li id="shortcut-'+Y+"-"+ab+'"><kbd'+((aa.key==="&larr;"||aa.key==="&rarr;")?' class="arrow"':"")+">"+aa.key+'</kbd><span id="shortcut-'+Y+"-"+ab+'-desc">'+aa.description+"</span></li>"});L+="</ul></div>"}});L+='</div><div class="mask"></div></div>';E[W+B]=L}U=(c.DOM.winHeight()>b&&c.DOM.winWidth()>r);c.contextManager.set(N);c.global_dialog.remove_existing_dialog();c.global_dialog.create_dialog(L,{width:U?842:633}).show({loading:false,modal:true});c.global_dialog.set_aria({"aria-labelledby":"keyboard-shortcut-legend-header","aria-describedby":"keyboard-shortcut-legend-instructions"});o=true;f=c.one(".keyboard-shortcut-legend-hd .killswitch");f.set("checked",c.config.flickr.flags.enable_keyboard_shortcuts);if(q){q=false;c.one(".keyboard-shortcut-legend-bd .layout-tools .layout-change").focus()}else{f.focus()}h(f,true);if(!U){c.one(".keyboard-shortcut-legend-bd").addClass("mini");c.global_dialog.reposition()}c.Array.each(k,function(Z,Y){if(V[Z]){c.Array.each(V[Z],function(aa,ac){var ab=c.one("#shortcut-"+Y+"-"+ac),ad=false;c.Array.each(aa.keyCodes,function(af){var ae=c.one("#key-"+af);if(ae){ad=true;ae.addClass("highlight");ae.on(["focus","mouseover"],function(ag){z({blur:(ag.type==="mouseover")});ab.addClass("highlight")});ae.on(["blur","mouseout"],function(ag){z()});ab.on("mouseover",function(ag){z();ae.addClass("super-highlight")});ab.on("mouseout",function(ag){z()});ae.one("a.key-height").setAttribute("aria-describedby",ab.get("id")+"-desc")}});if(!ad){ab.remove()}})}});t=c.all(".keyboard-shortcut-legend-bd .keyboard-row li");i=c.all(".keyboard-shortcut-legend-bd .shortcuts li");c.once("click",O,".keyboard-shortcut-legend-close");c.keyboardShortcutManager.register({keystring:"27",handler:O,context:N});c.all(".keyboard-shortcut-legend-bd a.key-height").on("click",function(Y){Y.preventDefault()});c.all(".keyboard-shortcut-legend-hd .killswitch").on("click",function(Y){h(Y.target)});if(c.config.flickr.flags.enable_keyboard_shortcut_legend_keyboard_layouts){c.all(".keyboard-shortcut-legend-bd .layout-change").on("click",l);c.all(".keyboard-shortcut-legend-bd .layout-selector").on("change",g)}v=c.on("resize",c.betterThrottle(I,50));if(c.config.flickr.flags.enable_keyboard_shortcuts){H=true;c.keyboardShortcutManager.disable();e()}if(X&&X.preventDefault){X.preventDefault()}}function K(W,V){if(W.order>V.order){return 1}else{if(V.order>W.order){return -1}}return 0}function z(V){if(!V){V={}}if(V.blur&&s&&typeof s.blur==="function"){s.blur();s=null}t.removeClass("super-highlight");i.removeClass("highlight")}function I(W){var V=(c.DOM.winHeight()>b&&c.DOM.winWidth()>r);if(V!==U){O();J()}}function T(){S();c.one(".keyboard-shortcut-legend-hd .spinner").addClass("show");w=new Date().getTime()}function p(X){var V=new Date().getTime(),W=V-w;if(W>=d||!X){c.one(".keyboard-shortcut-legend-hd .spinner").removeClass("show");D(X)}else{setTimeout(function(){c.one(".keyboard-shortcut-legend-hd .spinner").removeClass("show");D(X)},d-W)}}function h(X,Y){var V=c.one(".keyboard-shortcut-legend-bd"),W=c.one(".keyboard-shortcut-legend-bd .mask");if(!Y){T()}if(X.get("checked")){if(W){W.setStyle("display","none")}if(!Y){Q(function(Z){p(Z);if(!Z){if(W){W.setStyle("display","block")}c.keyboardShortcutManager.disable();X.set("checked",false)}})}}else{W.setStyle("width",V.get("offsetWidth"));W.setStyle("height",V.get("offsetHeight"));W.setStyle("display","block");if(!Y){a(function(Z){p(Z);if(!Z){W.setStyle("display","none");c.keyboardShortcutManager.enable();X.set("checked",true)}})}}}function D(W){var V=c.one(W?".keyboard-shortcut-legend-hd .success":".keyboard-shortcut-legend-hd .alert");V.addClass("show");setTimeout(S,d)}function S(){c.all(".keyboard-shortcut-legend-hd .success, .keyboard-shortcut-legend-hd .alert").removeClass("show")}function Q(V){if(!V){V=function(){}}c.flickrAPI.callMethod("flickr.prefs.setPrefs",{disable_keyboard_shortcuts:0},{success:function(){C=false;H=true;e();V(true)},failure:function(){V(false)}})}function a(V){if(!V){V=function(){}}c.flickrAPI.callMethod("flickr.prefs.setPrefs",{disable_keyboard_shortcuts:1},{success:function(){C=true;H=false;M();V(true)},failure:function(){V(false)}})}function l(V){c.one(".keyboard-shortcut-legend-bd .layout-description").removeClass("show");c.one(".keyboard-shortcut-legend-bd .layout-selector").addClass("show").focus();if(V&&typeof V.preventDefault==="function"){V.preventDefault()}}function g(W){var V;B=W.target.get("value");V={domain:".flickr.com",path:"/",expires:(new Date((new Date()).getTime()+10*365*60*60*24*1000))};c.Cookie.set(x,B,V);q=true;O();J()}function n(W){var V;if(W.keyCode===32&&W.target.test(".keyboard-shortcut-legend-bd .layout-tools .layout-change")){l(W);return}else{if(c.focusTracker.isInput()||W.altKey||W.ctrlKey||W.metaKey||W.keyCode===9||c.one(".keyboard-shortcut-legend-bd .layout-tools").contains(W.target)){return}else{if(W.keyCode===27){P++}if(P>1){O();P=0;W.preventDefault();return}V=c.one("#key-"+W.keyCode);if(V){s=V.one("a.key-height");s.focus()}W.preventDefault()}}}function e(){G=c.on("key",n,"html","down:")}function M(){if(G&&typeof G.detach==="function"){G.detach()}}function O(V){c.global_dialog.remove_existing_dialog();c.global_dialog.hide();c.contextManager.unset(N);v.detach();M();if(H){c.keyboardShortcutManager.enable()}o=false;if(C){c.global_dialog.create_alert_dialog('<span class="reenable-msg">'+c.transjax.get("keyboard-shortcut-legend","you_can_reenable_shortcuts_in_prefs")+"</span>",c.global_dialog.hide,{width:280})}if(V&&V.preventDefault){V.preventDefault()}}function j(V){if(!m){R()}if(!V.context){V.context=""}if(!V.group){V.group=c.transjax.get("keyboard-shortcut-legend","general")}if(!V.order&&V.order!==0){V.order=50}A.push(V)}c.keyboardShortcutLegend={show:J,hide:O,register:j};j({keyCodes:[191,109],key:"?",description:c.transjax.get("keyboard-shortcut-legend","shortcut_description"),context:"*",order:0});j({keyCodes:[27],key:"esc",description:c.transjax.get("keyboard-shortcut-legend","esc_description")+' <span class="obscured">'+c.transjax.get("keyboard-shortcut-legend","esc_description_screenreader")+"</span>",context:"*",order:1})},"0.0.1",{requires:F.config.modules["keyboard-shortcut-legend"].requires||[],optional:F.config.modules["keyboard-shortcut-legend"].optional||[]});YUI.add("nav-selecta-transjax",function(a){a.transjax.add("nav-selecta",{search_on_flickr:"Search <strong>Everyone's Uploads</strong>",search_more:"More search types...</strong>",jump_to_the_search_field:"Jump to the search field",search_photostream:"<strong>Your Photostream</strong>",search_users_photostream:"<strong>%s Photostream</strong>",search_favorites:"<strong>Your Favorites</strong>",search_users_favorites:"<strong>%s Favorites</strong>",search_contacts:"<strong>Your Contacts' Photos</strong>",search_people:"<strong>Flickr Members</strong>",search_tags:"<strong>Tags</strong>",search_groups:"<strong>Groups</strong>",search_location:"<strong>Places</strong>",search_apps:"<strong>Apps</strong>",search_help:"<strong>The Help Forum</strong>",search_advanced:"<strong>Advanced Search</strong>",section_your_photostream:'Your Photostream',section_your_sets:'Your Sets',section_your_collections:'Your Collections',section_your_galleries:'Your Galleries',section_your_archives:'Your Archives',section_your_tags:'Your Tags',section_your_map:'Your Map',section_your_favorites:'Your Favorites',section_your_stats:'Your Stats',section_your_apps:'Your Apps',section_recent_activity:'Recent Activity',section_photos_of_you:'Photos of You',section_upload_photos:'Upload Photos',section_your_account:'Your Account',section_your_profile:'Your Profile',section_flickrmail:'FlickrMail',section_organize_and_create:'Organize & Create',section_prints_and_photo_products:'Prints &amp; photo products',section_contacts:"Contacts' Recent Uploads",section_photos_of_your_contacts:'Photos of Your Contacts',section_contact_list:'Contact List',section_find_your_friends:'Find Your Friends',section_invite_your_friends:'Invite your Friends',section_invite_history:'Invite History',section_guest_pass_history:'Guest Pass History',section_your_groups:'Your Groups',section_recent_changes_in_your_groups:'Recent Changes in Your Groups',section_create_a_new_group:'Create a New Group',section_the_tour:'The Tour',section_explore:'Explore',section_last_7_days_interesting:'Last 7 Days Interesting',section_popular_tags:'Popular Tags',section_calendar:'Calendar',section_most_recent_uploads_to_flickr:'Most Recent Uploads to Flickr',section_video_on_flickr:'Video on Flickr',section_galleries:'Galleries',section_explore_analog:'Explore Analog',section_flickr_clock:'Flickr Clock',section_world_map:'World Map',section_places:'',section_the_commons:'The Commons',section_creative_commons:'Creative Commons',section_flickrblog:'FlickrBlog',section_getty_images:"Getty Images",section_code_flickr:"code.flickr",section_the_app_garden:'The App Garden',section_camera_finder:'Camera Finder',section_developer_guidelines:'Developer Guide',section_api_docs:'API Documentation',section_feeds:'Feeds',section_help:'Help',section_community_guidelines:'Community Guidelines',section_the_help_forum:'The Help Forum',section_faq:'FAQ',section_tools:'Tools',section_sitemap:'Sitemap',section_about_flickr:'About Flickr',section_jobs:'Jobs at Flickr',section_terms_of_service:'Terms of Service',section_terms_of_use:'Terms of Use',section_your_privacy:'Your Privacy',section_copyright_ip_policy:'Copyright/IP Policy',section_report_abuse:'Report Abuse',section_mobile:'Mobile',section_photosession:'Photo Session'})},"0.0.1",{requires:F.config.modules["nav-selecta-transjax"].requires||[]});YUI.add("nav-selecta",function(h){var g=false;h.on("keydown",function(i){if(i.metaKey||i.ctrlKey){g=true}});h.on("keyup",function(i){if(g){g=false}});h.NavSelecta=function(j,i){i=i||{};i.showSubtitle=(typeof i.showSubtitle!=="undefined")?i.showSubtitle:true;i.showIcon=(typeof i.showIcon!=="undefined")?i.showIcon:true;i.maxResultsDisplayed=i.maxResultsDisplayed||15;i.searchOnRealname=(typeof i.searchOnRealname!=="undefined")?i.searchOnRealname:true;i.searchOnEmail=(typeof i.searchOnEmail!=="undefined")?i.searchOnEmail:true;i.searchOnPathAlias=(typeof i.searchOnPathAlias!=="undefined")?i.searchOnPathAlias:true;i.selectFirstItem=(typeof i.selectFirstItem!=="undefined")?i.selectFirstItem:true;i.loadTransparently=(typeof i.loadTransparently!=="undefined")?i.loadTransparently:true;i.minListWidth=i.minListWidth||266;h.NavSelecta.superclass.constructor.call(this,j,i);this.inputField.removeClass("grey");this.maxContactsDisplayed=i.maxContactsDisplayed||3;this.maxSectionsDisplayed=i.maxSectionsDisplayed||3;this.on("BoSelecta:resultSelect",b);this.on("BoSelecta:resultClick",b);if(h.config.flickr.user&&h.config.flickr.user.nsid){this.inputField.once("mouseover",this.fetchData,this,true);this.inputField.once("focus",this.fetchData,this,true);this.on("BoSelecta:dataFetchComplete",this.refreshResults,this,true)}this.container.addClass("nav-selecta");h.keyboardShortcutManager.register({keystring:"83",handler:f,context:"",scope:this,legend:{key:"S",description:h.transjax.get("nav-selecta","jump_to_the_search_field"),group:h.transjax.get("keyboard-shortcut-legend","navigation"),order:99}});this.addSections(h.config.flickr.nav_selecta.additional_sections)};var d={},e={};function b(j,i){if(j.type==="contact"){if(!g){c("/photos/"+(j.a?j.a:j.n)+"/")}}else{if(j.type==="section"){if(!g){c(j.url)}}else{if(!g){c(j.url)}}}}function f(i){i.preventDefault();window.scrollTo(0,0);this.inputField.focus()}function c(i){h.fire("NavSelecta:beforeNavigatingAway",i);window.location=i}d._searchContacts=function(l){var A,j=[],t=l,m,p=this,o=false,z=false,u=false,y=false;j.push({type:"search",message:h.transjax.get("nav-selecta","search_on_flickr",'<em class="term-highlight">'+t+"</em>"),onclick:function(n){if(!g){c("/search/?q="+encodeURIComponent(t))}},url:"/search/?q="+encodeURIComponent(t)});if(h.config.flickr.nav_selecta.photostream_search_user){if(h.config.flickr.user&&h.config.flickr.user.nsid&&h.config.flickr.user.nsid===h.config.flickr.nav_selecta.photostream_search_user.nsid){j.push({type:"search-photostream",message:h.transjax.get("nav-selecta","search_photostream",'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w="+h.config.flickr.user.nsid+"&q="+encodeURIComponent(t))}},url:"/search/?w="+h.config.flickr.user.nsid+"&q="+encodeURIComponent(t)});o=true}else{j.push({type:"search-users-photostream",message:h.transjax.get("nav-selecta","search_users_photostream",h.StringFilters.escape_entities(h.config.flickr.nav_selecta.photostream_search_user.owner_name_possessive),'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w="+h.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(t))}},url:"/search/?w="+h.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(t)});z=true}}if(h.config.flickr.nav_selecta.favorites_search_user){if(h.config.flickr.user&&h.config.flickr.user.nsid&&h.config.flickr.user.nsid===h.config.flickr.nav_selecta.favorites_search_user.nsid){j.push({type:"search-favorites",message:h.transjax.get("nav-selecta","search_favorites",'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w=faves&q="+encodeURIComponent(t))}},url:"/search/?w=faves&q="+encodeURIComponent(t)});u=true}else{j.push({type:"search-users-favorites",message:h.transjax.get("nav-selecta","search_users_favorites",h.StringFilters.escape_entities(h.config.flickr.nav_selecta.favorites_search_user.owner_name_possessive),'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w=faves-"+h.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(t))}},url:"/search/?w=faves-"+h.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(t)});y=true}}if(!this.showMoreSearches){j.push({type:"search-more",message:h.transjax.get("nav-selecta","search_more",'<em class="term-highlight">'+t+"</em>"),onclick:function(){p.showMoreSearches=true;p.selectSecondItem=p.autoComp.after("results",function(n){if(o||z||u||y){p.autoComp.set("activeItem",p.autoComp._getFirstItemNode().next().next())}else{p.autoComp.set("activeItem",p.autoComp._getFirstItemNode().next())}p.selectSecondItem.detach()});p.refreshResults()}})}else{if(h.config.flickr.user&&h.config.flickr.user.nsid&&!o){j.push({type:"search-photostream",message:h.transjax.get("nav-selecta","search_photostream",'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w="+h.config.flickr.user.nsid+"&q="+encodeURIComponent(t))}},url:"/search/?w="+h.config.flickr.user.nsid+"&q="+encodeURIComponent(t)})}if(h.config.flickr.nav_selecta.photostream_search_user&&(!h.config.flickr.user||(h.config.flickr.user.nsid!==h.config.flickr.nav_selecta.photostream_search_user.nsid))&&!z){j.push({type:"search-users-photostream",message:h.transjax.get("nav-selecta","search_users_photostream",h.StringFilters.escape_entities(h.config.flickr.nav_selecta.photostream_search_user.owner_name_possessive),'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w="+h.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(t))}},url:"/search/?w="+h.config.flickr.nav_selecta.photostream_search_user.nsid+"&q="+encodeURIComponent(t)})}if(h.config.flickr.nav_selecta.favorites_search_user&&(!h.config.flickr.user||(h.config.flickr.user.nsid!==h.config.flickr.nav_selecta.favorites_search_user.nsid))&&!y){j.push({type:"search-users-favorites",message:h.transjax.get("nav-selecta","search_users_favorites",h.StringFilters.escape_entities(h.config.flickr.nav_selecta.favorites_search_user.owner_name_possessive),'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w="+h.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(t))}},url:"/search/?w="+h.config.flickr.nav_selecta.favorites_search_user.nsid+"&q="+encodeURIComponent(t)})}if(h.config.flickr.user&&h.config.flickr.user.nsid){j.push({type:"search-contacts",message:h.transjax.get("nav-selecta","search_contacts",'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/?w=contacts&q="+encodeURIComponent(t))}},url:"/search/?w=contacts&q="+encodeURIComponent(t)})}j.push({type:"search-groups",message:h.transjax.get("nav-selecta","search_groups",'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/groups/?q="+encodeURIComponent(t))}},url:"/search/groups/?q="+encodeURIComponent(t)});j.push({type:"search-people",message:h.transjax.get("nav-selecta","search_people",'<em class="term-highlight">'+t+"</em>"),onclick:function(){if(!g){c("/search/people/?m=names&q="+encodeURIComponent(t))}},url:"/search/people/?m=names&q="+encodeURIComponent(t)})}if(l&&typeof l==="string"){l=this._escapeForRegEx(l);l=h.StringFilters.substitute_equivalent_chars(l);var i=new RegExp(l,"i"),x,q,w;if(this.contacts){var v=false,s=[];for(w=0,len=this.contacts.length;w<len;w++){q=false;x=this.contacts[w];x.matched=null;if(x.n&&(!this.includeUser||t===this.meString)&&x.n===h.config.flickr.user.nsid){if(t===this.meString&&!this.skipList[x.n]){A=x}continue}if(x.e&&!x.u&&!x.n){continue}if(this.skipList&&(this.skipList[x.n]||this.skipList[x.e])){continue}if(this.searchOnUsername&&x.u&&x.u.search(i)!==-1){q=true;x.matched="username";x.matchedPos=x.u.search(i)}if(!q&&this.searchOnRealname&&x.r&&x.r.search(i)!==-1){q=true;x.matched="realname";x.matchedPos=x.r.search(i)}if(!q&&this.searchOnEmail&&x.e&&l!=="@"&&x.e.search(i)!==-1){q=true;x.matched="email";x.matchedPos=x.e.search(i)}if(!q&&this.searchOnPathAlias&&x.a&&x.a.search(i)!==-1){q=true;x.matched="path_alias";x.matchedPos=x.a.search(i)}if(q){v=true;x.type="contact";s.push(x)}}if(v){m={username:0,realname:1,email:2,path_alias:3};s.sort(function(D,n){var C=(D.n&&D.u)?"contact":"addressBookEntry";var E=(n.n&&n.u)?"contact":"addressBookEntry";if(C!==E){return(C==="contact")?-1:1}if(D.matchedPos===n.matchedPos){if(m[D.matched]===m[n.matched]){var G=D.u.charCodeAt(0),B=n.u.charCodeAt(0);if(G===B){return 0}else{if(G<B){return -1}else{return 1}}}else{if(m[D.matched]<m[n.matched]){return -1}else{return 1}}}else{if(D.matchedPos<n.matchedPos){return -1}else{return 1}}});if(t===this.meString&&A){A.matched="username";j.unshift(A)}j=j.concat(s.slice(0,this.maxContactsDisplayed))}}else{if(h.config.flickr.user&&h.config.flickr.user.nsid){this.fetchData()}}if(this.groups){}if(h.NavSelecta.nav_sections){var k=false,r=[];for(w=0,len=h.NavSelecta.nav_sections.length;w<len;w++){q=false;section=h.NavSelecta.nav_sections[w];section.matched=null;if(section.name&&section.name.search(i)!==-1){q=true;section.matched="name";section.matchedPos=section.name.search(i)}if(!q&&this.searchOnURL&&section.url&&section.url.search(i)!==-1){q=true;section.matched="url";section.matchedPos=section.url.search(i)}if(q){k=true;section.type="section";r.push(section)}}if(k){m={name:0,url:1};r.sort(function(C,n){if(C.matchedPos===n.matchedPos){if(m[C.matched]===m[n.matched]){var D=C.name.charCodeAt(0),B=n.name.charCodeAt(0);if(D===B){return 0}else{if(D<B){return -1}else{return 1}}}else{if(m[C.matched]<m[n.matched]){return -1}else{return 1}}}else{if(C.matchedPos<n.matchedPos){return -1}else{return 1}}});j=j.concat(r.slice(0,this.maxSectionsDisplayed))}}}return j};d._formatResult=function(o,x,p){var q=this,z,t=[],D,k,j,u,i=!o?null:new RegExp(h.StringFilters.substitute_equivalent_chars(q._escapeForRegEx(o)),"gi"),r,m,v,B,y,l,s=false,C=false;if(!o){o=""}for(var w=0,A=x.length;w<A;w++){z=x[w].raw;if(!z){continue}if(z.type==="search-more"){D='<p class="bs-message bs-onclick ns-search ns-search-more"><span class="inner"><span class="icon"></span>'+z.message+"</span></p>";t.push(D);continue}if(z.type.match(/^search/)){D='<p class="bs-message bs-onclick ns-search"><a class="inner" href="'+z.url+'"><span class="icon"></span>'+z.message+"</a></p>";t.push(D);continue}if(z.type==="section"){D='<p class="bs-message ns-section ns-section-'+(z.sectionType?z.sectionType:"generic")+(C?"":" first-section")+'"><a href="'+z.url+'" class="inner"><span class="icon"></span>'+a(z.name,i)+"</a></p>";t.push(D);C=true;continue}if(z.globalSearchLink){D='<p class="bs-global-search-link bs-message bs-onclick"><span>'+z.message+"</span></p>";t.push(D);continue}if(z.message){D='<p class="bs-message'+(z.notFoundLink?"":" bs-onclick")+(z.disableActive?" bs-disable-active":"")+(z.className?" "+z.className:"")+'">'+z.message+"</p>";t.push(D);continue}pClasses=[];if(!s){pClasses.push("first-contact")}if(x[w+1]&&x[w+1].raw&&x[w+1].raw.type!=="contact"){pClasses.push("last-contact")}u=(pClasses.length)?' class="'+pClasses.join(" ")+'"':"";if(z.e&&!z.u&&!z.n){if(!z.i){z.i="/images/icon_unread.gif"}k=q.showIcon?'<img src="'+z.i+'" width="16" height="16" class="BuddyIconX bs-email-icon">':"";j='<p email="'+z.e+'"'+u+'><span class="name name-email">'+k+'<strong class="username">'+a(z.e,i)+'</strong></span><span class="relationship"></span></p>';t.push(j);s=true;continue}r=(z.a)?z.a:z.n;m=' / <a href="/people/'+r+'/">'+h.transjax.get("bo-selecta","uber_contact_list_view_profile")+"</a>";if(!z.i){z.i=(z.f&&z.f!==0&&z.s&&z.s!==0)?"http://farm"+z.f+".staticflickr.com/"+z.s+"/buddyicons/"+z.n+".jpg":"http://www.flickr.com/images/buddyicon.jpg"}v="";if(q.showRelationship){if(z.d==="1"&&z.y==="1"){v+=h.transjax.get("bo-selecta","uber_contact_list_friend_and_family")}else{if(z.d==="1"){v+=h.transjax.get("bo-selecta","uber_contact_list_friend")}else{if(z.y==="1"){v+=h.transjax.get("bo-selecta","uber_contact_list_family")}else{if(z.removed==="1"){v+='<em class="contact-removed">'+h.transjax.get("bo-selecta","uber_contact_list_removed")+"</em>"}else{if(q.searchingGlobally){v+=""}else{v+=h.transjax.get("bo-selecta","uber_contact_list_contact")}}}}}if(q.showEditRelationshipLink&&!q.searchingGlobally){v+=' <span class="edit-rel">(<a href="/people/'+r+'/relationship/" onclick="icon_windowOpenFromLink(\''+z.n+"'); return false;\">"+h.transjax.get("bo-selecta","uber_contact_list_edit")+"</a>)</span>"}}k=q.showIcon?'<img src="'+z.i+'" width="24" height="24" class="BuddyIconX fade-in" nsid="'+z.n+'" '+q.iconAnimCode+">":"";k=q.linkUsernameToPhotostream?'<a href="/photos/'+r+'/">'+k+"</a>":k;B=q.showUsername?a(z.u,i):"";B=q.linkUsernameToPhotostream?'<strong class="username"><a href="/photos/'+r+'/">'+B+"</a></strong>":'<strong class="username">'+B+"</strong>";y="";if(q.showSubtitle){if(!z.matched||z.matched==="realname"){y=z.r?a(z.r,i):h.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(z.matched==="username"){y=z.r?q._sanitizeString(z.r):h.transjax.get("bo-selecta","uber_contact_list_no_realname")}else{if(z.matched==="email"){y=a(z.e,i)}else{if(z.matched==="path_alias"&&z.a){y="flickr.com/people/"+a(z.a,i)+"/"}}}}y=q.linkSubtitle?'<a title="'+h.transjax.get("bo-selecta","uber_contact_list_view_profile")+'" href="/people/'+r+'/" class="realname">'+y+"</a>":'<span class="realname">'+y+"</span>"}l=h.Node.create('<p nsid="'+z.n+'"'+u+'><span class="name">'+k+B+y+'</span><span class="relationship">'+v+"</span></p>");h.imageFader.attach(l.all("img"));t.push(l);s=true}return t};function a(m,k){if(!m){return m}var i,j,l;m=h.StringFilters.unescape_entities(m,true);j=k?m.search(k):-1;if(j===-1){return h.BoSelecta3.sanitizeString(m)}i=m.match(k);l=j+i[0].length;return h.StringFilters.escape_entities(h.BoSelecta3.sanitizeString(m.substring(0,j)),true)+'<span class="term-highlight">'+h.StringFilters.escape_entities(h.BoSelecta3.sanitizeString(m.substring(j,l)),true)+"</span>"+h.StringFilters.escape_entities(h.BoSelecta3.sanitizeString(m.substring(l,m.length)),true)}d.addSections=function(i){h.NavSelecta.nav_sections=h.NavSelecta.nav_sections.concat(i)};e.nav_sections=[{name:h.transjax.get("nav-selecta","section_your_photostream"),sectionType:"photos",url:"/photos/me/"},{name:h.transjax.get("nav-selecta","section_your_sets"),sectionType:"photos",url:"/photos/me/sets/"},{name:h.transjax.get("nav-selecta","section_your_collections"),sectionType:"photos",url:"/photos/me/collections/"},{name:h.transjax.get("nav-selecta","section_your_galleries"),sectionType:"photos",url:"/photos/me/galleries/"},{name:h.transjax.get("nav-selecta","section_your_archives"),sectionType:"photos",url:"/photos/me/archives/"},{name:h.transjax.get("nav-selecta","section_your_tags"),sectionType:"photos",url:"/photos/me/tags/"},{name:h.transjax.get("nav-selecta","section_your_map"),sectionType:"map",url:"/photos/me/map/"},{name:h.transjax.get("nav-selecta","section_your_favorites"),sectionType:"photos",url:"/photos/me/favorites/"},{name:h.transjax.get("nav-selecta","section_your_stats"),sectionType:"stats",url:"/photos/me/stats/"},{name:h.transjax.get("nav-selecta","section_your_apps"),sectionType:"",url:"/services/apps/by/me/"},{name:h.transjax.get("nav-selecta","section_recent_activity"),sectionType:"activity",url:"/activity/"},{name:h.transjax.get("nav-selecta","section_photos_of_you"),sectionType:"photos",url:"/photosof/me/"},{name:h.transjax.get("nav-selecta","section_upload_photos"),sectionType:"photos",url:"/photos/upload/"},{name:h.transjax.get("nav-selecta","section_your_account"),sectionType:"text",url:"/account/"},{name:h.transjax.get("nav-selecta","section_your_profile"),sectionType:"",url:"/people/me/"},{name:h.transjax.get("nav-selecta","section_flickrmail"),sectionType:"text",url:"/mail/"},{name:h.transjax.get("nav-selecta","section_organize_and_create"),sectionType:"photos",url:"/photos/organize/"},{name:h.transjax.get("nav-selecta","section_prints_and_photo_products"),sectionType:"photos",url:"/photos/organize/?start_tab=print"},{name:h.transjax.get("nav-selecta","section_contacts"),sectionType:"photos",url:"/photos/contacts/"},{name:h.transjax.get("nav-selecta","section_photos_of_your_contacts"),sectionType:"photos",url:"/photosof/contacts/"},{name:h.transjax.get("nav-selecta","section_contact_list"),sectionType:"contacts",url:"/people/me/contacts/"},{name:h.transjax.get("nav-selecta","section_find_your_friends"),sectionType:"contacts",url:"/import/people/"},{name:h.transjax.get("nav-selecta","section_invite_your_friends"),sectionType:"contacts",url:"/invite/"},{name:h.transjax.get("nav-selecta","section_invite_history"),sectionType:"text",url:"/invite/history/"},{name:h.transjax.get("nav-selecta","section_guest_pass_history"),sectionType:"text",url:"/invite/history/guests/"},{name:h.transjax.get("nav-selecta","section_your_groups"),sectionType:"photos",url:"/groups/"},{name:h.transjax.get("nav-selecta","section_recent_changes_in_your_groups"),sectionType:"activity",url:"/recent.gne"},{name:h.transjax.get("nav-selecta","section_create_a_new_group"),sectionType:"text",url:"/groups_create.gne"},{name:h.transjax.get("nav-selecta","section_the_tour"),sectionType:"text",url:"/tour/"},{name:h.transjax.get("nav-selecta","section_explore"),sectionType:"photos",url:"/explore/"},{name:h.transjax.get("nav-selecta","section_last_7_days_interesting"),sectionType:"photos",url:"/explore/interesting/7days/"},{name:h.transjax.get("nav-selecta","section_popular_tags"),sectionType:"photos",url:"/photos/tags/"},{name:h.transjax.get("nav-selecta","section_most_recent_uploads_to_flickr"),sectionType:"photos",url:"/photos/"},{name:h.transjax.get("nav-selecta","section_video_on_flickr"),sectionType:"video",url:"/explore/video/"},{name:h.transjax.get("nav-selecta","section_galleries"),sectionType:"photos",url:"/galleries/"},{name:h.transjax.get("nav-selecta","section_explore_analog"),sectionType:"photos",url:"/analog/"},{name:h.transjax.get("nav-selecta","section_flickr_clock"),sectionType:"photos",url:"/explore/clock/"},{name:h.transjax.get("nav-selecta","section_world_map"),sectionType:"map",url:"/map/"},{name:h.transjax.get("nav-selecta","section_places"),sectionType:"map",url:"/places/"},{name:h.transjax.get("nav-selecta","section_the_commons"),sectionType:"photos",url:"/commons/"},{name:h.transjax.get("nav-selecta","section_creative_commons"),sectionType:"photos",url:"/creativecommons/"},{name:h.transjax.get("nav-selecta","section_flickrblog"),sectionType:"photos",url:"http://blog.flickr.com/"},{name:h.transjax.get("nav-selecta","section_getty_images"),sectionType:"photos",url:"/gettyimages/"},{name:h.transjax.get("nav-selecta","section_code_flickr"),sectionType:"code",url:"http://code.flickr.com/"},{name:h.transjax.get("nav-selecta","section_the_app_garden"),sectionType:"text",url:"/services/"},{name:h.transjax.get("nav-selecta","section_camera_finder"),sectionType:"text",url:"/cameras/"},{name:h.transjax.get("nav-selecta","section_developer_guidelines"),sectionType:"code",url:"/services/developer/"},{name:h.transjax.get("nav-selecta","section_api_docs"),sectionType:"code",url:"/services/api/"},{name:h.transjax.get("nav-selecta","section_feeds"),sectionType:"text",url:"/services/feeds/"},{name:h.transjax.get("nav-selecta","section_help"),sectionType:"text",url:"/help/"},{name:h.transjax.get("nav-selecta","section_community_guidelines"),sectionType:"text",url:"/guidelines.gne"},{name:h.transjax.get("nav-selecta","section_the_help_forum"),sectionType:"text",url:"/help/forum/"},{name:h.transjax.get("nav-selecta","section_faq"),sectionType:"text",url:"/help/faq/"},{name:h.transjax.get("nav-selecta","section_tools"),sectionType:"text",url:"/tools/"},{name:h.transjax.get("nav-selecta","section_about_flickr"),sectionType:"meta",url:"/about/"},{name:h.transjax.get("nav-selecta","section_jobs"),sectionType:"meta",url:"/jobs/"},{name:h.transjax.get("nav-selecta","section_mobile"),sectionType:"",url:"/mobile/"},{name:"Android",sectionType:"",url:"/android/"},{name:"Windows",sectionType:"",url:"/windows/"},{name:h.transjax.get("nav-selecta","section_photosession"),sectionType:"",url:"/photosession/"}];h.extend(h.NavSelecta,h.BoSelecta3,d,e)},"0.0.1",{requires:F.config.modules["nav-selecta"].requires||[],optional:F.config.modules["nav-selecta"].optional||[]});YUI.add("popup-login",function(a){var e="/photo_grease_postlogin.gne",h=false,q=false,o=false,r,p="head-upload-link",c="signin-popup",l=/cookie_session=[^;]+/gi,b=a.global_dialog;function n(){var s={method:"post",data:"random=0",on:{success:function(v,u,t){if(u&&(u.responseText==="1,1"||u.responseText==="1,0")){a.fire("login:authenticated",u.responseText)}else{d()}}}};a.later(100,this,g);a.io("/fragment.gne?name=social-auth-fragment",s)}function g(){if(b){b.show({loading:true,modal:true})}}function d(){if(b){b.hide()}}function k(v){if(a.config.flickr.is_touch_device){var u=e+"?d="+window.location+"&notpopup=1";window.location=v+"?popup=0&redir="+encodeURIComponent(u);return false}var t=v+"?popup=1&redir="+e+"?d="+window.location;try{r=window.open(t,"newWindow","width=650,height=650,resizable=1,scrollbars=1,location=yes")}catch(w){return true}try{if(r.focus){r.focus()}}catch(s){}a.later(500,this,function(){if(!r||r.closed||typeof r.closed==="undefined"||!h){var x=e+"?d="+window.location+"&notpopup=1";window.location=v+"?popup=0&redir="+encodeURIComponent(x)}});return false}function i(){a.later(20,this,f);q=true;k("/signin")}var j=0;function f(){if(document.cookie.match(l)){q=false;n()}else{a.later(20,this,f)}}function m(){if(a.config.flickr.user.nsid){return}a.one("body").on("click",function(u){var t=u.target.get("id");if(u.target.ancestor("."+c,true)){u.preventDefault();u.halt();i()}else{if(t===p){o=true;u.halt();i()}}});var s=a.one("window");s.on("login|blur",function(t){h=true});s.on("login|focus",function(t){h=false;if(q){n()}});a.on("login:authenticated",function(t){if(t==="1,1"){window.location="/"}else{if(o){window.location="/photos/upload"}else{window.location.reload()}}})}a.popup_login={init:m}},"0.0.1",{requires:["node","event","io-base"]});/*
YUI 3.4.0 (build 3928)
Copyright 2011 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("json-stringify",function(b){var j=(b.config.win||{}).JSON,N=b.Lang,p=N.isFunction,I=N.isObject,v=N.isArray,k=Object.prototype.toString,C=(k.call(j)==="[object JSON]"&&j),F=!!C,D="undefined",r="object",A="null",L="string",B="number",x="boolean",l="date",E={"undefined":D,"string":L,"[object String]":L,"number":B,"[object Number]":B,"boolean":x,"[object Boolean]":x,"[object Date]":l,"[object RegExp]":r},g="",q="{",a="}",y="[",i="]",s=",",c=",\n",m="\n",G=":",h=": ",u='"',d=/[\x00-\x07\x0b\x0e-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=[[/\\/g,"\\\\"],[/\"/g,'\\"'],[/\x08/g,"\\b"],[/\x09/g,"\\t"],[/\x0a/g,"\\n"],[/\x0c/g,"\\f"],[/\x0d/g,"\\r"]],t=n.length,f={},o,H;function O(P){var e=typeof P;return E[e]||E[k.call(P)]||(e===r?(P?r:A):D);}function K(e){if(!f[e]){f[e]="\\u"+("0000"+(+(e.charCodeAt(0))).toString(16)).slice(-4);o[e]=0;}if(++o[e]===H){n.push([new RegExp(e,"g"),f[e]]);t=n.length;}return f[e];}function w(Q){var e,P;for(e=0;e<t;e++){P=n[e];Q=Q.replace(P[0],P[1]);}return u+Q.replace(d,K)+u;}function z(e,P){return e.replace(/^/gm,P);}function J(P,X,e){if(P===undefined){return undefined;}var R=p(X)?X:null,W=k.call(e).match(/String|Number/)||[],Y=b.JSON.dateToString,V=[],T,S,U;o={};H=b.JSON.charCacheThreshold;if(R||!v(X)){X=undefined;}if(X){T={};for(S=0,U=X.length;S<U;++S){T[X[S]]=true;}X=T;}e=W[0]==="Number"?new Array(Math.min(Math.max(0,e),10)+1).join(" "):(e||g).slice(0,10);function Q(ab,ah){var af=ab[ah],aj=O(af),ae=[],ad=e?h:G,ac,aa,ai,Z,ag;if(I(af)&&p(af.toJSON)){af=af.toJSON(ah);}else{if(aj===l){af=Y(af);}}if(p(R)){af=R.call(ab,ah,af);}if(af!==ab[ah]){aj=O(af);}switch(aj){case l:case r:break;case L:return w(af);case B:return isFinite(af)?af+g:A;case x:return af+g;case A:return A;default:return undefined;}for(aa=V.length-1;aa>=0;--aa){if(V[aa]===af){throw new Error("JSON.stringify. Cyclical reference");}}ac=v(af);V.push(af);if(ac){for(aa=af.length-1;aa>=0;--aa){ae[aa]=Q(af,aa)||A;}}else{ai=X||af;aa=0;for(Z in ai){if(ai.hasOwnProperty(Z)){ag=Q(af,Z);if(ag){ae[aa++]=w(Z)+ad+ag;}}}}V.pop();if(e&&ae.length){return ac?y+m+z(ae.join(c),e)+m+i:q+m+z(ae.join(c),e)+m+a;}else{return ac?y+ae.join(s)+i:q+ae.join(s)+a;}}return Q({"":P},"");}if(C){try{F=("0"===C.stringify(0));}catch(M){F=false;}}b.mix(b.namespace("JSON"),{useNativeStringify:F,dateToString:function(P){function e(Q){return Q<10?"0"+Q:Q;}return P.getUTCFullYear()+"-"+e(P.getUTCMonth()+1)+"-"+e(P.getUTCDate())+"T"+e(P.getUTCHours())+G+e(P.getUTCMinutes())+G+e(P.getUTCSeconds())+"Z";},stringify:function(Q,e,P){return C&&b.JSON.useNativeStringify?C.stringify(Q,e,P):J(Q,e,P);},charCacheThreshold:100});},"3.4.0");YUI.add("gallery-storage-lite",function(b){var s=b.config.doc,j=b.config.win,c=b.JSON,r=b.namespace("StorageLite"),i="yui_storage_lite",v="YUI StorageLite data",y=1048576,p="1.0",t="ready",x=0,h=1,a=2,m=3,k=4,f="yui_storage_lite",l="data",u={},n,g;try{if(j.localStorage){g=h}else{if(j.globalStorage){g=a;var o=j.globalStorage[j.location.hostname]}else{if(j.openDatabase&&navigator.userAgent.indexOf("Chrome")===-1){g=m}else{if(b.UA.ie>=5){g=k}else{g=x}}}}}catch(q){g=x}b.StorageFullError=function(d){b.StorageFullError.superclass.constructor.call(d);this.name="StorageFullError";this.message=d||"Maximum storage capacity reached";if(b.UA.ie){this.description=this.message}};b.extend(b.StorageFullError,Error);b.augment(r,b.EventTarget,true,null,{emitFacade:true,prefix:"storage-lite",preventable:false});r.publish(t,{fireOnce:true});b.mix(r,{clear:function(){},getItem:function(e,d){return null},length:function(){return 0},removeItem:function(d){},setItem:function(d,e){}});if(g===h||g===a){b.mix(r,{length:function(){return n.length},removeItem:function(d){n.removeItem(d)},setItem:function(e,w,d){n.setItem(e,d?c.stringify(w):w)}},true);if(g===h){n=j.localStorage;b.mix(r,{clear:function(){n.clear()},getItem:function(w,e){try{return e?c.parse(n.getItem(w)):n.getItem(w)}catch(d){return null}}},true)}else{if(g===a){n=j.globalStorage[j.location.hostname];b.mix(r,{clear:function(){for(var d in n){if(n.hasOwnProperty(d)){n.removeItem(d);delete n[d]}}},getItem:function(w,e){try{return e?c.parse(n[w].value):n[w].value}catch(d){return null}}},true)}}r.fire(t)}else{if(g===m||g===k){b.mix(r,{clear:function(){u={};r._save()},getItem:function(e,d){return u.hasOwnProperty(e)?u[e]:null},length:function(){var e=0,d;for(d in u){if(u.hasOwnProperty(d)){e+=1}}return e},removeItem:function(d){if(u){delete u[d];r._save()}else{u={}}},setItem:function(e,w,d){u[e]=w;r._save()}},true);if(g===m){n=j.openDatabase(i,p,v,y);b.mix(r,{_save:function(){n.transaction(function(d){d.executeSql("REPLACE INTO "+i+" (name, value) VALUES ('data', ?)",[c.stringify(u)])})}},true);n.transaction(function(d){d.executeSql("CREATE TABLE IF NOT EXISTS "+i+"(name TEXT PRIMARY KEY, value TEXT NOT NULL)");d.executeSql("SELECT value FROM "+i+" WHERE name = 'data'",[],function(z,w){if(w.rows.length){try{u=c.parse(w.rows.item(0).value)}catch(e){u={}}}r.fire(t)})})}else{if(g===k){n=s.createElement("span");n.addBehavior("#default#userData");b.mix(r,{_save:function(){var e=c.stringify(u);try{n.setAttribute(l,e);n.save(f)}catch(d){throw new b.StorageFullError()}}},true);b.on("domready",function(){s.body.appendChild(n);n.load(f);try{u=c.parse(n.getAttribute(l))}catch(d){u={}}r.fire(t)})}}}else{r.fire(t)}}},"1.0.0",{requires:["event-base","event-custom","event-custom-complex","json"]});YUI.add("occult",function(e){if(typeof window.FLICKR==="undefined"){window.FLICKR={};var d=window.FLICKR}function c(){var f=arguments,l=null,h,g,k;for(h=0;h<f.length;h=h+1){k=(""+f[h]).split(".");l=FLICKR;for(g=(k[0]=="FLICKR")?1:0;g<k.length;g=g+1){l[k[g]]=l[k[g]]||{};l=l[k[g]]}}return l}function b(h,l){c(h);var g=h.split("."),f=g.length,k=FLICKR;for(var j=0;j<g.length-1;j++){k=k[g[j]]}k[g[f-1]]=l}function a(f,g){return d[f]}e.occult={register:b,get:a}},"0.0.1",{});YUI.add("grease",function(c){var V=false,Q,aj,N=c.StorageLite,R=false,s,t,y,O,U,C="pc",u="pf",g="pct",P="ps",W="ps3",j="pp",q="pps",X="/photo_grease_postlogin.gne",x="fave",ab="contact",ac="share",D="share_v3",h="comment",d=/cookie_session=[^;]+/gi,l=";",am=3,M=1000,J=[C,P,W,u,g,u,j,q];if(c.config.flickr.flags.enable_grease){V=true}O=c.global_dialog;function p(){c.Array.each(J,function(Y){N.removeItem(Y)})}var af=(function(){var Y=null,ax=false,ap=0,ar=false,aq=false;function av(){M=(M>=10000)?M:M*2;return M}function aw(){if(aq){if(Y){O.remove_existing_dialog();Y.cancel();ax=false}aq=false}}function at(){aq=false;if(Y){Y.cancel()}aw();O.remove_existing_dialog();ax=false;Y=null;ar=false;ap=0;M=1000;ar=false}function ao(){if(Y){Y.cancel()}ar=true;c.fire("grease:cancel")}function au(){if(ar){return}if(Y){Y.cancel();Y=null}var ay={method:"post",data:"random=0",on:{success:function(aB,aA,az){if(aA&&aA.responseText.substring(0,1)==="1"){c.fire("grease:authenticated")}else{if(ap++<am){m();if(!Y){Y=c.later(av(),this,au)}}}},failure:function(){if(ap++<1){if(!Y){Y=c.later(av(),this,au)}}}}};c.io("/fragment.gne?name=social-auth-fragment",ay)}return{start:function(){if(!aq){aq=true;au()}else{M=50;Y&&Y.cancel();au();return}},stop:aw,cancel:ao,pause:function(){Y&&Y.cancel();M=1000000},canceled:ar,reset:at}}());function ad(Y){if(!V){return}if(Y&&c.config.flickr.user.nsid){N.on("storage-lite:ready",function(){var ap=ae(C),az=ae(u),ar=ae(g),av=ae(P,true),au=ae(W,true),ao=ae(j),ay=ae(q);if(ap){y="comment";var ax=ap.indexOf(";"),aq=ap.substring(0,ax),aw=ap.substring(ax+1);if(aq===c.config.flickr.photo.id){Z(aw)}}else{if(az){y="fave";T(az)}else{if(ar){y="contact";o(ar)}else{if(av){y="share";G(av)}else{if(au){y="sharev3";ah(au)}else{if(ao){y="party";al()}else{if(ay){y="partyStart";f(ay)}else{var at=c.one("#global-dialog-background");if(at){at.setStyle("display","none")}p()}}}}}}}})}else{N.on("storage-lite:ready",function(){p()})}}function b(){c.detach("grease|*");Q=false;m();U(false);af.reset()}function e(Y){if(Y.target.hasClass("close-x")||Y.target.hasClass("Butt")){Y.preventDefault();Y.halt();c.global_dialog.hide()}}function z(){O.show({loading:true,modal:true})}function m(){O.hide()}function ai(ao){var ap=c.one("body");var Y=ap.create('<img height="1" width="1" src="'+ao+'">');ap.appendChild(Y)}function H(){O.create_dialog(c.one("#grease-confirm-"+y).get("innerHTML"),{width:355}).show({loading:false,modal:true});c.one("#global_dialog").on("click",e,this);c.later(10000,this,c.global_dialog.hide);if(c.config.flickr.flags.enable_rapid_tracking&&c.one("#reg-tour")){c.use("rapid-tracker",function(ao){ao.rapidTracker.addModules("grease-conversion-tracker");ao.rapidTracker.beaconClick("grease-conversion-tracker",y);switch(y){case x:ai("https://pclick.internal.yahoo.com/p/s=2143640346&t="+Math.random());break;case ab:ai("https://pclick.internal.yahoo.com/p/s=2143640345&t="+Math.random());break;case ac:ai("https://pclick.internal.yahoo.com/p/s=2143640344&t="+Math.random());break;default:ai("https://pclick.internal.yahoo.com/p/s=2143640343&t="+Math.random())}})}}function T(Y){if(c.config.flickr.photo&&c.config.flickr.photo.isOwner){O.remove_existing_dialog();var ao=c.one("#global-dialog-background");if(ao){ao.setStyle("display","none")}p();return}H();if(!c.PhotoData.get(Y).get("is_fave")){c.PhotoData.get(Y).toggle_fave()}p()}function G(Y){z();p();c.flickrAPI.callMethod("flickr.sharing.share",Y,{success:function(ao){m();H()},failure:r})}function ah(Y){z();p();Y.magic_cookie=c.config.flickr.magic_cookie;Y.from_grease=1;c.use("share-this-v3-dialog",function(ao){ao.shareThisV3Dialog.do_share_action(Y)})}function al(){c.use("viewing-party-invitation-creator",function(ao){ao.ViewingPartyInvitationCreator.show()})}function f(Y){c.use("photo-session-marketing",function(ao){ao.PhotoSessionMarketing.fetchURLAndRedirect(ao.JSON.parse(Y))})}function r(){p();O.create_dialog(c.one("#grease-error").get("innerHTML")).show({loading:false,modal:true,width:355,style:"grease-error"});c.one("#global_dialog").on("click",e,this);c.later(5000,this,c.global_dialog.hide)}function o(Y){z();contactArr=Y.split(";");c.flickrAPI.callMethod("flickr.contacts.add",{user_id:contactArr[0],friend:contactArr[1],family:contactArr[2]},{success:function(ao){m();H();p()},failure:r})}function n(){if(document.cookie.match(d)){Q=false;z();checkAuth()}else{c.later(20,this,n)}}function Z(ap){z();p();var ao=c.one("#message");if(!ao){r();return}c.one("#message").set("innerHTML",ap);var Y={method:"post",data:"preview=0",form:{id:c.one(".add-comment-form form")},on:{success:function(av,au,ar){m();H();var aq=c.one("#comments");aq.set("innerHTML",au.responseText);var at=aq.one(".Problem");if(at){O.create_alert_dialog(at.get("innerHTML"),function(){aq.one("#message").scrollIntoView()})}}}};c.io("/photo_comments_fragment.gne",Y)}function A(aq){var ap;af.reset();var ao=aq+"&popup=1&redir="+X+"?d="+encodeURIComponent(window.location+"?reg=1")+"&src="+y;if(c.config.flickr.is_touch_device){ap=X+"?d="+window.location+"&notpopup=1&src="+y+"&reg=1";window.location=aq+"&popup=0&redir="+encodeURIComponent(ap);return false}try{aj=window.open(ao,"newWindow","width=650,height=650,resizable=1,scrollbars=1,location=yes")}catch(at){return true}try{if(aj.focus){aj.focus()}}catch(Y){}if(!aj||aj.closed||typeof aj.closed==="undefined"){ap=X+"?d="+window.location+"&notpopup=1&src="+y+"&reg=1";window.location=aq+"&popup=0&redir="+encodeURIComponent(ap)}var ar=c.one("window");ar.on("grease|focus",function(){if(!af.canceled){af.start()}if(!document.cookie.match(d)){m();U(false);n()}});c.on("grease:cancel",function(au){Q=false;b()});ar.on("grease|blur",function(){if(!af.canceled){af.pause()}});ar.on("grease:timeout",function(au){Q=false;b()});c.on("grease:authenticated",function(ax){z();Q=false;U(true);var ay=(W),au=["reg=1","src="+y];if(ay){var aw=window.location.toString(),av=aw.match(/\?/i);aw+=(!av?"?":"&")+au.join("&");window.location=aw}else{window.location=c.config.flickr.photo.url+"?"+au.join("&")}});return false}function a(ap,aq,ao){var Y=ao||false;N.setItem(ap,aq,Y)}function ae(Y,ap){var ao=ap||false;return N.getItem(Y,ao)}function E(Y){if(!Q){af.reset();U=Y||function(){};c.global_dialog.remove_existing_dialog();c.global_dialog.show({loading:true,modal:true});Q=true;A("/signin?src="+y+"&reg=1")}else{b();E(Y)}}function K(Y){p();a(C,c.config.flickr.photo.id+l+Y);y="comment"}function w(Y){p();a(u,Y);y="fave"}function aa(Y){p();if(c.Lang.isArray(Y)){a(g,Y.join(";"));y="contact"}}function S(Y){p();a(P,Y,true);y="share"}function ag(Y){p();a(W,Y,true);y="sharev3"}function v(Y){p();a(j,Y);y="party"}function an(Y){p();a(q,c.JSON.stringify(Y));y="partyStart"}c.grease={init:ad,enabled:V,authenticate:E,postComment:K,addFave:w,addContact:aa,share:S,shareV3:ag,photoParty:v,photoPartyStart:an};if(c.config.flickr.user.admin_user==="saw"){c.occult.register("postComment",function(Y){Z(Y)});c.occult.register("showdialog",function(Y){y="fave";H()});c.occult.register("fakeerror",function(Y){r(Y)})}var i=c.one("#reg-tour");function k(){for(var Y=1;Y<4;Y++){ak.removeClass(I+Y)}}function L(Y){Y.preventDefault();k();c.Event.purgeElement("#reg-tour");i.addClass("hidden")}function B(Y){if(Y.test("#reg-tour")){return}if(Y.test("ol li")){k();switch(Y.get("id")){case"step-1":ak.addClass(I+1);break;case"step-2":ak.addClass(I+2);break;case"step-3":ak.addClass(I+3);break}}else{B(Y.get("parentNode"))}}if(i){var I="tour-step",ak=c.one("body");i.one(".close-x").on("click",L);i.on("mouseover",function(Y){B(Y.target)});i.on("mouseout",function(Y){k()})}},"0.0.1",{requires:F.config.modules.grease.requires||[]});YUI.add("photo-transjax",function(a){a.transjax.add("photo",{your_favorites:'Your favorites',untitled:'Untitled',window_title:'%s | Flickr - Photo Sharing!'})},"0.0.1",{requires:["transjax-base"]});YUI.add("urls",function(a){var f={photo:/^\/photos\/([^\/]+)\/(\d+)(?:\/in\/([^\/]+))?(?:(?:\/page(\d+))|(?:\/(lightbox))|(?:\/(tour)))?/,photostream:/^\/photos\/([^\/]+)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?/,delete_photo:/^\/photos\/([^\/]+)\/?\?delete=(\d+)(?:&context=([^&]+))?/,faves:/^\/photos\/([^\/]+)\/favorites(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,group_pool:/^\/groups\/([^\/]+)\/pool(?:\/((?:(?!with|page|lightbox)[^\/])+))?(?:\/with\/(\d+))?(?:\/page(\d+))?(\/lightbox)?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,gallery:/^\/photos\/([^\/]+)\/galleries\/([0-9]+)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?/,contacts:/^\/photos\/(?:friends|contacts)(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/,contactsfaves:/^\/photos\/contacts\/favorites(?:\/page(\d+))?(?:\/with\/(\d+))?(?:\/(lightbox))?\/?(?:\?(?:[^&]*&)?view=([^&]+))?/};function d(p,r){var o,q={};if(!f[p]){a.log('[urls] no regex found for page_type "'+p+'"');return}o=f[p].exec(r);switch(p){case"photo":q.path_alias=o[1]&&decodeURIComponent(o[1]);q.photo_id=o[2];q.context_id=o[3]&&decodeURIComponent(o[3]);q.page=o[4];q.lightbox=o[5]?true:false;q.tour=o[6]?true:false;break;case"photostream":q.path_alias=o[1]&&decodeURIComponent(o[1]);q.page=o[2];q.photo_id=o[3];q.lightbox=o[4]?true:false;break;case"delete_photo":q.path_alias=o[1]&&decodeURIComponent(o[1]);q.photo_id=o[2];q.context_id=o[3];break;case"faves":q.path_alias=o[1]&&decodeURIComponent(o[1]);q.page=o[2];q.photo_id=o[3];q.lightbox=o[4]?true:false;q.view_mode=o[5];break;case"group_pool":q.group_id=o[1]&&decodeURIComponent(o[1]);q.owner_id=o[2]&&decodeURIComponent(o[2]);q.photo_id=o[3];q.page=o[4];q.lightbox=o[5]?true:false;q.view_mode=o[6];break;case"gallery":q.path_alias=o[1]&&decodeURIComponent(o[1]);q.gallery_id=o[2]&&decodeURIComponent(o[2]);q.page=o[3];q.photo_id=o[4];q.lightbox=o[5]?true:false;break;case"contacts":q.page=o[1];q.photo_id=o[2];q.lightbox=o[3]?true:false;q.view_mode=o[4];break;case"contactsfaves":q.page=o[1];q.photo_id=o[2];q.lightbox=o[3]?true:false;q.view_mode=o[4];break}return q}function b(q,p){var o;p=p||{};if(p.photo&&a.Lang.isString(p.photo)){p.photo_id=p.photo;if(a.PhotoData){p.photo=a.PhotoData.get(p.photo)}if(!a.Lang.isObject(p.photo)){p.photo=undefined;delete p.photo}}if(a.Lang.isObject(p.photo)){p.photo_id=p.photo.get("id")}switch(q){case"photo":o=n(p);break;case"photostream":o=j(p);break;case"delete_photo":o=m(p);break;case"faves":o=l(p);break;case"group_pool":o=g(p);break;case"gallery":o=c(p);break;case"contacts":o=k(p);break;case"contactsfaves":o=i(p);break}return o}function n(q){var p,v,u,s,t,r,o;p=q.photo;if(!a.Lang.isObject(p)){a.log("[urls] missing photo object");return}if(q.context){if(a.Lang.isString(q.context)){v=q.context}else{if(a.Lang.isObject(q.context)&&a.Lang.isString(q.context.id)){v=q.context.id}else{if(a.Lang.isBoolean(q.context)&&a.ContextData&&a.ContextData.getContext()){v=a.ContextData.getContext()&&a.ContextData.getContext().id}}}}u=a.Lang.isBoolean(q.lightbox)?q.lightbox:false;s=(a.Lang.isBoolean(q.sizes)||a.Lang.isString(q.sizes))?q.sizes:false;t=a.Lang.isString(q.hash)?q.hash:false;r=a.Lang.isBoolean(q.exif)?q.exif:false;o=a.Lang.isBoolean(q.faves)?q.faves:false;return"/photos/"+(p.get("pathalias")?p.get("pathalias"):p.get("owner"))+"/"+p.get("id")+"/"+(s?"sizes/"+(a.Lang.isString(s)?s+"/":""):"")+(r?"meta/":"")+(o?"favorites/":"")+(v?("in/"+v+"/"):"")+(u?"lightbox/":"")+(t?"#"+t:"")}function j(p){var q,o;q=p.path_alias;if(!q){a.log("[urls] missing path_alias");return}o="/photos/"+q+"/";if(p.photo_id){o+="with/"+p.photo_id+"/"}if(p.lightbox){o+="lightbox/"}return o}function m(p){var q,o;q=p.path_alias;if(!q){a.log("[urls] missing path_alias");return}photo_id=p.photo_id;if(!photo_id){a.log("[urls] missing photo_id");return}context_id=p.context_id;o="/photos/"+q+"/?delete="+photo_id+(context_id?"&context="+context_id:"")+"&magic_cookie="+a.config.flickr.magic_cookie;return o}function l(p){var q,o;q=p.path_alias;if(!q){a.log("[urls] missing path_alias");return}o="/photos/"+q+"/favorites/";if(p.page){o+="page"+p.page+"/"}if(p.photo_id){o+="with/"+p.photo_id+"/"}if(p.lightbox){o+="lightbox/"}if(p.view_mode){o+="?view="+p.view_mode}return o}function g(p){var q,o;q=p.group_id;if(!q){a.log("[urls] missing group_id");return}o="/groups/"+q+"/pool/";if(p.owner_id){o+=p.owner_id+"/"}if(p.photo_id){o+="with/"+p.photo_id+"/"}if(p.page){o+="page"+p.page+"/"}if(p.lightbox){o+="lightbox/"}if(p.view_mode){o+="?view="+p.view_mode}return o}function k(p){var o;o="/photos/friends/";if(p.page){o+="page"+p.page+"/"}if(p.photo_id){o+="with/"+p.photo_id+"/"}if(p.lightbox){o+="lightbox/"}if(p.view_mode){o+="?view="+p.view_mode}return o}function i(p){var o;o="/photos/contacts/favorites/";if(p.page){o+="page"+p.page+"/"}if(p.photo_id){o+="with/"+p.photo_id+"/"}if(p.lightbox){o+="lightbox/"}if(p.view_mode){o+="?view="+p.view_mode}return o}function c(q){var r,o,p;r=q.path_alias;o=q.gallery_id;if(!r){a.log("[urls] missing path_alias");return}if(!o){a.log("[urls] missing gallery_id");return}p="/photos/"+r+"/galleries/"+o+"/";if(q.photo_id){p+="with/"+q.photo_id+"/"}if(q.lightbox){p+="lightbox/"}return p}function h(p){if(!a.Lang.isNumber(p)){p=parseInt(p,10)}var o="",r="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ";var s=p,q;while(p>=58){s=p/58;q=p-(58*Math.floor(s));o=""+r.substr(q,1)+o;p=Math.floor(s)}return(s)?""+r.substr(s,1)+o:o}function e(t){var s="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ";var p=t.length;var o=0;var r=1;for(var q=(p-1);q>=0;q--){o=o+r*s.indexOf(t[q]);r=r*s.length}return o}a.urls={get:b,parse:d,getShortID:h,getLongID:e,regexes:f}},"0.0.1",{requires:F.config.modules.urls.requires||[],optional:F.config.modules.urls.optional||[]});